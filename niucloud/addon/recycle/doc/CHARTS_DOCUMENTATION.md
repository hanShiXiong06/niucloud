# 回收业务统计图表功能说明

## 功能概述

已为回收业务统计页面添加了完整的 ECharts 图表展示功能，提供直观的数据可视化体验。

## 图表类型

### 1. 今日工作分布饼图
- **位置**: 今日工作概览卡片下方
- **类型**: 环形饼图
- **数据**: 质检数量、定价数量、回收数量、退回数量
- **特色**: 
  - 响应式设计，支持鼠标悬停放大
  - 使用不同颜色区分各类工作
  - 显示百分比分布

### 2. 设备分类统计柱状图
- **位置**: 分类统计表格下方
- **类型**: 多系列柱状图
- **数据**: 按设备分类（手机、平板、笔记本、手表、其他）的统计
- **系列**: 质检数量、定价数量、回收数量、退回数量
- **权限**: 仅质检员和管理员可见

### 3. 用户工作量对比柱状图
- **位置**: 用户统计表格下方
- **类型**: 多系列柱状图
- **数据**: 各用户的工作量对比
- **系列**: 质检数量、定价数量、回收数量、退回数量
- **特色**: X轴标签倾斜45度显示，避免重叠

### 4. 排行榜柱状图
- **位置**: 排行榜表格下方
- **类型**: 单系列柱状图
- **数据**: 根据选择的排行类型显示
- **特色**: 
  - 前三名使用金银铜色标识
  - 动态标题根据排行类型变化
  - 金额类型自动添加货币符号
  - 显示最大值和最小值标记点
- **权限**: 仅管理员可见

## 技术特性

### 响应式设计
- 所有图表支持窗口大小变化自动调整
- 移动端友好的尺寸适配

### 动态更新
- 数据变化时图表自动更新
- 时间筛选器变化时重新获取数据并更新图表
- 排行榜类型切换时动态更新图表

### 性能优化
- 图表实例复用，避免重复创建
- 组件卸载时自动清理图表实例
- 使用 nextTick 确保 DOM 渲染完成后初始化图表

### 颜色方案
- **质检**: #409EFF (蓝色)
- **定价**: #67C23A (绿色)  
- **回收**: #E6A23C (橙色)
- **退回**: #F56C6C (红色)
- **排行榜金牌**: #FFD700 (金色)
- **排行榜银牌**: #C0C0C0 (银色)
- **排行榜铜牌**: #CD7F32 (铜色)

## 使用说明

### 查看图表
1. 登录管理后台
2. 进入回收业务统计页面
3. 图表会根据用户角色自动显示相应内容

### 时间筛选
1. 使用页面顶部的日期范围选择器
2. 选择开始和结束日期
3. 点击"查询"按钮
4. 所有图表会根据时间范围重新加载数据

### 排行榜切换
1. 在排行榜区域选择不同的排行类型
2. 图表会自动切换显示对应的排行数据

## 权限控制

- **超级管理员**: 查看所有图表
- **站点管理员**: 查看所有图表
- **质检员**: 查看今日统计、分类统计、用户统计
- **估价员**: 查看今日统计、用户统计
- **普通用户**: 查看今日统计、用户统计

## 依赖

- **ECharts**: 5.4.1 (已安装)
- **Vue 3**: Composition API
- **Element Plus**: UI 组件库

## 文件结构

```
niucloud/admin/src/addon/recycle/views/stats/dashboard.vue
```

## 注意事项

1. 图表需要在数据加载完成后才会显示
2. 空数据时图表不显示，只显示表格
3. 图表会根据浏览器窗口大小自动调整
4. 支持暗色主题（如果系统支持）

## 扩展性

代码结构良好，易于扩展：
- 可以轻松添加新的图表类型
- 支持添加更多的数据维度
- 可以自定义图表样式和配置
- 支持添加图表导出功能 