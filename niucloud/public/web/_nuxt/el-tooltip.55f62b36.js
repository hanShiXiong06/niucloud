import{f as N,B as S,o as H,c as de,w as K,r as P,an as Se,ao as tt,u as at,ab as Te,D as Y,ap as T,aq as Z,ar as pe,as as lt,i as p,H as ce,W as J,x,at as ot,O as nt,L as ve,a3 as Q,I as me,R as he,a5 as we,ah as b,a6 as W,T as Ee,a7 as st,aa as ut,M as fe,U as X,Y as be,au as _e,av as rt,a4 as it,aw as dt,V as ye,ax as pt,ay as ct,az as vt,aA as mt,S as ht,k as ee,l as ge,C as te,p as ft,t as bt,F as yt,G as xe,__tla as gt}from"./entry.d8ede324.js";import{E as Pe,__tla as xt}from"./el-popper.3d74d4b3.js";import{T as Mt,u as kt,t as ae,__tla as Ct}from"./index.5bd14e7b.js";import{f as It,__tla as St}from"./vnode.c0fca1a3.js";let Be,$e,Tt=Promise.all([(()=>{try{return gt}catch{}})(),(()=>{try{return xt}catch{}})(),(()=>{try{return Ct}catch{}})(),(()=>{try{return St}catch{}})()]).then(async()=>{const V=function(e,a,...r){let t;a.includes("mouse")||a.includes("click")?t="MouseEvents":a.includes("key")?t="KeyboardEvent":t="HTMLEvents";const c=document.createEvent(t);return c.initEvent(a,...r),e.dispatchEvent(c),e},Oe=N({name:"ElCollapseTransition"}),Ae=N({...Oe,setup(e){const a=S("collapse-transition"),r={beforeEnter(t){t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.style.maxHeight=0,t.style.paddingTop=0,t.style.paddingBottom=0},enter(t){t.dataset.oldOverflow=t.style.overflow,t.scrollHeight!==0?(t.style.maxHeight=`${t.scrollHeight}px`,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom):(t.style.maxHeight=0,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom),t.style.overflow="hidden"},afterEnter(t){t.style.maxHeight="",t.style.overflow=t.dataset.oldOverflow},beforeLeave(t){t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.dataset.oldOverflow=t.style.overflow,t.style.maxHeight=`${t.scrollHeight}px`,t.style.overflow="hidden"},leave(t){t.scrollHeight!==0&&(t.style.maxHeight=0,t.style.paddingTop=0,t.style.paddingBottom=0)},afterLeave(t){t.style.maxHeight="",t.style.overflow=t.dataset.oldOverflow,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom}};return(t,c)=>(H(),de(Te,Se({name:at(a).b()},tt(r)),{default:K(()=>[P(t.$slots,"default")]),_:3},16,["name"]))}});var D=Y(Ae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);D.install=e=>{e.component(D.name,D)};const ze=D;let Ne=class{constructor(e,a){this.parent=e,this.domNode=a,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,a=>{a.addEventListener("keydown",r=>{let t=!1;switch(r.code){case T.down:{this.gotoSubIndex(this.subIndex+1),t=!0;break}case T.up:{this.gotoSubIndex(this.subIndex-1),t=!0;break}case T.tab:{V(e,"mouseleave");break}case T.enter:case T.space:{t=!0,r.currentTarget.click();break}}return t&&(r.preventDefault(),r.stopPropagation()),!1})})}},He=class{constructor(e,a){this.domNode=e,this.submenu=null,this.submenu=null,this.init(a)}init(e){this.domNode.setAttribute("tabindex","0");const a=this.domNode.querySelector(`.${e}-menu`);a&&(this.submenu=new Ne(this,a)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",e=>{let a=!1;switch(e.code){case T.down:{V(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),a=!0;break}case T.up:{V(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),a=!0;break}case T.tab:{V(e.currentTarget,"mouseleave");break}case T.enter:case T.space:{a=!0,e.currentTarget.click();break}}a&&e.preventDefault()})}},Le=class{constructor(e,a){this.domNode=e,this.init(a)}init(e){const a=this.domNode.childNodes;Array.from(a).forEach(r=>{r.nodeType===1&&new He(r,e)})}};const We=N({name:"ElMenuCollapseTransition",setup(){const e=S("menu");return{listeners:{onBeforeEnter:a=>a.style.opacity="0.2",onEnter(a,r){Z(a,`${e.namespace.value}-opacity-transition`),a.style.opacity="1",r()},onAfterEnter(a){pe(a,`${e.namespace.value}-opacity-transition`),a.style.opacity=""},onBeforeLeave(a){a.dataset||(a.dataset={}),lt(a,e.m("collapse"))?(pe(a,e.m("collapse")),a.dataset.oldOverflow=a.style.overflow,a.dataset.scrollWidth=a.clientWidth.toString(),Z(a,e.m("collapse"))):(Z(a,e.m("collapse")),a.dataset.oldOverflow=a.style.overflow,a.dataset.scrollWidth=a.clientWidth.toString(),pe(a,e.m("collapse"))),a.style.width=`${a.scrollWidth}px`,a.style.overflow="hidden"},onLeave(a){Z(a,"horizontal-collapse-transition"),a.style.width=`${a.dataset.scrollWidth}px`}}}}});function je(e,a,r,t,c,M){return H(),de(Te,Se({mode:"out-in"},e.listeners),{default:K(()=>[P(e.$slots,"default")]),_:3},16)}var qe=Y(We,[["render",je],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-collapse-transition.vue"]]);function Me(e,a){const r=p(()=>{let t=e.parent;const c=[a.value];for(;t.type.name!=="ElMenu";)t.props.index&&c.unshift(t.props.index),t=t.parent;return c});return{parentMenu:p(()=>{let t=e.parent;for(;t&&!["ElMenu","ElSubMenu"].includes(t.type.name);)t=t.parent;return t}),indexPath:r}}function Re(e){return p(()=>{const a=e.backgroundColor;return a?new Mt(a).shade(20).toString():""})}const ke=(e,a)=>{const r=S("menu");return p(()=>r.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":Re(e).value||"","active-color":e.activeTextColor||"",level:`${a}`}))},Fe=ce({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},teleported:{type:Boolean,default:void 0},popperOffset:{type:Number,default:6},expandCloseIcon:{type:X},expandOpenIcon:{type:X},collapseCloseIcon:{type:X},collapseOpenIcon:{type:X}}),G="ElSubMenu";var le=N({name:G,props:Fe,setup(e,{slots:a,expose:r}){kt({from:"popper-append-to-body",replacement:"teleported",scope:G,version:"2.3.0",ref:"https://element-plus.org/en-US/component/menu.html#submenu-attributes"},p(()=>e.popperAppendToBody!==void 0));const t=be(),{indexPath:c,parentMenu:M}=Me(t,p(()=>e.index)),d=S("menu"),f=S("sub-menu"),s=J("rootMenu");s||ae(G,"can not inject root menu");const v=J(`subMenu:${M.value.uid}`);v||ae(G,"can not inject sub menu");const m=x({}),y=x({});let g;const E=x(!1),se=x(),U=x(null),B=p(()=>l.value==="horizontal"&&$.value?"bottom-start":"right-start"),L=p(()=>l.value==="horizontal"&&$.value||l.value==="vertical"&&!s.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?k.value?e.expandOpenIcon:e.expandCloseIcon:ot:e.collapseCloseIcon&&e.collapseOpenIcon?k.value?e.collapseOpenIcon:e.collapseCloseIcon:nt),$=p(()=>v.level===0),j=p(()=>{var u;const i=(u=e.teleported)!=null?u:e.popperAppendToBody;return i===void 0?$.value:i}),ue=p(()=>s.props.collapse?`${d.namespace.value}-zoom-in-left`:`${d.namespace.value}-zoom-in-top`),re=p(()=>l.value==="horizontal"&&$.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","left-start","bottom-start","bottom-end","top-start","top-end"]),k=p(()=>s.openedMenus.includes(e.index)),O=p(()=>{let u=!1;return Object.values(m.value).forEach(i=>{i.active&&(u=!0)}),Object.values(y.value).forEach(i=>{i.active&&(u=!0)}),u}),q=p(()=>s.props.backgroundColor||""),R=p(()=>s.props.activeTextColor||""),A=p(()=>s.props.textColor||""),l=p(()=>s.props.mode),o=ve({index:e.index,indexPath:c,active:O}),n=p(()=>l.value!=="horizontal"?{color:A.value}:{borderBottomColor:O.value?s.props.activeTextColor?R.value:"":"transparent",color:O.value?R.value:A.value}),w=()=>{var u,i,h;return(h=(i=(u=U.value)==null?void 0:u.popperRef)==null?void 0:i.popperInstanceRef)==null?void 0:h.destroy()},z=u=>{u||w()},C=()=>{s.props.menuTrigger==="hover"&&s.props.mode==="horizontal"||s.props.collapse&&s.props.mode==="vertical"||e.disabled||s.handleSubMenuClick({index:e.index,indexPath:c.value,active:O.value})},I=(u,i=e.showTimeout)=>{var h;u.type!=="focus"&&(s.props.menuTrigger==="click"&&s.props.mode==="horizontal"||!s.props.collapse&&s.props.mode==="vertical"||e.disabled||(v.mouseInChild.value=!0,g==null||g(),{stop:g}=_e(()=>{s.openMenu(e.index,c.value)},i),j.value&&((h=M.value.vnode.el)==null||h.dispatchEvent(new MouseEvent("mouseenter")))))},_=(u=!1)=>{var i,h;s.props.menuTrigger==="click"&&s.props.mode==="horizontal"||!s.props.collapse&&s.props.mode==="vertical"||(g==null||g(),v.mouseInChild.value=!1,{stop:g}=_e(()=>!E.value&&s.closeMenu(e.index,c.value),e.hideTimeout),j.value&&u&&((i=t.parent)==null?void 0:i.type.name)==="ElSubMenu"&&((h=v.handleMouseleave)==null||h.call(v,!0)))};Q(()=>s.props.collapse,u=>z(!!u));{const u=h=>{y.value[h.index]=h},i=h=>{delete y.value[h.index]};me(`subMenu:${t.uid}`,{addSubMenu:u,removeSubMenu:i,handleMouseleave:_,mouseInChild:E,level:v.level+1})}return r({opened:k}),he(()=>{s.addSubMenu(o),v.addSubMenu(o)}),we(()=>{v.removeSubMenu(o),s.removeSubMenu(o)}),()=>{var u;const i=[(u=a.title)==null?void 0:u.call(a),b(Ee,{class:f.e("icon-arrow"),style:{transform:k.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&s.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>W(L.value)?b(t.appContext.components[L.value]):b(L.value)})],h=ke(s.props,v.level+1),et=s.isMenuPopup?b(Pe,{ref:U,visible:k.value,effect:"light",pure:!0,offset:e.popperOffset,showArrow:!1,persistent:!0,popperClass:e.popperClass,placement:B.value,teleported:j.value,fallbackPlacements:re.value,transition:ue.value,gpuAcceleration:!1},{content:()=>{var F;return b("div",{class:[d.m(l.value),d.m("popup-container"),e.popperClass],onMouseenter:ie=>I(ie,100),onMouseleave:()=>_(!0),onFocus:ie=>I(ie,100)},[b("ul",{class:[d.b(),d.m("popup"),d.m(`popup-${B.value}`)],style:h.value},[(F=a.default)==null?void 0:F.call(a)])])},default:()=>b("div",{class:f.e("title"),style:[n.value,{backgroundColor:q.value}],onClick:C},i)}):b(fe,{},[b("div",{class:f.e("title"),style:[n.value,{backgroundColor:q.value}],ref:se,onClick:C},i),b(ze,{},{default:()=>{var F;return st(b("ul",{role:"menu",class:[d.b(),d.m("inline")],style:h.value},[(F=a.default)==null?void 0:F.call(a)]),[[ut,k.value]])}})]);return b("li",{class:[f.b(),f.is("active",O.value),f.is("opened",k.value),f.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:k.value,onMouseenter:I,onMouseleave:()=>_(!0),onFocus:I},[et])}}});const Ve=ce({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:ye(Array),default:()=>pt([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperEffect:{type:String,values:["dark","light"],default:"dark"}}),oe=e=>Array.isArray(e)&&e.every(a=>W(a));var De=N({name:"ElMenu",props:Ve,emits:{close:(e,a)=>W(e)&&oe(a),open:(e,a)=>W(e)&&oe(a),select:(e,a,r,t)=>W(e)&&oe(a)&&ct(r)&&(t===void 0||t instanceof Promise)},setup(e,{emit:a,slots:r,expose:t}){const c=be(),M=c.appContext.config.globalProperties.$router,d=x(),f=S("menu"),s=S("sub-menu"),v=x(-1),m=x(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),y=x(e.defaultActive),g=x({}),E=x({}),se=p(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),U=()=>{const l=y.value&&g.value[y.value];!l||e.mode==="horizontal"||e.collapse||l.indexPath.forEach(o=>{const n=E.value[o];n&&B(o,n.indexPath)})},B=(l,o)=>{m.value.includes(l)||(e.uniqueOpened&&(m.value=m.value.filter(n=>o.includes(n))),m.value.push(l),a("open",l,o))},L=l=>{const o=m.value.indexOf(l);o!==-1&&m.value.splice(o,1)},$=(l,o)=>{L(l),a("close",l,o)},j=({index:l,indexPath:o})=>{m.value.includes(l)?$(l,o):B(l,o)},ue=l=>{(e.mode==="horizontal"||e.collapse)&&(m.value=[]);const{index:o,indexPath:n}=l;if(!(o===void 0||n===void 0))if(e.router&&M){const w=l.route||o,z=M.push(w).then(C=>(C||(y.value=o),C));a("select",o,n,{index:o,indexPath:n,route:w},z)}else y.value=o,a("select",o,n,{index:o,indexPath:n})},re=l=>{const o=g.value,n=o[l]||y.value&&o[y.value]||o[e.defaultActive];n?y.value=n.index:y.value=l},k=()=>{var l,o;if(!d.value)return-1;const n=Array.from((o=(l=d.value)==null?void 0:l.childNodes)!=null?o:[]).filter(i=>i.nodeName!=="#text"||i.nodeValue),w=64,z=Number.parseInt(getComputedStyle(d.value).paddingLeft,10),C=Number.parseInt(getComputedStyle(d.value).paddingRight,10),I=d.value.clientWidth-z-C;let _=0,u=0;return n.forEach((i,h)=>{_+=i.offsetWidth||0,_<=I-w&&(u=h+1)}),u===n.length?-1:u},O=(l,o=33.34)=>{let n;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{l()},o)}};let q=!0;const R=()=>{const l=()=>{v.value=-1,vt(()=>{v.value=k()})};q?l():O(l)(),q=!1};Q(()=>e.defaultActive,l=>{g.value[l]||(y.value=""),re(l)}),Q(()=>e.collapse,l=>{l&&(m.value=[])}),Q(g.value,U);let A;rt(()=>{e.mode==="horizontal"&&e.ellipsis?A=it(d,R).stop:A==null||A()});{const l=n=>{E.value[n.index]=n},o=n=>{delete E.value[n.index]};me("rootMenu",ve({props:e,openedMenus:m,items:g,subMenus:E,activeIndex:y,isMenuPopup:se,addMenuItem:n=>{g.value[n.index]=n},removeMenuItem:n=>{delete g.value[n.index]},addSubMenu:l,removeSubMenu:o,openMenu:B,closeMenu:$,handleMenuItemClick:ue,handleSubMenuClick:j})),me(`subMenu:${c.uid}`,{addSubMenu:l,removeSubMenu:o,mouseInChild:x(!1),level:0})}return he(()=>{e.mode==="horizontal"&&new Le(c.vnode.el,f.namespace.value)}),t({open:l=>{const{indexPath:o}=E.value[l];o.forEach(n=>B(n,o))},close:L,handleResize:R}),()=>{var l,o;let n=(o=(l=r.default)==null?void 0:l.call(r))!=null?o:[];const w=[];if(e.mode==="horizontal"&&d.value){const I=It(n),_=v.value===-1?I:I.slice(0,v.value),u=v.value===-1?[]:I.slice(v.value);u!=null&&u.length&&e.ellipsis&&(n=_,w.push(b(le,{index:"sub-menu-more",class:s.e("hide-arrow")},{title:()=>b(Ee,{class:s.e("icon-more")},{default:()=>b(dt)}),default:()=>u})))}const z=ke(e,0),C=b("ul",{key:String(e.collapse),role:"menubar",ref:d,style:z.value,class:{[f.b()]:!0,[f.m(e.mode)]:!0,[f.m("collapse")]:e.collapse}},[...n,...w]);return e.collapseTransition&&e.mode==="vertical"?b(qe,()=>C):C}}});const Ge=ce({index:{type:ye([String,null]),default:null},route:{type:ye([String,Object])},disabled:Boolean}),Ue={click:e=>W(e.index)&&Array.isArray(e.indexPath)},ne="ElMenuItem",Ke=N({name:ne,components:{ElTooltip:Pe},props:Ge,emits:Ue,setup(e,{emit:a}){const r=be(),t=J("rootMenu"),c=S("menu"),M=S("menu-item");t||ae(ne,"can not inject root menu");const{parentMenu:d,indexPath:f}=Me(r,mt(e,"index")),s=J(`subMenu:${d.value.uid}`);s||ae(ne,"can not inject sub menu");const v=p(()=>e.index===t.activeIndex),m=ve({index:e.index,indexPath:f,active:v}),y=()=>{e.disabled||(t.handleMenuItemClick({index:e.index,indexPath:f.value,route:e.route}),a("click",m))};return he(()=>{s.addSubMenu(m),t.addMenuItem(m)}),we(()=>{s.removeSubMenu(m),t.removeMenuItem(m)}),{parentMenu:d,rootMenu:t,active:v,nsMenu:c,nsMenuItem:M,handleClick:y}}});function Ye(e,a,r,t,c,M){const d=ht("el-tooltip");return H(),ee("li",{class:te([e.nsMenuItem.b(),e.nsMenuItem.is("active",e.active),e.nsMenuItem.is("disabled",e.disabled)]),role:"menuitem",tabindex:"-1",onClick:a[0]||(a[0]=(...f)=>e.handleClick&&e.handleClick(...f))},[e.parentMenu.type.name==="ElMenu"&&e.rootMenu.props.collapse&&e.$slots.title?(H(),de(d,{key:0,effect:e.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:K(()=>[P(e.$slots,"title")]),default:K(()=>[ge("div",{class:te(e.nsMenu.be("tooltip","trigger"))},[P(e.$slots,"default")],2)]),_:3},8,["effect"])):(H(),ee(fe,{key:1},[P(e.$slots,"default"),P(e.$slots,"title")],64))],2)}var Ce=Y(Ke,[["render",Ye],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue"]]);const Ze={title:String},Je="ElMenuItemGroup",Qe=N({name:Je,props:Ze,setup(){return{ns:S("menu-item-group")}}});function Xe(e,a,r,t,c,M){return H(),ee("li",{class:te(e.ns.b())},[ge("div",{class:te(e.ns.e("title"))},[e.$slots.title?P(e.$slots,"title",{key:1}):(H(),ee(fe,{key:0},[ft(bt(e.title),1)],64))],2),ge("ul",null,[P(e.$slots,"default")])],2)}var Ie=Y(Qe,[["render",Xe],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item-group.vue"]]);$e=yt(De,{MenuItem:Ce,MenuItemGroup:Ie,SubMenu:le}),Be=xe(Ce),xe(Ie),xe(le)});export{Be as E,Tt as __tla,$e as a};
