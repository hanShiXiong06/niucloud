import{a4 as e,a5 as t,a6 as a,aa as l,aE as s,av as i,ab as n,o,c as u,w as r,aw as c,D as d,j as m,m as p,k as h,l as f,A as g,e as b,i as y,I as _,aF as v,aG as x,B as k,C as S,aH as w,J as C,d as B,r as V,q as j,O as I,y as T,Y as P,a9 as $,Z as z,aA as N,E as F,aI as E,aJ as D,aK as M,an as H,p as A}from"./index-5dd3a833.js";import{_ as L}from"./u-icon.2d8c39b5.js";import{_ as U}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as K}from"./u-input.c864510e.js";import{_ as J,a as W}from"./u-form.8a5e7be8.js";import{_ as O}from"./u-checkbox.8fdcff45.js";import{_ as q}from"./u-checkbox-group.f4041679.js";import{_ as R}from"./u-button.de545b29.js";import{_ as G}from"./u-text.ee9bb21e.js";import{_ as X}from"./u-switch.645053b4.js";import{_ as Y}from"./uni-popup.15132c6d.js";import{_ as Z}from"./tabbar.1857a260.js";import{a as Q}from"./recycle.cd28f6bd.js";import{u as ee,c as te}from"./order.2cdbbcae.js";import{g as ae}from"./payment.f4d35c81.js";import"./u-line.5e2da613.js";import"./u-loading-icon.63963092.js";import"./u-safe-bottom.94dec507.js";const le=U({name:"u-col",mixins:[t,a,{props:{span:{type:[String,Number],default:()=>e.col.span},offset:{type:[String,Number],default:()=>e.col.offset},justify:{type:String,default:()=>e.col.justify},align:{type:String,default:()=>e.col.align},textAlign:{type:String,default:()=>e.col.textAlign}}}],data:()=>({width:0,parentData:{gutter:0},gridNum:12}),options:{virtualHost:!0},computed:{uJustify(){return"end"==this.justify||"start"==this.justify?"flex-"+this.justify:"around"==this.justify||"between"==this.justify?"space-"+this.justify:this.justify},uAlignItem(){return"top"==this.align?"flex-start":"bottom"==this.align?"flex-end":this.align},colStyle(){const e={paddingLeft:l(s(this.parentData.gutter)/2),paddingRight:l(s(this.parentData.gutter)/2),alignItems:this.uAlignItem,justifyContent:this.uJustify,textAlign:this.textAlign,flex:`0 0 ${100/this.gridNum*this.span}%`,marginLeft:100/12*this.offset+"%"};return i(e,n(this.customStyle))}},mounted(){this.init()},emits:["click"],methods:{async init(){this.updateParentData(),this.width=await this.parent.getComponentWidth()},updateParentData(){this.getParentData("u-row")},clickHandler(e){this.$emit("click")}}},[["render",function(e,t,a,l,s,i){const n=p;return o(),u(n,{class:d(["u-col",["u-col-"+e.span]]),ref:"u-col",style:m([i.colStyle]),onClick:i.clickHandler},{default:r(()=>[c(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style","onClick"])}],["__scopeId","data-v-18068545"]]);const se=U({name:"u-number-box",mixins:[t,a,{props:{name:{type:[String,Number],default:()=>e.numberBox.name},modelValue:{type:[String,Number],default:()=>e.numberBox.value},min:{type:[String,Number],default:()=>e.numberBox.min},max:{type:[String,Number],default:()=>e.numberBox.max},step:{type:[String,Number],default:()=>e.numberBox.step},integer:{type:Boolean,default:()=>e.numberBox.integer},disabled:{type:Boolean,default:()=>e.numberBox.disabled},disabledInput:{type:Boolean,default:()=>e.numberBox.disabledInput},asyncChange:{type:Boolean,default:()=>e.numberBox.asyncChange},inputWidth:{type:[String,Number],default:()=>e.numberBox.inputWidth},showMinus:{type:Boolean,default:()=>e.numberBox.showMinus},showPlus:{type:Boolean,default:()=>e.numberBox.showPlus},decimalLength:{type:[String,Number,null],default:()=>e.numberBox.decimalLength},longPress:{type:Boolean,default:()=>e.numberBox.longPress},color:{type:String,default:()=>e.numberBox.color},buttonSize:{type:[String,Number],default:()=>e.numberBox.buttonSize},bgColor:{type:String,default:()=>e.numberBox.bgColor},cursorSpacing:{type:[String,Number],default:()=>e.numberBox.cursorSpacing},disablePlus:{type:Boolean,default:()=>e.numberBox.disablePlus},disableMinus:{type:Boolean,default:()=>e.numberBox.disableMinus},iconStyle:{type:[Object,String],default:()=>e.numberBox.iconStyle}}}],data:()=>({currentValue:"",longPressTimer:null}),watch:{watchChange(e){this.check()},modelValue:{handler:function(e,t){e!==this.currentValue&&(this.currentValue=this.format(this.modelValue))},immediate:!0}},computed:{getCursorSpacing(){return s(this.cursorSpacing)},buttonStyle(){return e=>{const t={backgroundColor:this.bgColor,height:l(this.buttonSize),color:this.color};return this.isDisabled(e)&&(t.backgroundColor="#f7f8fa"),t}},inputStyle(){this.disabled||this.disabledInput;return{color:this.color,backgroundColor:this.bgColor,height:l(this.buttonSize),width:l(this.inputWidth)}},watchChange(){return[this.integer,this.decimalLength,this.min,this.max]},isDisabled(){return e=>"plus"===e?this.disabled||this.disablePlus||this.currentValue>=this.max:this.disabled||this.disableMinus||this.currentValue<=this.min}},mounted(){this.init()},emits:["update:modelValue","focus","blur","overlimit","change","plus","minus"],methods:{init(){this.currentValue=this.format(this.modelValue)},format(e){return e=""===(e=this.filter(e))?0:+e,e=Math.max(Math.min(this.max,e),this.min),null!==this.decimalLength&&(e=e.toFixed(this.decimalLength)),e},filter(e){return e=String(e).replace(/[^0-9.-]/g,""),this.integer&&-1!==e.indexOf(".")&&(e=e.split(".")[0]),e},check(){const e=this.format(this.currentValue);e!==this.currentValue&&(this.currentValue=e)},onFocus(e){this.$emit("focus",{...e.detail,name:this.name})},onBlur(e){this.format(e.detail.value),this.$emit("blur",{...e.detail,name:this.name})},onInput(e){const{value:t=""}=e.detail||{};if(""===t)return;let a=this.filter(t);if(null!==this.decimalLength&&-1!==a.indexOf(".")){const e=a.split(".");a=`${e[0]}.${e[1].slice(0,this.decimalLength)}`}a=this.format(a),this.emitChange(a)},emitChange(e){this.asyncChange||this.$nextTick(()=>{this.$emit("update:modelValue",e),this.currentValue=e,this.$forceUpdate()}),this.$emit("change",{value:e,name:this.name})},onChange(){const{type:e}=this;if(this.isDisabled(e))return this.$emit("overlimit",e);const t="minus"===e?-this.step:+this.step,a=this.format(this.add(+this.currentValue,t));this.emitChange(a),this.$emit(e)},add(e,t){const a=Math.pow(10,10);return Math.round((e+t)*a)/a},clickHandler(e){this.type=e,this.onChange()},longPressStep(){this.clearTimeout(),this.longPressTimer=setTimeout(()=>{this.onChange(),this.longPressStep()},250)},onTouchStart(e){this.longPress&&(this.clearTimeout(),this.type=e,this.longPressTimer=setTimeout(()=>{this.onChange(),this.longPressStep()},600))},onTouchEnd(){this.longPress&&this.clearTimeout()},clearTimeout(){clearTimeout(this.longPressTimer),this.longPressTimer=null}}},[["render",function(e,t,a,l,s,i){const n=p,v=h(f("u-icon"),L),x=_;return o(),u(n,{class:"u-number-box"},{default:r(()=>[e.showMinus&&e.$slots.minus?(o(),u(n,{key:0,class:"u-number-box__slot cursor-pointer",onClick:t[0]||(t[0]=g(e=>i.clickHandler("minus"),["stop"])),onTouchstart:t[1]||(t[1]=e=>i.onTouchStart("minus")),onTouchend:g(i.clearTimeout,["stop"])},{default:r(()=>[c(e.$slots,"minus",{},void 0,!0)]),_:3},8,["onTouchend"])):e.showMinus?(o(),u(n,{key:1,class:d(["u-number-box__minus cursor-pointer",{"u-number-box__minus--disabled":i.isDisabled("minus")}]),onClick:t[2]||(t[2]=g(e=>i.clickHandler("minus"),["stop"])),onTouchstart:t[3]||(t[3]=e=>i.onTouchStart("minus")),onTouchend:g(i.clearTimeout,["stop"]),"hover-class":"u-number-box__minus--hover","hover-stay-time":"150",style:m([i.buttonStyle("minus")])},{default:r(()=>[b(v,{name:"minus",color:i.isDisabled("minus")?"#c8c9cc":"#323233",size:"15",bold:"",customStyle:e.iconStyle},null,8,["color","customStyle"])]),_:1},8,["onTouchend","class","style"])):y("v-if",!0),c(e.$slots,"input",{},()=>[b(x,{disabled:e.disabledInput||e.disabled,"cursor-spacing":i.getCursorSpacing,class:d([{"u-number-box__input--disabled":e.disabled||e.disabledInput},"u-number-box__input"]),modelValue:s.currentValue,"onUpdate:modelValue":t[4]||(t[4]=e=>s.currentValue=e),onBlur:i.onBlur,onFocus:i.onFocus,onInput:i.onInput,type:"number",style:m([i.inputStyle])},null,8,["disabled","cursor-spacing","class","modelValue","onBlur","onFocus","onInput","style"])],!0),e.showPlus&&e.$slots.plus?(o(),u(n,{key:2,class:"u-number-box__slot cursor-pointer",onClick:t[5]||(t[5]=g(e=>i.clickHandler("plus"),["stop"])),onTouchstart:t[6]||(t[6]=e=>i.onTouchStart("plus")),onTouchend:g(i.clearTimeout,["stop"])},{default:r(()=>[c(e.$slots,"plus",{},void 0,!0)]),_:3},8,["onTouchend"])):e.showPlus?(o(),u(n,{key:3,class:d(["u-number-box__plus cursor-pointer",{"u-number-box__minus--disabled":i.isDisabled("plus")}]),onClick:t[7]||(t[7]=g(e=>i.clickHandler("plus"),["stop"])),onTouchstart:t[8]||(t[8]=e=>i.onTouchStart("plus")),onTouchend:g(i.clearTimeout,["stop"]),"hover-class":"u-number-box__plus--hover","hover-stay-time":"150",style:m([i.buttonStyle("plus")])},{default:r(()=>[b(v,{name:"plus",color:i.isDisabled("plus")?"#c8c9cc":"#323233",size:"15",bold:"",customStyle:e.iconStyle},null,8,["color","customStyle"])]),_:1},8,["onTouchend","class","style"])):y("v-if",!0)]),_:3})}],["__scopeId","data-v-254f2e11"]]);const ie=U({name:"u-row",mixins:[t,a,{props:{gutter:{type:[String,Number],default:()=>e.row.gutter},justify:{type:String,default:()=>e.row.justify},align:{type:String,default:()=>e.row.align}}}],data:()=>({}),computed:{uJustify(){return"end"==this.justify||"start"==this.justify?"flex-"+this.justify:"around"==this.justify||"between"==this.justify?"space-"+this.justify:this.justify},uAlignItem(){return"top"==this.align?"flex-start":"bottom"==this.align?"flex-end":this.align},rowStyle(){const e={alignItems:this.uAlignItem,justifyContent:this.uJustify};return this.gutter&&(e.marginLeft=l(-Number(this.gutter)/2),e.marginRight=l(-Number(this.gutter)/2)),i(e,n(this.customStyle))}},emits:["click"],methods:{clickHandler(e){this.$emit("click")},async getComponentWidth(){return await v(),new Promise(e=>{this.$uGetRect(".u-row").then(t=>{e(t.width)})})}}},[["render",function(e,t,a,l,s,i){const n=p;return o(),u(n,{class:"u-row",ref:"u-row",style:m([i.rowStyle]),onClick:i.clickHandler},{default:r(()=>[c(e.$slots,"default",{},void 0,!0)]),_:3},8,["style","onClick"])}],["__scopeId","data-v-60eba671"]]);const ne=U({name:"u-textarea",mixins:[t,a,{props:{value:{type:[String,Number],default:()=>e.textarea.value},modelValue:{type:[String,Number],default:()=>e.textarea.value},placeholder:{type:[String,Number],default:()=>e.textarea.placeholder},placeholderClass:{type:String,default:()=>e.input.placeholderClass},placeholderStyle:{type:[String,Object],default:()=>e.input.placeholderStyle},height:{type:[String,Number],default:()=>e.textarea.height},confirmType:{type:String,default:()=>e.textarea.confirmType},disabled:{type:Boolean,default:()=>e.textarea.disabled},count:{type:Boolean,default:()=>e.textarea.count},focus:{type:Boolean,default:()=>e.textarea.focus},autoHeight:{type:Boolean,default:()=>e.textarea.autoHeight},fixed:{type:Boolean,default:()=>e.textarea.fixed},cursorSpacing:{type:Number,default:()=>e.textarea.cursorSpacing},cursor:{type:[String,Number],default:()=>e.textarea.cursor},showConfirmBar:{type:Boolean,default:()=>e.textarea.showConfirmBar},selectionStart:{type:Number,default:()=>e.textarea.selectionStart},selectionEnd:{type:Number,default:()=>e.textarea.selectionEnd},adjustPosition:{type:Boolean,default:()=>e.textarea.adjustPosition},disableDefaultPadding:{type:Boolean,default:()=>e.textarea.disableDefaultPadding},holdKeyboard:{type:Boolean,default:()=>e.textarea.holdKeyboard},maxlength:{type:[String,Number],default:()=>e.textarea.maxlength},border:{type:String,default:()=>e.textarea.border},formatter:{type:[Function,null],default:()=>e.textarea.formatter},ignoreCompositionEvent:{type:Boolean,default:!0}}}],data:()=>({innerValue:"",focused:!1,firstChange:!0,changeFromInner:!1,innerFormatter:e=>e}),created(){},watch:{modelValue:{immediate:!0,handler(e,t){this.innerValue=e,!1===this.firstChange&&!1===this.changeFromInner&&this.valueChange(),this.firstChange=!1,this.changeFromInner=!1}}},computed:{textareaClass(){let e=[],{border:t,disabled:a}=this;return"surround"===t&&(e=e.concat(["u-border","u-textarea--radius"])),"bottom"===t&&(e=e.concat(["u-border-bottom","u-textarea--no-radius"])),a&&e.push("u-textarea--disabled"),e.join(" ")},textareaStyle(){return i({},n(this.customStyle))}},emits:["update:modelValue","linechange","focus","blur","change","confirm","keyboardheightchange"],methods:{addStyle:n,addUnit:l,setFormatter(e){this.innerFormatter=e},onFocus(e){this.$emit("focus",e)},onBlur(e){this.$emit("blur",e),x(this,"blur")},onLinechange(e){this.$emit("linechange",e)},onInput(e){let{value:t=""}=e.detail||{};const a=(this.formatter||this.innerFormatter)(t);this.innerValue=t,this.$nextTick(()=>{this.innerValue=a,this.valueChange()})},valueChange(){const e=this.innerValue;this.$nextTick(()=>{this.$emit("update:modelValue",e),this.changeFromInner=!0,this.$emit("change",e),x(this,"change")})},onConfirm(e){this.$emit("confirm",e)},onKeyboardheightchange(e){this.$emit("keyboardheightchange",e)}}},[["render",function(e,t,a,l,s,i){const n=w,c=C,h=p;return o(),u(h,{class:d(["u-textarea",i.textareaClass]),style:m([i.textareaStyle])},{default:r(()=>[b(n,{class:"u-textarea__field",value:s.innerValue,style:m({height:i.addUnit(e.height)}),placeholder:e.placeholder,"placeholder-style":i.addStyle(e.placeholderStyle,"string"),"placeholder-class":e.placeholderClass,disabled:e.disabled,focus:e.focus,autoHeight:e.autoHeight,fixed:e.fixed,cursorSpacing:e.cursorSpacing,cursor:e.cursor,showConfirmBar:e.showConfirmBar,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,adjustPosition:e.adjustPosition,disableDefaultPadding:e.disableDefaultPadding,holdKeyboard:e.holdKeyboard,maxlength:e.maxlength,"confirm-type":e.confirmType,ignoreCompositionEvent:e.ignoreCompositionEvent,onFocus:i.onFocus,onBlur:i.onBlur,onLinechange:i.onLinechange,onInput:i.onInput,onConfirm:i.onConfirm,onKeyboardheightchange:i.onKeyboardheightchange},null,8,["value","style","placeholder","placeholder-style","placeholder-class","disabled","focus","autoHeight","fixed","cursorSpacing","cursor","showConfirmBar","selectionStart","selectionEnd","adjustPosition","disableDefaultPadding","holdKeyboard","maxlength","confirm-type","ignoreCompositionEvent","onFocus","onBlur","onLinechange","onInput","onConfirm","onKeyboardheightchange"]),e.count?(o(),u(c,{key:0,class:"u-textarea__count",style:m({"background-color":e.disabled?"transparent":"#fff"})},{default:r(()=>[k(S(s.innerValue.length)+"/"+S(e.maxlength),1)]),_:1},8,["style"])):y("v-if",!0)]),_:1},8,["class","style"])}],["__scopeId","data-v-56565a8a"]]),oe=U(B({__name:"order",setup(e){var t,a;const l=V(0),s=V(""),i=V({count:1,express_no:"",customer_name:"测试",customer_phone:"13122220000",telphone:(null==(a=null==(t=j())?void 0:t.info)?void 0:a.mobile)||"",comment:"",delivery_type:l.value+1}),n={express_no:{required:(e,t,a)=>{"1"!==i.value.delivery_type||t?a():a(new Error("快递单号不能空"))},trigger:"blur"}},c=V(null);V(!1);const m=()=>{N({url:"/addon/recycle/pages/order/list"})},g=()=>{E({onlyFromCamera:!0,success:e=>{"scanCode:ok"===e.errMsg?i.value.express_no=e.result:F({title:e.errorMsg,icon:"none"})}})},_=V([]),v=V(null),x=V(!1),w=V([]),B=V([{imei:"",initial_price:""}]),U=()=>{B.value.push({imei:"",initial_price:""})},oe=()=>{v.value.close(),w.value=[],x.value=!1,B.value=[{imei:"",initial_price:""}]},ue=()=>{(()=>{const e=B.value.filter(e=>e.imei.trim());if(0!==e.length){for(const t of e){if(w.value.some(e=>e.imei===t.imei)){F({title:`IMEI码 ${t.imei} 已存在`,icon:"none"});continue}const e={imei:t.imei,initial_price:x.value?t.initial_price:void 0};w.value.push(e)}B.value=[{imei:"",initial_price:""}]}else F({title:"请输入IMEI码",icon:"none"})})(),0!==w.value.length?(w.value.forEach(e=>{_.value.push({imei:e.imei,initial_price:e.initial_price})}),i.value.count=_.value.length,oe()):F({title:"请添加至少一个设备",icon:"none"})},re=e=>{e<_.value.length&&(_.value=_.value.slice(0,e))},ce=async()=>{if(!pe.value)return void F({title:"请阅读并同意回收服务协议",icon:"none"});await ee().request("recycle_order_sign,recycle_order_agree,recycle_order_pay"),i.value.devices=_.value;await c.value.validate()?te(i.value).then(e=>{1===e.code?(F({title:"下单成功",icon:"success"}),c.value.resetFields(),setTimeout(()=>{m()},1500)):F({title:"下单失败,请重试!",icon:"none"})}):F({title:"请完善表单信息",icon:"none"})},de=()=>{N({url:"/app/pages/auth/agreement?key=recycle_service"})},me=()=>{fe.value.lat&&fe.value.lng?M({latitude:parseFloat(fe.value.lat),longitude:parseFloat(fe.value.lng),name:fe.value.name||"商家地址",address:fe.value.full_address||fe.value.address,success:()=>{console.log("打开导航成功")},fail:e=>{console.error("打开导航失败：",e),F({title:"打开导航失败",icon:"none"})}}):F({title:"无法获取商家位置信息",icon:"none"})},pe=V(!1),he=()=>{pe.value=!pe.value},fe=V({name:"",mobile:"",business_hours:"",lat:"",lng:"",full_address:"",address:""}),ge=()=>{const e=`${fe.value.name} , ${fe.value.mobile}, ${fe.value.full_address}`;H(e,()=>{F({title:"复制成功",icon:"success"})})};return I(async()=>{await ee().request("recycle_order_sign,recycle_order_agree,recycle_order_pay"),await(async()=>{try{(await ae()).data.length<2&&D({title:"提示",content:"您尚未输入个人信息，建议至少添加2种收款方式及完善个人信息，以便回收完成后能及时收到款项。",confirmText:"立即设置",cancelText:"稍后设置",success:function(e){e.confirm?N({url:"/addon/recycle/pages/payment/index"}):F({title:"请记得及时完善收款信息，避免影响回收款项到账",icon:"none",duration:3e3})}})}catch(e){console.error("获取收款信息失败：",e)}})()}),T(async()=>{(async()=>{try{const e=await Q();s.value=e.data.data[0].full_address,fe.value.name=e.data.data[0].contact_name,fe.value.mobile=e.data.data[0].mobile,fe.value.full_address=e.data.data[0].full_address,fe.value.address=e.data.data[0].address,fe.value.lat=e.data.data[0].lat,fe.value.lng=e.data.data[0].lng}catch(e){F({title:"无邮寄地址!请系商家",icon:"none"}),console.error("获取地址失败",e)}})()}),(e,t)=>{const a=p,s=h(f("up-icon"),L),V=C,j=h(f("up-col"),le),I=h(f("u-number-box"),se),T=h(f("up-row"),ie),N=h(f("up-textarea"),ne),D=h(f("u-input"),K),M=h(f("u-form-item"),J),H=h(f("u-checkbox"),O),Q=h(f("u-checkbox-group"),q),ee=h(f("up-button"),R),te=h(f("u-form"),W),ae=h(f("up-text"),G),be=h(f("u-switch"),X),ye=h(f("uni-popup"),Y),_e=h(f("tabbar"),Z),ve=A("layout-default-uni");return o(),u(ve,null,{default:r(()=>[b(a,{class:"page"},{default:r(()=>[y(" 顶部导航栏 "),b(a,{class:"nav-header"},{default:r(()=>[b(a,{class:"tabs"},{default:r(()=>[(o(),P(z,null,$(["邮寄到店","自送到店"],(e,t)=>b(a,{key:t,class:d(["tab-item",l.value===t?"active":""]),onClick:e=>(e=>{l.value=e,i.value.delivery_type=0===e?1:2,1===e&&(i.value.express_no="")})(t)},{default:r(()=>[k(S(e),1)]),_:2},1032,["class","onClick"])),64))]),_:1}),b(a,{class:"order-link",onClick:m},{default:r(()=>[b(s,{color:"#fff",name:"list",size:"18"}),b(V,null,{default:r(()=>[k("我的订单")]),_:1})]),_:1})]),_:1}),b(te,{model:i.value,rules:n,ref_key:"formRef",ref:c,"label-position":"left"},{default:r(()=>[y(" 出货信息 "),b(a,{class:"box"},{default:r(()=>[b(a,{class:"title"},{default:r(()=>[b(s,{name:"info-circle",size:"16",color:"#3b82f6"}),b(V,null,{default:r(()=>[k("出货信息")]),_:1}),y(' <view class="scan-btn" @click="scanIMEI">\n                        <up-icon name="scan" size="14" color="#3b82f6"></up-icon>\n                        <text>添加设备</text>\n                    </view> ')]),_:1}),y(" 手机列表 "),_.value.length>0?(o(),u(a,{key:0,class:"phone-list"},{default:r(()=>[(o(!0),P(z,null,$(_.value,(e,t)=>(o(),u(a,{class:"phone-item",key:t},{default:r(()=>[b(a,{class:"phone-info"},{default:r(()=>[b(V,{class:"imei"},{default:r(()=>[b(V,{class:"index"},{default:r(()=>[k(S(t+1),1)]),_:2},1024),k(" IMEI: "+S(e.imei),1)]),_:2},1024),e.initial_price?(o(),u(V,{key:0,class:"model"},{default:r(()=>[k("定价: "+S(e.initial_price),1)]),_:2},1024)):y("v-if",!0)]),_:2},1024),b(a,{class:"delete-btn",onClick:e=>(e=>{_.value.splice(e,1),i.value.count=_.value.length})(t)},{default:r(()=>[b(s,{name:"trash",size:"14",color:"#ef4444"})]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):y("v-if",!0),y(' <up-collapse v-model="activeHelp" class="help-collapse"> '),y(' <up-collapse-item title="查看IMEI码说明" name="imei-help"> '),y(" </up-collapse-item> "),y(" </up-collapse> "),b(T,{customStyle:"margin-bottom: 8px"},{default:r(()=>[b(j,{span:"3"},{default:r(()=>[b(a,{class:"label"},{default:r(()=>[k("数量")]),_:1})]),_:1}),b(j,{span:"9"},{default:r(()=>[b(I,{modelValue:i.value.count,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value.count=e),min:1,max:99,onChange:re},null,8,["modelValue"])]),_:1})]),_:1}),b(T,null,{default:r(()=>[b(j,{span:"3"},{default:r(()=>[b(a,{class:"label"},{default:r(()=>[k("备注")]),_:1})]),_:1}),b(j,{span:"9"},{default:r(()=>[b(a,{class:"input-wrapper"},{default:r(()=>[b(N,{autoHeight:"",modelValue:i.value.comment,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value.comment=e),placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),y(" 寄件信息 "),0===l.value?(o(),u(a,{key:0,class:"box mt-2"},{default:r(()=>[b(a,{class:"title"},{default:r(()=>[b(s,{name:"car",size:"16",color:"#3b82f6"}),b(V,null,{default:r(()=>[k(S(0===l.value?"寄件信息":"自送信息"),1)]),_:1}),0==l.value?(o(),u(V,{key:0,class:"title-action text-[#ef4444]"})):y("v-if",!0),y(' <view v-if="currentTab == 1" class="title-action" @click="toAddressPage">\n                        <up-icon name="plus" size="14"></up-icon>\n                        <text>添加地址</text>\n                    </view> ')]),_:1}),y(" 快递单号 - 仅在邮寄模式显示 "),0===l.value?(o(),u(T,{key:0,customStyle:"margin-bottom: 8px"},{default:r(()=>[b(j,{span:"3"},{default:r(()=>[b(a,{class:"label"},{default:r(()=>[k("快递单号")]),_:1})]),_:1}),b(j,{span:"9"},{default:r(()=>[b(a,{class:"input-wrapper"},{default:r(()=>[b(M,{prop:"express_no"},{default:r(()=>[b(D,{placeholder:"输入或扫描快递单号",border:"surround",clearable:"",modelValue:i.value.express_no,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value.express_no=e)},{suffix:r(()=>[b(s,{onClick:g,name:"scan",size:"24"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})):y("v-if",!0),y(" 联系信息 "),y(' <view class="contact-info" v-if="currentTab === 1">\n                    <view class="section-header">\n                        <text>联系信息</text>\n                        <view class="switch-wrapper">\n                            <u-switch size="18" v-model="useDefaultAddress"\n                                @change="handleDefaultAddressChange"></u-switch>\n                            <text class="switch-label">使用默认地址</text>\n                        </view>\n                    </view>\n\n                    <up-row customStyle="margin-bottom: 8px">\n                        <up-col span="3">\n                            <view class="label">联系人</view>\n                        </up-col>\n                        <up-col span="9">\n                            <view class="input-wrapper">\n                                <u-form-item prop="name">\n                                    <u-input v-model="form.customer_name" placeholder="请输入联系人姓名" clearable />\n                                </u-form-item>\n                            </view>\n                        </up-col>\n                    </up-row>\n\n                    <up-row>\n                        <up-col span="3">\n                            <view class="label">联系电话</view>\n                        </up-col>\n                        <up-col span="9">\n                            <view class="input-wrapper">\n                                <u-form-item prop="telphone">\n                                    <u-input v-model="form.telphone" placeholder="请输入联系电话" clearable />\n                                </u-form-item>\n                            </view>\n                        </up-col>\n                    </up-row>\n                </view> ')]),_:1})):y("v-if",!0),y(" 商家信息 "),b(a,{class:"box mt-2"},{default:r(()=>[b(a,{class:"title"},{default:r(()=>[b(s,{name:"bag",size:"16",color:"#3b82f6"}),b(V,null,{default:r(()=>[k("商家信息")]),_:1}),b(a,{class:"copy-btn",onClick:ge},{default:r(()=>[b(s,{size:"16",name:"cut"})]),_:1})]),_:1}),fe.value?(o(),u(a,{key:0,class:"shop-info"},{default:r(()=>[b(a,{class:"info-row"},{default:r(()=>[b(V,{class:"label"},{default:r(()=>[k("商家名称：")]),_:1}),b(V,{class:"value"},{default:r(()=>[k(S(fe.value.name),1)]),_:1})]),_:1}),b(a,{class:"info-row"},{default:r(()=>[b(V,{class:"label"},{default:r(()=>[k("联系电话：")]),_:1}),fe.value.mobile?(o(),u(V,{key:0,class:"value"},{default:r(()=>[k(S(fe.value.mobile),1)]),_:1})):y("v-if",!0)]),_:1}),b(a,{class:"info-row"},{default:r(()=>[b(V,{class:"label"},{default:r(()=>[k("商家地址：")]),_:1}),b(V,{class:"value"},{default:r(()=>[k(S(fe.value.full_address||fe.value.address),1)]),_:1}),b(s,{onClick:me,name:"map",size:"16"})]),_:1})]),_:1})):y("v-if",!0)]),_:1}),y(" 回收协议 "),b(a,{class:"box rounded mt-2"},{default:r(()=>[b(a,{class:"agreement-section"},{default:r(()=>[b(a,{class:"agreement-checkbox flex"},{default:r(()=>[b(Q,null,{default:r(()=>[b(H,{activeColor:"var(--primary-color)",checked:pe.value,shape:"shape",size:"14",onChange:he},null,8,["checked"])]),_:1}),b(a,{class:"agreement-text flex"},{default:r(()=>[k(" 我已阅读并同意 "),b(a,{onClick:de},{default:r(()=>[b(V,{class:"text-primary"},{default:r(()=>[k("《回收服务协议》")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),y(" 提交按钮 "),b(a,{class:"submit-section"},{default:r(()=>[b(ee,{type:"primary",onClick:ce,text:"确认发货"})]),_:1})]),_:1},8,["model"])]),_:1}),y(" IMEI输入弹窗 "),b(ye,{ref_key:"popup",ref:v,type:"center","background-color":"#fff","mask-click":!0},{default:r(()=>[b(a,{class:"imei-modal"},{default:r(()=>[b(a,{class:"modal-header"},{default:r(()=>[b(V,{class:"modal-title"},{default:r(()=>[k("添加设备")]),_:1}),b(a,{class:"close-btn",onClick:oe},{default:r(()=>[b(s,{name:"close",size:"16",color:"#64748b"})]),_:1})]),_:1}),b(a,{class:"modal-body"},{default:r(()=>[b(a,{class:"form-group"},{default:r(()=>[b(a,{class:"input-row"},{default:r(()=>[(o(!0),P(z,null,$(B.value,(e,t)=>(o(),u(a,{key:t,class:"input-group"},{default:r(()=>[b(a,{class:"input-wrapper flex-1"},{default:r(()=>[b(D,{modelValue:e.imei,"onUpdate:modelValue":t=>e.imei=t,size:"14",placeholder:"输入IMEI/SN码",border:"surround",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),b(a,{class:"scan-btn",onClick:()=>(e=>{E({onlyFromCamera:!0,success:t=>{B.value[e].imei=t.result},fail:()=>{F({title:"扫码失败",icon:"none"})}})})(t)},{default:r(()=>[b(s,{name:"scan",size:"16",color:"#3b82f6"})]),_:2},1032,["onClick"])]),_:2},1024),x.value?(o(),u(a,{key:0,class:"input-wrapper"},{default:r(()=>[b(D,{modelValue:e.initial_price,"onUpdate:modelValue":t=>e.initial_price=t,type:"number",size:"14",placeholder:"输入定价",border:"surround",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):y("v-if",!0),t>0?(o(),u(a,{key:1,class:"remove-btn",onClick:()=>(e=>{B.value.splice(e,1)})(t)},{default:r(()=>[b(s,{name:"trash",size:"16",color:"#ef4444"})]),_:2},1032,["onClick"])):y("v-if",!0)]),_:2},1024))),128))]),_:1}),b(a,{class:"add-input-btn",onClick:U},{default:r(()=>[b(s,{name:"plus",size:"16",color:"#3b82f6"}),b(ae,{size:"14",text:"添加输入框"})]),_:1}),b(a,{class:"tip-text"},{default:r(()=>[b(s,{name:"info-circle",size:"14",color:"#64748b"}),b(V,null,{default:r(()=>[k("如果 输入 SN 过长，可以直接只输入后 6 位")]),_:1})]),_:1}),b(a,{class:"tip-text"},{default:r(()=>[b(s,{name:"info-circle",size:"12",color:"#64748b"}),b(V,null,{default:r(()=>[k("苹果设备在拨号界面输入*#06#可快速获取 SN 条形码")]),_:1})]),_:1})]),_:1}),y(" 已添加的设备列表 "),w.value.length>0?(o(),u(a,{key:0,class:"device-list"},{default:r(()=>[b(a,{class:"list-header"},{default:r(()=>[b(V,null,{default:r(()=>[k("已添加设备")]),_:1}),b(V,{class:"count"},{default:r(()=>[k("("+S(w.value.length)+")",1)]),_:1})]),_:1}),(o(!0),P(z,null,$(w.value,(t,l)=>(o(),u(a,{class:"device-item",key:l},{default:r(()=>[b(a,{class:"device-info"},{default:r(()=>[b(V,{class:"imei"},{default:r(()=>[k("IMEI: "+S(t.imei),1)]),_:2},1024),t.initial_price?(o(),u(V,{key:0,class:"price"},{default:r(()=>[k("¥"+S(t.initial_price),1)]),_:2},1024)):y("v-if",!0)]),_:2},1024),b(a,{class:"delete-btn",onClick:t=>e.removeDevice(l)},{default:r(()=>[b(s,{name:"trash",size:"16",color:"#ef4444"})]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):y("v-if",!0)]),_:1}),b(a,{class:"modal-footer"},{default:r(()=>[b(a,{class:"left"},{default:r(()=>[b(be,{size:"18",modelValue:x.value,"onUpdate:modelValue":t[3]||(t[3]=e=>x.value=e),activeColor:"#3b82f6"},null,8,["modelValue"]),b(V,null,{default:r(()=>[k("启用定价")]),_:1})]),_:1}),b(a,{class:"right"},{default:r(()=>[b(a,{class:"btn cancel",onClick:oe},{default:r(()=>[k("取消")]),_:1}),b(a,{class:"btn confirm",onClick:ue},{default:r(()=>[k("确定")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),b(_e,{addon:"recycle"})]),_:1})}}}),[["__scopeId","data-v-29c590e7"]]);export{oe as default};
