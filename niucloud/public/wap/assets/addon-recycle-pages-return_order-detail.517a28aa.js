import{E as e,a0 as a,aL as t,o as s,c as l,w as o,p as i,e as c,i as d,B as r,Y as n,C as u,Z as f,a9 as _,J as m,m as v,K as p,k as h,l as D,D as y}from"./index-5dd3a833.js";import{_ as k}from"./u-modal.58ad5f0d.js";import{h as g,f as x}from"./return_order.52a39582.js";import{_ as C}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.5e2da613.js";import"./u-loading-icon.63963092.js";import"./u-popup.b109731e.js";import"./u-transition.22a584d7.js";import"./u-icon.2d8c39b5.js";import"./u-safe-bottom.94dec507.js";const b=C({components:{},data:()=>({orderId:0,orderDetail:{},deviceList:[],loading:!0,showConfirmModal:!1}),onLoad(e){e.id?(this.orderId=e.id,this.getOrderDetail()):this.goBack()},methods:{async getOrderDetail(){this.loading=!0;try{const a=await g(this.orderId);200===a.data.code?(this.orderDetail=a.data.data,this.deviceList=a.data.data.returnDevices||[]):(e({title:a.data.message||"获取订单详情失败",icon:"none"}),setTimeout(()=>{this.goBack()},1500))}catch(a){console.error(a),e({title:"获取订单详情失败",icon:"none"}),setTimeout(()=>{this.goBack()},1500)}finally{this.loading=!1}},goBack(){a()},getStatusText:e=>({0:"待处理",1:"退货中",2:"已完成",3:"已取消"}[e]||"未知状态"),getStatusDesc:e=>({0:"商家正在处理您的退货申请",1:"商家已确认退货，请尽快寄回设备",2:"退货已完成",3:"退货已取消"}[e]||""),getDeviceStatusText:e=>({0:"待检测",1:"检测中",2:"已回收",3:"已退回",4:"已取消",6:"已退回"}[e]||"未知状态"),formatPrice:e=>e?`¥${Number(e).toFixed(2)}`:"¥0.00",copyText(a){t({data:a,success:()=>{e({title:"复制成功",icon:"success"})}})},handleConfirmReceive(){this.showConfirmModal=!0},closeConfirmPopup(){this.showConfirmModal=!1},async confirmReceive(){this.showConfirmModal=!1;try{const a=await x(this.orderId,{});200===a.data.code?(e({title:"确认收货成功",icon:"success"}),this.getOrderDetail()):e({title:a.data.message||"确认收货失败",icon:"none"})}catch(a){console.error(a),e({title:"确认收货失败",icon:"none"})}}}},[["render",function(e,a,t,g,x,C){const b=m,w=v,j=i("uni-load-more"),T=p,I=h(D("up-modal"),k),B=i("layout-default-uni");return s(),l(B,null,{default:o(()=>[c(w,{class:"return-order-detail"},{default:o(()=>[d(" 顶部导航栏 "),c(w,{class:"nav-bar"},{default:o(()=>[c(w,{class:"nav-back",onClick:C.goBack},{default:o(()=>[c(b,{class:"iconfont iconarrow-left"})]),_:1},8,["onClick"]),c(w,{class:"nav-title"},{default:o(()=>[r("退回订单详情")]),_:1})]),_:1}),d(" 加载中 "),x.loading?(s(),l(w,{key:0,class:"loading-container"},{default:o(()=>[c(j,{status:"loading","content-text":{contentdown:"加载中..."}},null,8,["content-text"])]),_:1})):(s(),n(f,{key:1},[d(" 订单内容 "),c(w,{class:"order-content"},{default:o(()=>[d(" 订单状态 "),c(w,{class:"status-card"},{default:o(()=>[c(w,{class:"status-text"},{default:o(()=>[r(u(C.getStatusText(x.orderDetail.status)),1)]),_:1}),c(w,{class:"status-desc"},{default:o(()=>[r(u(C.getStatusDesc(x.orderDetail.status)),1)]),_:1})]),_:1}),d(" 订单信息 "),c(w,{class:"info-card"},{default:o(()=>[c(w,{class:"card-title"},{default:o(()=>[r("订单信息")]),_:1}),c(w,{class:"info-item"},{default:o(()=>[c(b,{class:"label"},{default:o(()=>[r("订单编号：")]),_:1}),c(b,{class:"value"},{default:o(()=>[r(u(x.orderDetail.order_no),1)]),_:1})]),_:1}),c(w,{class:"info-item"},{default:o(()=>[c(b,{class:"label"},{default:o(()=>[r("创建时间：")]),_:1}),c(b,{class:"value"},{default:o(()=>[r(u(x.orderDetail.create_at),1)]),_:1})]),_:1}),x.orderDetail.over_at?(s(),l(w,{key:0,class:"info-item"},{default:o(()=>[c(b,{class:"label"},{default:o(()=>[r("完成时间：")]),_:1}),c(b,{class:"value"},{default:o(()=>[r(u(x.orderDetail.over_at),1)]),_:1})]),_:1})):d("v-if",!0),x.orderDetail.comment?(s(),l(w,{key:1,class:"info-item"},{default:o(()=>[c(b,{class:"label"},{default:o(()=>[r("备注信息：")]),_:1}),c(b,{class:"value"},{default:o(()=>[r(u(x.orderDetail.comment),1)]),_:1})]),_:1})):d("v-if",!0)]),_:1}),d(" 快递信息 "),x.orderDetail.express_company||x.orderDetail.express_no?(s(),l(w,{key:0,class:"info-card"},{default:o(()=>[c(w,{class:"card-title"},{default:o(()=>[r("快递信息")]),_:1}),x.orderDetail.express_company?(s(),l(w,{key:0,class:"info-item"},{default:o(()=>[c(b,{class:"label"},{default:o(()=>[r("快递公司：")]),_:1}),c(b,{class:"value"},{default:o(()=>[r(u(x.orderDetail.express_company),1)]),_:1})]),_:1})):d("v-if",!0),x.orderDetail.express_no?(s(),l(w,{key:1,class:"info-item"},{default:o(()=>[c(b,{class:"label"},{default:o(()=>[r("快递单号：")]),_:1}),c(b,{class:"value copy-text",onClick:a[0]||(a[0]=e=>C.copyText(x.orderDetail.express_no))},{default:o(()=>[r(u(x.orderDetail.express_no)+" ",1),c(b,{class:"copy-icon"},{default:o(()=>[r("复制")]),_:1})]),_:1})]),_:1})):d("v-if",!0),x.orderDetail.return_address?(s(),l(w,{key:2,class:"info-item"},{default:o(()=>[c(b,{class:"label"},{default:o(()=>[r("退回地址：")]),_:1}),c(b,{class:"value"},{default:o(()=>[r(u(x.orderDetail.return_address),1)]),_:1})]),_:1})):d("v-if",!0)]),_:1})):d("v-if",!0),d(" 设备列表 "),c(w,{class:"device-card"},{default:o(()=>[c(w,{class:"card-title"},{default:o(()=>[r("退回设备")]),_:1}),c(w,{class:"device-list"},{default:o(()=>[(s(!0),n(f,null,_(x.deviceList,(e,a)=>(s(),l(w,{class:"device-item",key:a},{default:o(()=>[c(w,{class:"device-header"},{default:o(()=>[c(b,{class:"device-title"},{default:o(()=>[r("设备 #"+u(a+1),1)]),_:2},1024),c(b,{class:y(["device-status","status-"+(e.device?e.device.status:0)])},{default:o(()=>[r(u(C.getDeviceStatusText(e.device?e.device.status:0)),1)]),_:2},1032,["class"])]),_:2},1024),e.device?(s(),l(w,{key:0,class:"device-info"},{default:o(()=>[c(w,{class:"info-row"},{default:o(()=>[c(b,{class:"info-label"},{default:o(()=>[r("IMEI：")]),_:1}),c(b,{class:"info-value"},{default:o(()=>[r(u(e.device.imei||"-"),1)]),_:2},1024)]),_:2},1024),c(w,{class:"info-row"},{default:o(()=>[c(b,{class:"info-label"},{default:o(()=>[r("型号：")]),_:1}),c(b,{class:"info-value"},{default:o(()=>[r(u(e.device.model||"-"),1)]),_:2},1024)]),_:2},1024),c(w,{class:"info-row"},{default:o(()=>[c(b,{class:"info-label"},{default:o(()=>[r("初始价格：")]),_:1}),c(b,{class:"info-value"},{default:o(()=>[r(u(C.formatPrice(e.device.initial_price)),1)]),_:2},1024)]),_:2},1024),e.device.final_price?(s(),l(w,{key:0,class:"info-row"},{default:o(()=>[c(b,{class:"info-label"},{default:o(()=>[r("最终价格：")]),_:1}),c(b,{class:"info-value"},{default:o(()=>[r(u(C.formatPrice(e.device.final_price)),1)]),_:2},1024)]),_:2},1024)):d("v-if",!0)]),_:2},1024)):(s(),l(w,{key:1,class:"device-empty"},{default:o(()=>[c(b,null,{default:o(()=>[r("设备信息不存在")]),_:1})]),_:1}))]),_:2},1024))),128))]),_:1})]),_:1}),d(" 操作按钮 "),1===x.orderDetail.status?(s(),l(w,{key:1,class:"action-bar"},{default:o(()=>[c(T,{class:"btn-confirm",onClick:C.handleConfirmReceive},{default:o(()=>[r("确认收货")]),_:1},8,["onClick"])]),_:1})):d("v-if",!0)]),_:1})],2112)),d(" 确认收货弹窗 "),c(I,{show:x.showConfirmModal,title:"确认收货",content:"确认已收到退回的设备吗？","show-cancel-button":!0,onConfirm:C.confirmReceive,onCancel:C.closeConfirmPopup},null,8,["show","onConfirm","onCancel"])]),_:1})]),_:1})}],["__scopeId","data-v-dc10e03a"]]);export{b as default};
