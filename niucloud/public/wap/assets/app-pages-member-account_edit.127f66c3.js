import{d as e,r as a,x as l,s as t,L as o,V as r,z as n,bR as c,o as d,c as p,w as u,e as s,Y as i,B as m,C as f,f as _,Z as x,i as b,j as h,cc as y,cd as g,b as k,aQ as v,cb as C,aC as A,m as V,k as w,l as T,R as j,J as P,K as R,au as N,p as W,S as z}from"./index-c3bd19d7.js";import{_ as S}from"./u-input.20a1a434.js";import{_ as M,a as U}from"./u-form.aa4ab398.js";import{_ as B}from"./u-upload.679b838d.js";import{_ as D}from"./u-modal.383b850c.js";import{_ as I}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.fed07783.js";import"./u-line.5f9fdeba.js";import"./u-loading-icon.e306857f.js";import"./u-popup.3041e24a.js";import"./u-transition.35c8ef6d.js";import"./u-safe-bottom.d8b3ca1a.js";const q=I(e({__name:"account_edit",setup(e){const I=a(!1),q=a(null),E=a("get"),F=a(!1),K=l({account_id:0,account_type:"bank",bank_name:"",realname:"",account_no:"",transfer_payment_code:""}),H=t(()=>({realname:{type:"string",required:!0,message:"bank"==K.account_type?n("bankRealnamePlaceholder"):n("alipayRealnamePlaceholder"),trigger:["blur","change"]},bank_name:{type:"string",required:"bank"==K.account_type,message:n("bankNamePlaceholder"),trigger:["blur","change"]},transfer_payment_code:{validator(e,a,l){if(a&&a.length)l();else{let e="alipay"==K.account_type?n("alipayAccountImgPlaceholder"):n("wechatCodeAccountImgPlaceholder");l(new Error(e))}}}}));o(e=>{e.type&&(K.account_type=e.type),e.mode&&(E.value=e.mode),e.id&&(K.account_id=e.id||"",K.account_id?r({title:n("editAccountTitle")}):r({title:n("addAccountTitle")}),c({account_id:e.id}).then(e=>{e.data&&Object.keys(K).forEach(a=>{null!=e.data[a]&&(K[a]=e.data[a])})}))});const J=()=>{const e=K.account_id?y:g;q.value.validate().then(()=>{I.value||(I.value=!0,e(K).then(e=>{"get"==E.value?k({url:"/app/pages/member/account",param:{type:K.account_type,mode:E.value}}):k({url:"/app/pages/member/apply_cash_out",param:{account_id:K.account_id?K.account_id:e.data.id,type:K.account_type},mode:"redirectTo"})}).catch(()=>{I.value=!1}))})},L=e=>{v({filePath:e.file.url,name:"file"}).then(e=>{e.data&&(K.transfer_payment_code="",K.transfer_payment_code=e.data.url)}).catch(()=>{})},O=e=>{K.transfer_payment_code=""},Q=()=>{C(K.account_id).then(()=>{k({url:"/app/pages/member/account",mode:"redirectTo"})})},Y=e=>{A({current:0,urls:[e]})};return(e,a)=>{const l=V,t=w(T("u-input"),S),o=w(T("u-form-item"),M),r=w(T("u-form"),U),c=j,y=P,g=w(T("u-upload"),B),k=R,v=N,C=w(T("u-modal"),D),A=W("layout-default-uni");return d(),p(A,null,{default:u(()=>[s(l,{class:"w-screen h-screen bg-[var(--page-bg-color)] overflow-hidden",style:h(e.themeColor())},{default:u(()=>[s(v,{"scroll-y":"true"},{default:u(()=>[s(l,{class:"sidebar-margin card-template top-mar account pb-[20rpx]"},{default:u(()=>["bank"==K.account_type?(d(),i(x,{key:0},[s(l,{class:"text-center text-[32rpx] font-500 mt-[10rpx] text-[#333] leading-[42rpx]"},{default:u(()=>[m(f(K.account_id?_(n)("editBankCard"):_(n)("addBankCard")),1)]),_:1}),s(l,{class:"text-center text-[24rpx] mt-[16rpx] text-[var(--text-color-light9)]"},{default:u(()=>[m(f(K.account_id?_(n)("editBankCardTips"):_(n)("addBankCardTips")),1)]),_:1}),s(l,{class:"mt-[70rpx] px-[10rpx]"},{default:u(()=>[s(r,{labelPosition:"left",model:K,errorType:"toast",rules:_(H),ref_key:"formRef",ref:q},{default:u(()=>[s(l,null,{default:u(()=>[s(o,{label:_(n)("bankRealname"),prop:"realname",labelWidth:"200rpx"},{default:u(()=>[s(t,{modelValue:K.realname,"onUpdate:modelValue":a[0]||(a[0]=e=>K.realname=e),modelModifiers:{trim:!0},fontSize:"28rpx",maxlength:"30",border:"none",clearable:"",placeholder:_(n)("bankRealnamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),s(l,{class:"mt-[16rpx]"},{default:u(()=>[s(o,{label:_(n)("bankName"),prop:"bank_name",labelWidth:"200rpx"},{default:u(()=>[s(t,{modelValue:K.bank_name,"onUpdate:modelValue":a[1]||(a[1]=e=>K.bank_name=e),modelModifiers:{trim:!0},fontSize:"28rpx",maxlength:"30",border:"none",clearable:"",placeholder:_(n)("bankNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),s(l,{class:"mt-[16rpx]"},{default:u(()=>[s(o,{label:_(n)("bankAccountNo"),prop:"account_no",labelWidth:"200rpx"},{default:u(()=>[s(t,{modelValue:K.account_no,"onUpdate:modelValue":a[2]||(a[2]=e=>K.account_no=e),modelModifiers:{trim:!0},fontSize:"28rpx",maxlength:"30",border:"none",clearable:"",placeholder:_(n)("bankAccountNoPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model","rules"])]),_:1})],64)):b("v-if",!0),"alipay"==K.account_type?(d(),i(x,{key:1},[s(l,{class:"text-center text-[32rpx] font-500 mt-[20rpx] text-[#333] leading-[42rpx]"},{default:u(()=>[m(f(K.account_id?_(n)("editAlipayAccount"):_(n)("addAlipayAccount")),1)]),_:1}),b(" <view class=\"text-center text-[28rpx] mt-[16rpx] text-[var(--text-color-light9)] leading-[36rpx]\">{{ formData.account_id ? t('editAlipayAccountTips') : t('addAlipayAccountTips') }}</view> "),s(l,{class:"mt-[70rpx] px-[10rpx]"},{default:u(()=>[s(r,{labelPosition:"left",model:K,labelWidth:"200rpx",errorType:"toast",rules:_(H),ref_key:"formRef",ref:q},{default:u(()=>[s(l,null,{default:u(()=>[s(o,{label:_(n)("alipayRealname"),prop:"realname"},{default:u(()=>[s(t,{modelValue:K.realname,"onUpdate:modelValue":a[3]||(a[3]=e=>K.realname=e),modelModifiers:{trim:!0},maxlength:"30",border:"none",fontSize:"28rpx",clearable:"",placeholder:_(n)("alipayRealnamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),s(l,{class:"mt-[16rpx]"},{default:u(()=>[s(o,{label:_(n)("alipayAccountNo"),prop:"account_no"},{default:u(()=>[s(t,{modelValue:K.account_no,"onUpdate:modelValue":a[4]||(a[4]=e=>K.account_no=e),modelModifiers:{trim:!0},border:"none",maxlength:"30",fontSize:"28rpx",clearable:"",placeholder:_(n)("alipayAccountNoPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),s(l,{class:"mt-[16rpx]"},{default:u(()=>[s(o,{label:"收款码",prop:"transfer_payment_code"},{default:u(()=>[K.transfer_payment_code?(d(),p(l,{key:0,class:"relative w-[160rpx] h-[160rpx]"},{default:u(()=>[s(c,{class:"w-[160rpx] h-[160rpx]",src:_(z)(K.transfer_payment_code),mode:"aspectFill",onClick:a[5]||(a[5]=e=>Y(_(z)(K.transfer_payment_code)))},null,8,["src"]),s(l,{class:"absolute top-0 right-0 bg-[#373737] flex justify-end h-[28rpx] w-[28rpx] rounded-bl-[40rpx]",onClick:O},{default:u(()=>[s(y,{class:"nc-iconfont nc-icon-guanbiV6xx !text-[20rpx] mt-[2rpx] mr-[2rpx] text-[#fff]"})]),_:1})]),_:1})):(d(),p(g,{key:1,onAfterRead:L,onDelete:O,maxCount:1}))]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})],64)):b("v-if",!0),"wechat_code"==K.account_type?(d(),i(x,{key:2},[s(l,{class:"text-center text-[32rpx] font-500 mt-[20rpx] text-[#333] leading-[42rpx]"},{default:u(()=>[m(f(K.account_id?_(n)("editWechatCodeAccount"):_(n)("addWechatCodeAccount")),1)]),_:1}),b(" <view class=\"text-center text-[28rpx] mt-[16rpx] text-[var(--text-color-light9)] leading-[36rpx]\">{{ formData.account_id ? t('editWechatCodeAccountTips') : t('addWechatCodeAccountTips') }}</view> "),s(l,{class:"mt-[70rpx] px-[10rpx]"},{default:u(()=>[s(r,{labelPosition:"left",model:K,labelWidth:"200rpx",errorType:"toast",rules:_(H),ref_key:"formRef",ref:q},{default:u(()=>[s(l,null,{default:u(()=>[s(o,{label:_(n)("alipayRealname"),prop:"realname"},{default:u(()=>[s(t,{modelValue:K.realname,"onUpdate:modelValue":a[6]||(a[6]=e=>K.realname=e),modelModifiers:{trim:!0},maxlength:"30",border:"none",fontSize:"28rpx",clearable:"",placeholder:_(n)("alipayRealnamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),s(l,{class:"mt-[16rpx]"},{default:u(()=>[s(o,{label:_(n)("wechatCodeAccountNo"),prop:"account_no"},{default:u(()=>[s(t,{modelValue:K.account_no,"onUpdate:modelValue":a[7]||(a[7]=e=>K.account_no=e),modelModifiers:{trim:!0},border:"none",maxlength:"30",fontSize:"28rpx",clearable:"",placeholder:_(n)("wechatCodeAccountNoPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),s(l,{class:"mt-[16rpx]"},{default:u(()=>[s(o,{label:"收款码",prop:"transfer_payment_code"},{default:u(()=>[K.transfer_payment_code?(d(),p(l,{key:0,class:"relative w-[160rpx] h-[160rpx]"},{default:u(()=>[s(c,{class:"w-[160rpx] h-[160rpx]",src:_(z)(K.transfer_payment_code),mode:"aspectFill",onClick:a[8]||(a[8]=e=>Y(_(z)(K.transfer_payment_code)))},null,8,["src"]),s(l,{class:"absolute top-0 right-0 bg-[#373737] flex justify-end h-[28rpx] w-[28rpx] rounded-bl-[40rpx]",onClick:O},{default:u(()=>[s(y,{class:"nc-iconfont nc-icon-guanbiV6xx !text-[20rpx] mt-[2rpx] mr-[2rpx] text-[#fff]"})]),_:1})]),_:1})):(d(),p(g,{key:1,onAfterRead:L,onDelete:O,maxCount:1}))]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})],64)):b("v-if",!0)]),_:1}),s(l,{class:"common-tab-bar-placeholder"}),s(l,{class:"common-tab-bar fixed left-[var(--sidebar-m)] right-[var(--sidebar-m)] bottom-[0]"},{default:u(()=>[s(k,{loading:I.value,class:"primary-btn-bg text-[#fff] h-[80rpx] leading-[80rpx] rounded-[100rpx] text-[26rpx] font-500",onClick:J},{default:u(()=>[m(f(_(n)("save")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),s(C,{show:F.value,content:_(n)("deleteConfirm"),confirmText:_(n)("confirm"),cancelText:_(n)("cancel"),showCancelButton:!0,onConfirm:Q,onCancel:a[9]||(a[9]=e=>F.value=!1),confirmColor:"var(--primary-color)"},null,8,["show","content","confirmText","cancelText"])]),_:1},8,["style"])]),_:1})}}}),[["__scopeId","data-v-2570ed26"]]);export{q as default};
