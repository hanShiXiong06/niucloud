import{a4 as e,a5 as t,a6 as a,aa as o,ab as l,o as r,c as s,w as i,B as n,C as d,D as u,j as c,i as b,J as h,k as p,l as f,e as m,Y as y,Z as g,aw as v,m as x,av as k,aF as S,A as _,d as C,t as w,x as I,ad as D,s as B,bq as N,br as P,n as j,az as A,a9 as H,f as O,S as $,bs as z,b as T,b1 as L}from"./index-c3bd19d7.js";import{_ as V}from"./u-icon.fed07783.js";import{_ as Z}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as F}from"./u-safe-bottom.d8b3ca1a.js";const M=Z({name:"u-badge",mixins:[t,{props:{isDot:{type:Boolean,default:()=>e.badge.isDot},value:{type:[Number,String],default:()=>e.badge.value},modelValue:{type:[Number,String],default:()=>e.badge.modelValue},show:{type:Boolean,default:()=>e.badge.show},max:{type:[Number,String],default:()=>e.badge.max},type:{type:String,default:()=>e.badge.type},showZero:{type:Boolean,default:()=>e.badge.showZero},bgColor:{type:[String,null],default:()=>e.badge.bgColor},color:{type:[String,null],default:()=>e.badge.color},shape:{type:String,default:()=>e.badge.shape},numberType:{type:String,default:()=>e.badge.numberType},offset:{type:Array,default:()=>e.badge.offset},inverted:{type:Boolean,default:()=>e.badge.inverted},absolute:{type:Boolean,default:()=>e.badge.absolute}}},a],computed:{boxStyle:()=>({}),badgeStyle(){const e={};if(this.color&&(e.color=this.color),this.bgColor&&!this.inverted&&(e.backgroundColor=this.bgColor),this.absolute&&(e.position="absolute",this.offset.length)){const t=this.offset[0],a=this.offset[1]||t;e.top=o(t),e.right=o(a)}return e},showValue(){switch(this.numberType){case"overflow":return Number(this.value)>Number(this.max)?this.max+"+":this.value;case"ellipsis":return Number(this.value)>Number(this.max)?"...":this.value;case"limit":return Number(this.value)>999?Number(this.value)>=9999?Math.floor(this.value/1e4*100)/100+"w":Math.floor(this.value/1e3*100)/100+"k":this.value;default:return Number(this.value)}}},methods:{addStyle:l}},[["render",function(e,t,a,o,l,p){const f=h;return e.show&&(0!==Number(e.value)||e.showZero||e.isDot)?(r(),s(f,{key:0,class:u([[e.isDot?"u-badge--dot":"u-badge--not-dot",e.inverted&&"u-badge--inverted","horn"===e.shape&&"u-badge--horn",`u-badge--${e.type}${e.inverted?"--inverted":""}`],"u-badge"]),style:c([p.addStyle(e.customStyle),p.badgeStyle])},{default:i(()=>[n(d(e.isDot?"":p.showValue),1)]),_:1},8,["class","style"])):b("v-if",!0)}],["__scopeId","data-v-0e56696e"]]);const R=Z({name:"u-tabbar-item",mixins:[t,a,{props:{name:{type:[String,Number,null],default:()=>e.tabbarItem.name},icon:{icon:String,default:()=>e.tabbarItem.icon},badge:{type:[String,Number,null],default:()=>e.tabbarItem.badge},dot:{type:Boolean,default:()=>e.tabbarItem.dot},text:{type:String,default:()=>e.tabbarItem.text},badgeStyle:{type:[Object,String],default:()=>e.tabbarItem.badgeStyle}}}],data:()=>({isActive:!1,parentData:{value:null,activeColor:"",inactiveColor:""}}),options:{virtualHost:!0},created(){this.init()},emits:["click","change"],methods:{addStyle:l,init(){this.updateParentData(),this.parent;const e=this.parent.children.indexOf(this);this.isActive=(this.name||e)===this.parentData.value},updateParentData(){this.getParentData("u-tabbar")},updateFromParent(){this.init()},clickHandler(){this.$nextTick(()=>{const e=this.parent.children.indexOf(this),t=this.name||e;t!==this.parent.value&&this.parent.$emit("change",t),this.$emit("click",t)})}}},[["render",function(e,t,a,o,l,u){const b=p(f("u-icon"),V),k=p(f("u-badge"),M),S=x,_=h;return r(),s(S,{class:"u-tabbar-item cursor-pointer",style:c([u.addStyle(e.customStyle)]),onClick:u.clickHandler},{default:i(()=>[m(S,{class:"u-tabbar-item__icon"},{default:i(()=>[e.icon?(r(),s(b,{key:0,name:e.icon,color:l.isActive?l.parentData.activeColor:l.parentData.inactiveColor,size:20},null,8,["name","color"])):(r(),y(g,{key:1},[l.isActive?v(e.$slots,"active-icon",{key:0},void 0,!0):v(e.$slots,"inactive-icon",{key:1},void 0,!0)],64)),m(k,{absolute:"",offset:[0,e.dot?"34rpx":e.badge>9?"14rpx":"20rpx"],customStyle:e.badgeStyle,isDot:e.dot,value:e.badge||(e.dot?1:null),show:e.dot||e.badge>0},null,8,["offset","customStyle","isDot","value","show"])]),_:3}),v(e.$slots,"text",{},()=>[m(_,{class:"u-tabbar-item__text",style:c({color:l.isActive?l.parentData.activeColor:l.parentData.inactiveColor})},{default:i(()=>[n(d(e.text),1)]),_:1},8,["style"])],!0)]),_:3},8,["style","onClick"])}],["__scopeId","data-v-ed2788ef"]]);const q=Z({name:"u-tabbar",mixins:[t,a,{props:{value:{type:[String,Number,null],default:()=>e.tabbar.value},safeAreaInsetBottom:{type:Boolean,default:()=>e.tabbar.safeAreaInsetBottom},border:{type:Boolean,default:()=>e.tabbar.border},zIndex:{type:[String,Number],default:()=>e.tabbar.zIndex},activeColor:{type:String,default:()=>e.tabbar.activeColor},inactiveColor:{type:String,default:()=>e.tabbar.inactiveColor},fixed:{type:Boolean,default:()=>e.tabbar.fixed},placeholder:{type:Boolean,default:()=>e.tabbar.placeholder}}}],data:()=>({placeholderHeight:0}),computed:{tabbarStyle(){const e={zIndex:this.zIndex};return k(e,l(this.customStyle))},updateChild(){return[this.value,this.activeColor,this.inactiveColor]},updatePlaceholder(){return[this.fixed,this.placeholder]}},watch:{updateChild(){this.updateChildren()},updatePlaceholder(){this.setPlaceholderHeight()}},created(){this.children=[]},mounted(){this.setPlaceholderHeight()},methods:{updateChildren(){this.children.length&&this.children.map(e=>e.updateFromParent())},async setPlaceholderHeight(){this.fixed&&this.placeholder&&(await S(20),this.$uGetRect(".u-tabbar__content").then(({height:e=50})=>{this.placeholderHeight=e}))}}},[["render",function(e,t,a,o,l,n){const d=x,h=p(f("u-safe-bottom"),F);return r(),s(d,{class:"u-tabbar"},{default:i(()=>[m(d,{class:u(["u-tabbar__content",[e.border&&"u-border-top",e.fixed&&"u-tabbar--fixed"]]),ref:"u-tabbar__content",onTouchmove:_(e.noop,["stop","prevent"]),style:c([n.tabbarStyle])},{default:i(()=>[m(d,{class:"u-tabbar__content__item-wrapper"},{default:i(()=>[v(e.$slots,"default",{},void 0,!0)]),_:3}),e.safeAreaInsetBottom?(r(),s(h,{key:0})):b("v-if",!0)]),_:3},8,["onTouchmove","class","style"]),e.placeholder?(r(),s(d,{key:0,class:"u-tabbar__placeholder",style:c({height:l.placeholderHeight+"px"})},null,8,["style"])):b("v-if",!0)]),_:3})}],["__scopeId","data-v-71f6d5da"]]),E=Z(C({__name:"tabbar",props:{addon:{type:String,default:""},color:{type:Object,default:()=>({backgroundColor:"",textColor:"",textHoverColor:""})},border:{type:Boolean,default:!0}},setup(e){const t=e;let a=t.addon;const o=w();!a&&o.addon&&(a=o.addon);const l=I({}),n=()=>{let e=z(w().tabbarList);if(1==e.length)Object.assign(l,e[0]);else{let t=!1;for(let o=0;o<e.length;o++)if(e[o].key==a){Object.assign(l,e[o]),t=!0;break}if(!t){let t=0,a={};try{e&&e.forEach(e=>{"app"==e.info.type&&(t++,a=e)}),1==t&&Object.assign(l,a)}catch(o){}}}if(t.color)for(let a in t.color)t.color[a]&&l.value[a]&&(l.value[a]=t.color[a])};n(),D(()=>t.addon,(e,t)=>{e&&t&&e!=t&&n()},{immediate:!0}),D(()=>t.color,(e,t)=>{e&&t&&e!=t&&n()},{immediate:!0,deep:!0}),t.addon||D(()=>w().tabbarList,(e,t)=>{e&&n()},{deep:!0,immediate:!0}),D(()=>w().tabbarList,(e,t)=>{e&&e.length&&n()},{deep:!0});const d=B(()=>{let e=N().params,t=[];for(let a in e)t.push(a+"="+e[a]);return"/"+P()+(t.length>0?"?"+t.join("&"):"")}),u=e=>{if(-1!=e.indexOf("http")||-1!=e.indexOf("http"))window.location.href=e;else{let t=N().params,a=[];for(let e in t)a.push(e+"="+t[e]);if(e=="/"+P()&&!a.length)return;T({url:e,mode:"reLaunch"})}},c=L();return j(()=>{A().in(c).select(".tab-bar-placeholder").boundingClientRect(e=>{let t={height:e?e.height:0};uni.setStorageSync("tabbarInfo",t)}).exec()}),(e,a)=>{const o=p(f("u-tabbar-item"),R),n=p(f("u-tabbar"),q),c=x;return l&&Object.keys(l).length?(r(),y(g,{key:0},[m(n,{value:O(d),zIndex:"9999",fixed:!0,placeholder:!0,safeAreaInsetBottom:!0,"inactive-color":l.value.textColor,"active-color":l.value.textHoverColor,border:t.border,class:"custom-tabbar"},{default:i(()=>[(r(!0),y(g,null,H(l.value.list,e=>(r(),y(g,null,[1==l.value.type?(r(),s(o,{key:0,class:"py-[5rpx]","custom-style":{"background-color":l.value.backgroundColor},text:e.text,icon:O($)(O(d)==e.link.url?e.iconSelectPath:e.iconPath),name:e.link.url,onClick:t=>u(e.link.url)},null,8,["custom-style","text","icon","name","onClick"])):b("v-if",!0),2==l.value.type?(r(),s(o,{key:1,class:"py-[5rpx]","custom-style":{"background-color":l.value.backgroundColor},icon:O($)(O(d)==e.link.url?e.iconSelectPath:e.iconPath),name:e.link.url,onClick:t=>u(e.link.url)},null,8,["custom-style","icon","name","onClick"])):b("v-if",!0),3==l.value.type?(r(),s(o,{key:2,class:"py-[5rpx]","custom-style":{"background-color":l.value.backgroundColor},text:e.text,name:e.link.url,onClick:t=>u(e.link.url)},null,8,["custom-style","text","name","onClick"])):b("v-if",!0)],64))),256))]),_:1},8,["value","inactive-color","active-color","border"]),m(c,{class:"tab-bar-placeholder"})],64)):b("v-if",!0)}}}),[["__scopeId","data-v-fb6c3556"]]);export{E as _};
