import{d as e,r as a,L as t,O as l,o as s,c as r,w as o,j as d,e as u,Y as c,ac as n,Z as p,i as f,B as i,C as x,f as m,c4 as v,b as _,c5 as b,m as h,K as g,aw as k,k as y,l as C,p as w,c6 as j,A,D as S,z,c7 as E,J as I}from"./index-0259f5df.js";import{_ as B}from"./u-popup.6f1fa414.js";import{M as V}from"./mescroll-empty.13fd664b.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-transition.9813ca7a.js";import"./u-icon.e993510c.js";import"./mescroll-i18n.435025e2.js";const J=D(e({__name:"address",setup(e){const D=a(!0),J=a(0),K=a([]),L=a(""),M=a("");t(e=>{L.value=e.type||"",M.value=e.source||"",e.type&&(J.value="address"==e.type?0:1),uni.getStorageSync("selectAddressCallback")&&uni.removeStorage({key:"selectAddressCallback"})});l(()=>{v({}).then(({data:e})=>{const a=[],t=[];e.forEach(e=>{"address"==e.type?a.push(e):t.push(e)}),M.value?K.value=0==J.value?a:t:K.value=e,D.value=!1}).catch(()=>{D.value=!1})});const O=()=>{_({url:"/app/pages/member/address_edit",param:{source:M.value}})},R=a(!1),T=a(0),Y=()=>{const e=K.value[T.value];b(e.id).then(()=>{K.value.splice(T.value,1),R.value=!1}).catch()};return(e,a)=>{const t=h,l=I,v=g,b=k,J=y(C("u-popup"),B),L=w("layout-default-uni");return s(),r(L,null,{default:o(()=>[D.value?f("v-if",!0):(s(),r(t,{key:0,class:"address bg-[var(--page-bg-color)] min-h-[100vh]",style:d(e.themeColor())},{default:o(()=>[u(b,{"scroll-y":"true"},{default:o(()=>[K.value.length?(s(),r(t,{key:0,class:"sidebar-margin pt-[var(--top-m)]"},{default:o(()=>[(s(!0),c(p,null,n(K.value,(e,a)=>(s(),r(t,{class:"mb-[var(--top-m)] rounded-[var(--rounded-big)] overflow-hidden"},{default:o(()=>[u(t,{class:"flex flex-col card-template"},{default:o(()=>[u(t,{class:"flex-1 line-feed mr-[20rpx]",onClick:a=>(e=>{const a=uni.getStorageSync("selectAddressCallback");a&&(a.address_id=e.id,uni.setStorage({key:"selectAddressCallback",data:a,success(){_({url:a.back,mode:"redirectTo"})}}))})(e)},{default:o(()=>[u(t,{class:"flex items-center"},{default:o(()=>[u(t,{class:"text-[#333] text-[30rpx] leading-[34rpx] font-500"},{default:o(()=>[i(x(e.name),1)]),_:2},1024),u(l,{class:"text-[#333] text-[30rpx] ml-[10rpx]"},{default:o(()=>[i(x(m(j)(e.mobile)),1)]),_:2},1024)]),_:2},1024),u(t,{class:"mt-[16rpx] text-[26rpx] line-feed text-[var(--text-color-light9)] leading-[1.4]"},{default:o(()=>[i(x(e.full_address),1)]),_:2},1024)]),_:2},1032,["onClick"]),u(t,{class:"flex justify-between pt-[26rpx]"},{default:o(()=>[u(t,{class:"flex items-center text-[26rpx] leading-none",onClick:A(e=>(e=>{const a=K.value[e];a.is_default||(a.is_default=1,E(a).then(()=>{K.value.forEach((a,t)=>{a.is_default&&(a.is_default=0),t==e&&(a.is_default=1)})}).catch())})(a),["stop"])},{default:o(()=>[u(l,{class:S(["iconfont !text-[26rpx] mr-[10rpx]",{"iconduigou text-primary":e.is_default,iconcheckbox_nol:!e.is_default}])},null,8,["class"]),i(" 设为默认 ")]),_:2},1032,["onClick"]),u(t,{class:"flex"},{default:o(()=>[u(t,{class:"text-[26rpx]",onClick:A(a=>{return t=e.id,void _({url:"/app/pages/member/address_edit",param:{id:t,source:M.value}});var t},["stop"])},{default:o(()=>[u(l,{class:"nc-iconfont nc-icon-xiugaiV6xx shrink-0 text-[26rpx] mr-[4rpx]"}),i(" 编辑 ")]),_:2},1032,["onClick"]),u(t,{onClick:A(e=>(e=>{T.value=e,R.value=!0})(a),["stop"]),class:"ml-[40rpx] text-[26rpx]"},{default:o(()=>[u(l,{class:"nc-iconfont nc-icon-shanchu-yuangaizhiV6xx shrink-0 text-[26rpx] mr-[4rpx]"}),i(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1})):f("v-if",!0),K.value.length?f("v-if",!0):(s(),r(V,{key:1,option:{tip:"暂无收货地址"}})),u(t,{class:"w-full footer"},{default:o(()=>[u(t,{class:"py-[var(--top-m)] px-[var(--sidebar-m)] footer w-full fixed bottom-0 left-0 right-0 box-border"},{default:o(()=>[u(v,{"hover-class":"none",class:"primary-btn-bg text-[#fff] h-[80rpx] leading-[80rpx] rounded-[100rpx] text-[26rpx] font-500",onClick:O},{default:o(()=>[i(x(m(z)("createAddress")),1)]),_:1})]),_:1})]),_:1})]),_:1}),u(J,{ref:"popupRef",show:R.value,mode:"center",onClose:a[1]||(a[1]=e=>R.value=!1),round:30,zIndex:"99999",safeAreaInsetBottom:!1},{default:o(()=>[u(t,{class:"bg-[#fff] flex flex-col justify-between w-[610rpx] h-[306rpx] rounded-[30rpx] box-border px-[40rpx] pt-[70rpx] pb-[40rpx] relative overflow-hidden"},{default:o(()=>[u(t,{class:"flex-center mb-[80rpx] text-[#333]"},{default:o(()=>[i("确定要删除该地址吗？")]),_:1}),u(t,{class:"flex-between-center"},{default:o(()=>[u(t,{class:"w-[250rpx] h-[66rpx] rounded-full bg-[#eee] flex-center text-[26rpx] font-500 text-[#333]",onClick:a[0]||(a[0]=e=>R.value=!1)},{default:o(()=>[i("取消")]),_:1}),u(t,{class:"w-[250rpx] h-[66rpx] rounded-full primary-btn-bg flex-center text-[26rpx] font-500 text-[#fff]",onClick:Y},{default:o(()=>[i("确定")]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])]),_:1},8,["style"]))]),_:1})}}}),[["__scopeId","data-v-df1d5ade"]]);export{J as default};
