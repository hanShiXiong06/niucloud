import{d as e,r as t,L as a,o as l,c as s,w as r,e as o,A as c,i as n,f as x,Y as i,a9 as p,Z as u,j as d,al as f,am as m,J as v,I as _,m as g,k as h,l as b,p as y,B as k,C as j,an as w,S as C,b as V,R as I}from"./index-5dd3a833.js";import{_ as S}from"./u-image.dbe088c9.js";import{u as M,M as R}from"./useMescroll.eb8b1024.js";import{M as U}from"./mescroll-empty.a5ca8833.js";import{c as z}from"./verify.65dc7682.js";import{s as F}from"./select-date.d39d4c5d.js";import{_ as A}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.2d8c39b5.js";import"./u-transition.22a584d7.js";import"./mescroll-i18n.54f76414.js";import"./u-popup.b109731e.js";import"./u-safe-bottom.94dec507.js";const B=A(e({__name:"record",setup(e){const A=t(""),B=t([]),D=t([]),E=t(!1),{mescrollInit:J,downCallback:L,getMescroll:O}=M(m,f);t(null),a(()=>{});const P=e=>{E.value=!1;let t={page:e.num,limit:e.size,keyword:A.value,create_time:B.value};z(t).then(t=>{let a=t.data.data;1==e.num&&(D.value=[]),D.value=D.value.concat(a),e.endSuccess(a.length),E.value=!0}).catch(()=>{E.value=!0,e.endErr()})},Q=()=>{O().resetUpScroll()},T=t(),Y=()=>{T.value.show=!0},Z=e=>{B.value=e,D.value=[],O().resetUpScroll()};return(e,t)=>{const a=v,f=_,m=g,M=I,z=h(b("up-image"),S),B=y("layout-default-uni");return l(),s(B,null,{default:r(()=>[o(m,{class:"bg-[var(--page-bg-color)] min-h-screen overflow-hidden",style:d(e.themeColor())},{default:r(()=>[o(m,{class:"fixed left-0 right-0 top-0 z-99 bg-[#f6f6f6]"},{default:r(()=>[o(m,{class:"py-[14rpx] flex items-center justify-between px-[20rpx]"},{default:r(()=>[o(m,{class:"flex-1 search-input bg-[#fff] mr-[20rpx]"},{default:r(()=>[o(a,{onClick:t[0]||(t[0]=c(e=>Q(),["stop"])),class:"nc-iconfont nc-icon-sousuo-duanV6xx1 btn"}),o(f,{class:"input",maxlength:"50",type:"text",modelValue:A.value,"onUpdate:modelValue":t[1]||(t[1]=e=>A.value=e),placeholder:"请输入搜索关键词",placeholderClass:"text-[var(--text-color-light9)] text-[24rpx]","confirm-type":"search",onConfirm:t[2]||(t[2]=e=>Q())},null,8,["modelValue"]),A.value?(l(),s(a,{key:0,class:"nc-iconfont nc-icon-cuohaoV6xx1 clear",onClick:t[3]||(t[3]=e=>A.value="")})):n("v-if",!0)]),_:1}),o(m,{class:"nc-iconfont nc-icon-a-riliV6xx-36 !text-[30rpx] leading-[36rpx] text-[var(--text-color-light6)]",onClick:Y})]),_:1})]),_:1}),o(R,{ref:"mescrollRef",top:"88rpx",onInit:x(J),down:{use:!1},onUp:P},{default:r(()=>[D.value.length?(l(),s(m,{key:0,class:"sidebar-margin pt-[var(--top-m)]"},{default:r(()=>[(l(!0),i(u,null,p(D.value,(e,t)=>(l(),s(m,{key:e.id,class:"w-full flex flex-col mb-[var(--top-m)] card-template",onClick:t=>{V({url:"/app/pages/verify/detail",param:{code:e.code}})}},{default:r(()=>[o(m,{class:"flex items-center mb-[30rpx] leading-[1] text-[26rpx]"},{default:r(()=>[o(m,{class:"nc-iconfont nc-icon-hexiaotaiV6xx !text-[26rpx] pr-[10rpx]"}),o(a,{class:"truncate text-[#303133] text-[26rpx]"},{default:r(()=>[k("核销码:")]),_:1}),o(a,{class:"ml-[10rpx] max-w-[494rpx]"},{default:r(()=>[k(j(e.code),1)]),_:2},1024),o(a,{class:"text-[#303133] text-[26rpx] font-400 nc-iconfont nc-icon-fuzhiV6xx1 ml-[11rpx]",onClick:c(t=>x(w)(e.code),["stop"])},null,8,["onClick"])]),_:2},1024),(l(!0),i(u,null,p(e.value.list,(t,a)=>(l(),s(m,{class:"flex flex-1 mb-2",key:a},{default:r(()=>[o(z,{width:"130rpx",height:"130rpx",radius:"var(--goods-rounded-big)",src:x(C)(t.cover?t.cover:""),mode:"aspectFill"},{error:r(()=>[o(M,{class:"w-[130rpx] h-[130rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:x(C)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])]),_:2},1032,["radius","src"]),o(m,{class:"flex flex-col flex-1 ml-[20rpx] py-[4rpx]"},{default:r(()=>[o(m,{class:"max-w-[490rpx] leading-[1.3] truncate text-[28rpx] text-[#303133]"},{default:r(()=>[k(j(t.name),1)]),_:2},1024),e.sub_name?(l(),s(m,{key:0,class:"mt-[14rpx] truncate text-[24rpx] text-[var(--text-color-light9)] max-w-[490rpx]"},{default:r(()=>[k(j(e.sub_name),1)]),_:2},1024)):n("v-if",!0),o(m,{class:"text-[24rpx] mt-[10rpx] text-[var(--text-color-light9)]"},{default:r(()=>[k("x"+j(t.verify_num),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),o(m,{class:"flex bg-[var(--temp-bg)] py-[20rpx] px-[20rpx] rounded-[12rpx] mt-[20rpx]"},{default:r(()=>[o(m,{class:"flex-1"},{default:r(()=>[o(m,{class:"text-[22rpx] text-[var(--text-color-light9)] mb-[10rpx] leading-[30rpx]"},{default:r(()=>[k("核销时间")]),_:1}),o(m,{class:"text-[26rpx] text-[#303133] leading-[36rpx]"},{default:r(()=>[k(j(e.create_time),1)]),_:2},1024)]),_:2},1024),o(m,{class:"flex-1"},{default:r(()=>[o(m,{class:"text-[22rpx] text-[var(--text-color-light9)] mb-[10rpx] leading-[30rpx]"},{default:r(()=>[k("核销员")]),_:1}),o(m,{class:"text-[26rpx] text-[#303133] leading-[36rpx]"},{default:r(()=>{var t;return[k(j((1==e.is_admin?"后台核销":null==(t=e.member)?void 0:t.nickname)||"--"),1)]}),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):n("v-if",!0),!D.value.length&&E.value?(l(),s(U,{key:1,option:{tip:"暂无核销记录"}})):n("v-if",!0)]),_:1},8,["onInit"]),n(" 时间选择 "),o(F,{ref_key:"selectDateRef",ref:T,onConfirm:Z},null,512)]),_:1},8,["style"])]),_:1})}}}),[["__scopeId","data-v-1077dcd9"]]);export{B as default};
