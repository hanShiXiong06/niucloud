import{_ as e}from"./loading-page.vue_vue_type_script_setup_true_lang.b745a0f5.js";import{d as l,q as a,r as t,O as r,N as s,s as u,bW as n,bX as o,ac as x,o as i,c,w as f,e as p,f as v,j as d,i as _,Y as g,a9 as m,Z as b,B as h,k as y,l as w,m as k,R as C,aB as j,au as F,J as T,p as X,S as B,D as z,C as E,b as D,bn as I,aD as J}from"./index-c3bd19d7.js";import{t as O}from"./topTabbar.9a3c8195.js";import{_ as S}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.e306857f.js";import"./u-transition.35c8ef6d.js";const q=S(l({__name:"level",setup(l){const S=a(),q=t(!1),N=t([]),P=t([]),R=t(0),W=t(0);O().setTopTabbarParam({title:"会员等级"}),t({title:"会员等级",topStatusBar:{style:"style-1",bgColor:"#fff",rollBgColor:"#333",textColor:"#333",rollTextColor:"#333"}}),r(()=>{s()&&(K(),H())});const Y=u(()=>S.info),Z=e=>{let l=e,a=100;return N.value[l]&&N.value[l].growth&&(a=Y.value.growth/N.value[l].growth*100),a},$=t(""),A=t(""),G=t(""),H=()=>{q.value=!0,n().then(e=>{N.value=e.data||[];let l=!0;Y.value&&N.value&&N.value.length&&N.value.forEach((e,a)=>{e.level_id==Y.value.member_level&&(l=!1,R.value=a,W.value=R.value,Q(a))}),l&&Q(0),N.value&&N.value.length>=5?($.value="width:115rpx;",A.value="max-width:115rpx;",G.value="width:460rpx;transform: translateX(-235rpx);"):N.value&&4==N.value.length?($.value="width:144rpx;",A.value="max-width:144rpx;",G.value="width:436rpx;transform: translateX(-218rpx);"):N.value&&3==N.value.length?($.value="width:192rpx;",A.value="max-width:192rpx;",G.value="width:388rpx;transform: translateX(-194rpx);"):N.value&&2==N.value.length?($.value="width:289rpx;",A.value="max-width:289rpx;",G.value="width:289rpx;transform: translateX(-144rpx);"):(A.value="max-width:578rpx;",$.value="width:100%;"),q.value=!1}).catch(()=>{q.value=!1})},K=()=>{o().then(e=>{P.value=e.data})},L=e=>{R.value=e.detail.current,W.value=R.value,Q(e.detail.current)},M=t({}),Q=e=>{let l=x(N.value[e]);if(l&&l.level_benefits&&(l.benefits_arr=[],Object.values(l.level_benefits).forEach((e,a,t)=>{e.content&&l.benefits_arr.push(e.content)})),l&&l.level_gifts){l.gifts_arr=[];for(let e in l.level_gifts)l.level_gifts[e].content&&(l.level_gifts[e].content.forEach((l,a,t)=>{t[a].type=e}),l.gifts_arr=l.gifts_arr.concat(l.level_gifts[e].content))}M.value=l};return(l,a)=>{const t=y(w("loading-page"),e),r=k,s=C,u=I,n=J,o=j,x=F,O=T,S=X("layout-default-uni");return i(),c(S,null,{default:f(()=>[p(r,{style:d(l.themeColor()),class:"bg-[var(--page-bg-color)] min-h-[100vh] overflow-hidden"},{default:f(()=>[p(t,{loading:q.value&&v(Y)},null,8,["loading"]),!q.value&&v(Y)&&N.value&&N.value.length?(i(),c(r,{key:0,class:"min-h-[100vh] overflow-hidden flex flex-col",style:d({backgroundColor:M.value.level_style.bg_color})},{default:f(()=>[p(r,null,{default:f(()=>[p(r,{class:"pt-[40rpx] mb-[40rpx]"},{default:f(()=>[_(" 轮播图 "),p(r,{class:"relative"},{default:f(()=>[p(o,{class:"swiper ns-indicator-dots relative",style:{height:"300rpx"},onChange:L,current:R.value,"previous-margin":"30rpx","next-margin":"30rpx"},{default:f(()=>[(i(!0),g(b,null,m(N.value,(e,l)=>(i(),c(n,{class:"swiper-item",key:e.id},{default:f(()=>[p(r,{class:"h-[300rpx] relative"},{default:f(()=>[v(Y).member_level==e.level_id&&R.value==l?(i(),c(r,{key:0,class:"text-[24rpx] absolute top-0 left-0 z-10 h-[66rpx] !bg-contain w-[150rpx] flex pt-[12rpx] pl-[16rpx] box-border",style:d({background:"url("+v(B)(M.value.level_tag)+") no-repeat",color:M.value.level_style.level_color})},{default:f(()=>[h("当前等级")]),_:1},8,["style"])):_("v-if",!0),p(r,{class:z(["absolute top-0 left-0 right-0 bottom-0 z-20 px-[30rpx] pt-[68rpx] box-border",{"px-[50rpx]":R.value!=l}])},{default:f(()=>[p(r,{class:"flex items-center leading-[50rpx] mb-[90rpx]"},{default:f(()=>[p(s,{class:"h-[32rpx] w-[34rpx] align-middle",src:v(B)(e.level_icon?e.level_icon:""),mode:"aspectFill"},null,8,["src"]),p(r,{class:"text-[36rpx] font-bold ml-[10rpx] max-w-[340rpx] truncate",style:d({color:M.value.level_style.level_color})},{default:f(()=>[h(E(e.level_name),1)]),_:2},1032,["style"])]),_:2},1024),p(r,{class:"flex items-baseline",style:d({color:M.value.level_style.level_color})},{default:f(()=>[p(r,{class:"text-[30rpx] font-500 leading-[38rpx]"},{default:f(()=>[h(E(v(Y).growth),1)]),_:1}),p(r,{class:"text-[24rpx] leading-[34rpx]"},{default:f(()=>[h("/"+E(N.value[l].growth)+"成长值",1)]),_:2},1024)]),_:2},1032,["style"]),p(r,{class:"flex justify-between items-center mt-[10rpx]"},{default:f(()=>[p(r,{class:"flex flex-col flex-1"},{default:f(()=>[p(r,null,{default:f(()=>[p(u,{percent:Z(l),"border-radius":100,activeColor:M.value.level_style.level_color,backgroundColor:"#fff","stroke-width":"4"},null,8,["percent","activeColor"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]),p(r,{class:"relatvie h-full w-full"},{default:f(()=>[p(s,{class:z(["h-full w-full",{"swiper-animation":R.value!=l}]),src:v(B)(e.level_bg),"show-menu-by-longpress":!0},null,8,["src","class"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["current"])]),_:1})]),_:1}),p(r,{class:"mb-[30rpx] relative"},{default:f(()=>[p(r,{class:"bg-[#fff] opacity-15 h-[2rpx] w-full absolute top-[15rpx]"}),p(r,{style:d(G.value),class:"bg-[#fff] opacity-60 h-[2rpx] absolute top-[15rpx] z-4 left-[50%]"},null,8,["style"]),p(r,{class:"mx-[86rpx]"},{default:f(()=>[p(x,{"scroll-x":!0,"scroll-with-animation":"","scroll-into-view":"id"+(W.value?W.value-1:0)},{default:f(()=>[p(r,{class:"flex flex-nowrap py-[10rpx]"},{default:f(()=>[(i(!0),g(b,null,m(N.value,(e,l)=>(i(),c(r,{key:e.id,style:d($.value),class:"flex-shrink-0 flex flex-col items-center justify-center",onClick:e=>(e=>{W.value=e,R.value=e,Q(e)})(l),id:"id"+l},{default:f(()=>[p(r,{class:z(["w-[14rpx] h-[14rpx] level-class",{"level-select":W.value==l}])},null,8,["class"]),p(r,{style:d(A.value),class:z(["text-[22rpx] text-[#aaa] mt-[16rpx] truncate",{"!text-[#fff]":W.value==l}])},{default:f(()=>[h(E(e.level_name),1)]),_:2},1032,["style","class"])]),_:2},1032,["style","onClick","id"]))),128))]),_:1})]),_:1},8,["scroll-into-view"])]),_:1})]),_:1}),M.value.benefits_arr&&M.value.benefits_arr.length?(i(),c(r,{key:0,class:"flex mx-[var(--sidebar-m)] pt-[30rpx] pb-[46rpx] items-center flex-col level_benefits",style:d({backgroundImage:"url("+v(B)(M.value.member_bg)+")"})},{default:f(()=>[p(r,{class:"flex items-center justify-center"},{default:f(()=>[p(O,{class:"text-[#fff] text-[30rpx] font-500 leading-[44rpx]"},{default:f(()=>[h("会员权益")]),_:1})]),_:1}),p(r,{class:"flex flex-wrap w-[690rpx] mt-[40rpx] justify-between"},{default:f(()=>[(i(!0),g(b,null,m(M.value.benefits_arr,(e,l)=>(i(),c(r,{class:"flex flex-col w-[25%] items-center",key:l},{default:f(()=>[p(s,{class:"h-[88rpx] w-[88rpx]",src:v(B)(e.icon),mode:"heightFix"},null,8,["src"]),p(O,{class:"text-[rgba(255,255,255,0.9)] mt-[16rpx] text-[24rpx] leading-[34rpx]"},{default:f(()=>[h(E(e.title),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["style"])):_("v-if",!0)]),_:1}),p(r,{class:"flex-1 rounded-t-[40rpx] px-[30rpx] pt-[var(--pad-top-m)] mt-[-10rpx] relative tab-bar",style:d({background:`linear-gradient( 180deg, ${M.value.level_style.gift} 0%, #FFFFFF 20%)`})},{default:f(()=>[_(" 升级礼包 "),M.value.gifts_arr&&M.value.gifts_arr.length?(i(),c(r,{key:0},{default:f(()=>[p(r,{class:"pb-[30rpx] flex items-center"},{default:f(()=>[p(O,{class:"text-[30rpx] text-[#333] font-500 leading-[44rpx]"},{default:f(()=>[h("升级礼包")]),_:1})]),_:1}),p(r,{class:"flex flex-wrap"},{default:f(()=>[(i(!0),g(b,null,m(M.value.gifts_arr,(e,l)=>(i(),c(r,{key:l,class:z(["mb-[20rpx]",{"mr-[21rpx]":(l+1)%3!=0}])},{default:f(()=>[p(r,{class:"relative box-border mb-[16rpx] w-[216rpx] h-[180rpx] !bg-contain",style:d({background:"url("+v(B)(e.background)+") no-repeat"})},null,8,["style"]),p(r,{class:"text-center font-500 text-[#333] text-[28rpx] truncate leading-[40rpx] max-w-[216rpx]"},{default:f(()=>[h(E(e.text),1)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})):_("v-if",!0),_(" 升级技巧 "),P.value&&P.value.length?(i(),c(r,{key:1},{default:f(()=>[p(r,{class:"pt-[30rpx] pb-[30rpx] flex items-center"},{default:f(()=>[p(O,{class:"text-[30rpx] text-[#333] font-500 leading-[44rpx]"},{default:f(()=>[h("升级技巧")]),_:1})]),_:1}),p(r,{class:"pb-[30rpx]"},{default:f(()=>[(i(!0),g(b,null,m(P.value,(e,l)=>(i(),c(r,{class:"flex items-center mb-[34rpx]",key:l},{default:f(()=>[p(s,{class:"h-[100rpx] w-[100rpx] mr-[20rpx]",src:v(B)(e.icon),mode:"heightFix"},null,8,["src"]),p(r,{class:"flex flex-col"},{default:f(()=>[p(r,{class:"text-[28rpx] leading-[38rpx] mb-[8rpx]"},{default:f(()=>[h(E(e.title),1)]),_:2},1024),p(r,{class:"text-[24rpx] text-[var(--text-color-light9)] leading-[34rpx]"},{default:f(()=>[h(E(e.desc),1)]),_:2},1024)]),_:2},1024),p(O,{class:"skill-btn",onClick:l=>v(D)({url:e.button.wap_redirect,param:{},mode:"redirectTo"})},{default:f(()=>[h(E(e.button.text),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})):_("v-if",!0)]),_:1},8,["style"])]),_:1},8,["style"])):_("v-if",!0),q.value||N.value&&N.value.length?_("v-if",!0):(i(),c(r,{key:1},{default:f(()=>[p(r,{class:"empty-page"},{default:f(()=>[p(s,{class:"img",src:v(B)("static/resource/images/empty.png"),mode:"aspectFill"},null,8,["src"]),p(O,{class:"desc"},{default:f(()=>[h("暂无会员等级")]),_:1})]),_:1})]),_:1}))]),_:1},8,["style"])]),_:1})}}}),[["__scopeId","data-v-bc6efa76"]]);export{q as default};
