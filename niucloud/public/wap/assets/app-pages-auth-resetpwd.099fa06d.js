import{d as e,a as l,s as r,x as o,r as a,y as t,z as s,o as d,c as p,w as u,e as i,B as n,C as m,f as c,i as f,j as b,a6 as x,b as g,m as _,k as h,l as v,K as w,p as y,T as P}from"./index-0259f5df.js";import{_ as V}from"./u-input.8fd8730e.js";import{_ as j,a as F}from"./u-form.acd3204a.js";import{_ as k}from"./sms-code.vue_vue_type_script_setup_true_lang.ce0a56c0.js";import{_ as C}from"./u-icon.e993510c.js";import{t as T}from"./topTabbar.6a4f0c22.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.2127c15d.js";import"./u-modal.11814531.js";import"./u-loading-icon.d4562dd7.js";import"./u-popup.6f1fa414.js";import"./u-transition.9813ca7a.js";const B=z(e({__name:"resetpwd",setup(e){const z=l();T().setTopTabbarParam({title:"",topStatusBar:{bgColor:"#fff",textColor:"#333"}}),r(()=>Object.keys(z.menuButtonInfo).length?P(Number(z.menuButtonInfo.height))+P(z.menuButtonInfo.top)+P(8)+"rpx":"auto");const B=o({mobile:"",mobile_code:"",mobile_key:"",password:"",confirm_password:""}),S=a(!0);t(()=>{setTimeout(()=>{S.value=!1},800)});const U=a(!1),q=a(null),I=a(!0),E=a(!0),K=()=>{I.value=!I.value},N=()=>{E.value=!E.value},O={password:{type:"string",required:!0,message:s("passwordPlaceholder"),trigger:["blur","change"]},confirm_password:[{type:"string",required:!0,message:s("confirmPasswordPlaceholder"),trigger:["blur","change"]},{validator:(e,l)=>l==B.password,message:s("confirmPasswordError"),trigger:["change","blur"]}],mobile:[{type:"string",required:!0,message:s("mobilePlaceholder"),trigger:["blur","change"]},{validator:(e,l)=>uni.$u.test.mobile(l),message:s("mobileError"),trigger:["change","blur"]}],mobile_code:{type:"string",required:!0,message:s("codePlaceholder"),trigger:["blur","change"]}},R=()=>{q.value.validate().then(()=>{U.value||(U.value=!0,x(B).then(e=>{g({url:"/app/pages/auth/login",mode:"redirectTo"})}).catch(()=>{U.value=!1}))})};return(e,l)=>{const r=_,o=h(v("u-input"),V),a=h(v("u-form-item"),j),t=h(v("sms-code"),k),x=h(v("u-icon"),C),g=h(v("u-form"),F),P=w,T=y("layout-default-uni");return d(),p(T,null,{default:u(()=>[i(r,{class:"w-screen h-screen flex flex-col",style:b(e.themeColor())},{default:u(()=>[i(r,{class:"mx-[60rpx]"},{default:u(()=>[i(r,{class:"pt-[140rpx] text-[44rpx] font-500 text-[#333]"},{default:u(()=>[n(m(c(s)("findPassword")),1)]),_:1}),i(r,{class:"text-[26rpx] leading-[39rpx] text-[var(--text-color-light6)] mt-[24rpx] mb-[90rpx]"},{default:u(()=>[n(m(c(s)("findPasswordTip")),1)]),_:1}),i(g,{labelPosition:"left",model:B,errorType:"toast",rules:O,ref_key:"formRef",ref:q},{default:u(()=>[i(r,{class:"h-[88rpx] flex w-full items-center px-[30rpx] rounded-[40rpx] box-border bg-[#F6F6F6]"},{default:u(()=>[i(a,{label:"",prop:"mobile","border-bottom":!1},{default:u(()=>[i(o,{modelValue:B.mobile,"onUpdate:modelValue":l[0]||(l[0]=e=>B.mobile=e),type:"number",maxlength:"11",border:"none",placeholder:c(s)("mobilePlaceholder"),class:"!bg-transparent",disabled:S.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]"},null,8,["modelValue","placeholder","disabled"])]),_:1})]),_:1}),i(r,{class:"h-[88rpx] flex w-full items-center px-[30rpx] rounded-[40rpx] box-border bg-[#F6F6F6] mt-[40rpx]"},{default:u(()=>[i(a,{label:"",prop:"code","border-bottom":!1},{default:u(()=>[i(o,{modelValue:B.mobile_code,"onUpdate:modelValue":l[2]||(l[2]=e=>B.mobile_code=e),type:"number",maxlength:"4",border:"none",placeholder:c(s)("codePlaceholder"),class:"!bg-transparent",disabled:S.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]"},{suffix:u(()=>[i(t,{mobile:B.mobile,type:"find_pass",modelValue:B.mobile_key,"onUpdate:modelValue":l[1]||(l[1]=e=>B.mobile_key=e)},null,8,["mobile","modelValue"])]),_:1},8,["modelValue","placeholder","disabled"])]),_:1})]),_:1}),i(r,{class:"h-[88rpx] flex w-full items-center px-[30rpx] rounded-[40rpx] box-border bg-[#F6F6F6] mt-[40rpx]"},{default:u(()=>[i(a,{label:"",prop:"password","border-bottom":!1},{default:u(()=>[i(o,{modelValue:B.password,"onUpdate:modelValue":l[3]||(l[3]=e=>B.password=e),border:"none",password:I.value,maxlength:"40",placeholder:c(s)("passwordPlaceholder"),class:"!bg-transparent",disabled:S.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]"},{suffix:u(()=>[B.password?(d(),p(r,{key:0,onClick:K},{default:u(()=>[i(x,{name:I.value?"eye-off":"eye-fill",color:"#b9b9b9",size:"20"},null,8,["name"])]),_:1})):f("v-if",!0)]),_:1},8,["modelValue","password","placeholder","disabled"])]),_:1})]),_:1}),i(r,{class:"h-[88rpx] flex w-full items-center px-[30rpx] rounded-[40rpx] box-border bg-[#F6F6F6] mt-[40rpx]"},{default:u(()=>[i(a,{label:"",prop:"confirm_password","border-bottom":!1},{default:u(()=>[i(o,{modelValue:B.confirm_password,"onUpdate:modelValue":l[4]||(l[4]=e=>B.confirm_password=e),border:"none",password:E.value,maxlength:"40",placeholder:c(s)("confirmPasswordPlaceholder"),class:"!bg-transparent",disabled:S.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]"},{suffix:u(()=>[B.confirm_password?(d(),p(r,{key:0,onClick:N},{default:u(()=>[i(x,{name:E.value?"eye-off":"eye-fill",color:"#b9b9b9",size:"20"},null,8,["name"])]),_:1})):f("v-if",!0)]),_:1},8,["modelValue","password","placeholder","disabled"])]),_:1})]),_:1})]),_:1},8,["model"]),i(r,{class:"mt-[160rpx]"},{default:u(()=>[i(P,{class:"w-full h-[80rpx] !bg-[var(--primary-color)] text-[26rpx] rounded-[40rpx] leading-[80rpx] font-500 !text-[#fff]",onClick:R},{default:u(()=>[n(m(c(s)("confirm")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})}}}),[["__scopeId","data-v-db8291fb"]]);export{B as default};
