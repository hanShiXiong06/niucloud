import{_ as e}from"./loading-page.vue_vue_type_script_setup_true_lang.5a0da197.js";import{d as a,u as t,L as r,au as s,r as l,s as o,o as n,c as i,w as d,e as u,f as p,g as c,v as f,i as m,j as _,Y as x,ac as g,Z as h,B as j,C as y,b as v,k as b,l as w,m as S,K as k,p as L,z as F,J as I}from"./index-0259f5df.js";import{u as N}from"./useDiyForm.895ccbcd.js";import{d as C}from"./index.abe68e63.js";import{a as R}from"./diy_form.83647cbe.js";import{_ as q}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.d4562dd7.js";import"./u-transition.9813ca7a.js";import"./u-icon.e993510c.js";import"./u-avatar.bc708e92.js";import"./u-popup.6f1fa414.js";import"./u-parse.43b08298.js";import"./top-tabbar.2760179d.js";import"./manifest.452e73d8.js";import"./u-checkbox-group.22792735.js";import"./u-action-sheet.81c10463.js";import"./u-line.2127c15d.js";import"./area-select.vue_vue_type_script_setup_true_lang.57e94a11.js";import"./u-input.8fd8730e.js";import"./u-upload.7e0cb1c9.js";const D=q(a({__name:"personal_form",setup(a){const{setShare:q}=t(),D=N({needLogin:!0});r(e=>{e.form_record_id&&uni.setStorageSync("personalFormRecordId",e.form_record_id)}),s(()=>{uni.removeStorageSync("personalFormRecordId")});const E=l(null);l(null);const J=o(()=>D.requestData),z=()=>{v({url:"/app/pages/index/index",mode:"reLaunch"})};return D.onLoad(e=>{var a;let t=e.share?e.share:null;q(t),null==(a=E.value)||a.refresh(),R({record_id:e.form_record_id}).then(e=>{let a={};e.data&&e.data.recordsFieldList&&e.data.recordsFieldList.forEach(e=>{a[e.field_key]=e.field_value}),D.data.value.forEach(e=>{if(a[e.id])try{e.field.value=JSON.parse(a[e.id]),"FormNumber"!=e.componentName&&"FormIdentity"!=e.componentName||(e.field.value=String(a[e.id]))}catch(t){e.field.value=a[e.id]}})}).catch(()=>{})}),D.onShow(e=>{var a;let t=e.share?e.share:null;t&&q(t),null==(a=E.value)||a.refresh()}),D.onHide(),D.onUnload(),D.onPageScroll(),(a,t)=>{const r=b(w("loading-page"),e),s=S,l=I,o=k,v=L("layout-default-uni");return n(),i(v,null,{default:d(()=>[u(s,{style:_(a.themeColor())},{default:d(()=>[u(r,{loading:p(D).getLoading()},null,8,["loading"]),c(u(s,null,{default:d(()=>[m(" 自定义模板渲染 "),u(s,{class:"diy-template-wrap bg-index",style:_(p(D).pageStyle())},{default:d(()=>[u(C,{ref_key:"diyGroupRef",ref:E,data:p(D).data},null,8,["data"])]),_:1},8,["style"])]),_:1},512),[[f,1==p(J).status&&p(J).error&&0===p(J).error.length&&!p(D).getLoading()]]),p(J).error&&p(J).error.length>0?(n(),i(s,{key:0,class:"w-screen h-screen flex flex-col"},{default:d(()=>[(n(!0),x(h,null,g(p(J).error.slice(0,1),(e,a)=>(n(),i(s,{class:"flex-1 flex flex-col items-center pt-[180rpx] px-[60rpx]",key:a},{default:d(()=>[u(l,{class:"nc-iconfont nc-icon-tanhaoV6mm text-[#ccc] mb-[30rpx] !text-[100rpx]"}),u(s,{class:"text-[38rpx] font-bold mt-3"},{default:d(()=>[j(y(e.title),1)]),_:2},1024),u(s,{class:"p-[30rpx] mt-10 w-full"},{default:d(()=>[u(s,{class:"flex w-full"},{default:d(()=>[u(s,{class:"w-[30%] text-[#999] text-left"},{default:d(()=>[j(y(e.type),1)]),_:2},1024),u(s,{class:"w-[70%] text-left"},{default:d(()=>[j(y(e.desc),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),u(s,{class:"pb-[260rpx]"},{default:d(()=>[u(o,{class:"w-[380rpx] !border-0 h-[80rpx] text-[28rpx] text-[#333] !bg-[#f2f2f2] flex-center font-500 rounded-[20rpx]",plain:!0,onClick:z},{default:d(()=>[j(y(p(F)("close")),1)]),_:1})]),_:1})]),_:1})):m("v-if",!0)]),_:1},8,["style"])]),_:1})}}}),[["__scopeId","data-v-2fce90e9"]]);export{D as default};
