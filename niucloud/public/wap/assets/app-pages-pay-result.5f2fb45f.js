import{_ as t}from"./top-tabbar.2760179d.js";import{d as a,r as e,L as s,o as l,c as o,w as r,e as u,f as n,D as c,B as i,C as p,i as m,j as f,b as d,ah as x,k as _,l as v,J as y,m as b,K as j,p as h,z as g,ai as T}from"./index-0259f5df.js";import{_ as w}from"./u-loading-icon.d4562dd7.js";import{_ as C}from"./u-modal.11814531.js";import{g as k}from"./pay.bf41184e.js";import{t as B}from"./topTabbar.6a4f0c22.js";import"./manifest.452e73d8.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.2127c15d.js";import"./u-popup.6f1fa414.js";import"./u-transition.9813ca7a.js";import"./u-icon.e993510c.js";const L=a({__name:"result",setup(a){const L=e(null),P=e(!1);let R="",S=0,z=0;let V=B().setTopTabbarParam({title:"",isBack:!1});s(t=>{R=t.trade_type,S=t.trade_id,D()});const D=()=>{k(R,S,{}).then(t=>{if(!uni.$u.test.isEmpty(t.data)){if(1==t.data.status&&z<5)return P.value=!0,z++,void setTimeout(()=>{D()},1e3);L.value=t.data,P.value=!1}})},E=()=>{var t;const a=decodeURIComponent(uni.getStorageSync("payReturn"));d(a?{url:a,mode:"reLaunch"}:{url:x(),param:{code:null==(t=L.value)?void 0:t.out_trade_no},mode:"reLaunch"})};return(a,e)=>{const s=_(v("top-tabbar"),t),d=y,x=b,k=j,B=_(v("u-loading-icon"),w),R=_(v("u-modal"),C),S=h("layout-default-uni");return l(),o(S,null,{default:r(()=>[u(x,{style:f(a.themeColor())},{default:r(()=>[L.value?(l(),o(x,{key:0,class:"w-screen h-screen flex flex-col items-center"},{default:r(()=>[u(s,{ref:"topTabbarRef",data:n(V)},null,8,["data"]),u(x,{class:"flex-1 flex flex-col items-center w-full pt-[180rpx]"},{default:r(()=>[u(x,{class:c(["flex items-baseline",{"text-[#06c05d]":2==L.value.status,"text-red":2!=L.value.status}])},{default:r(()=>[u(d,{class:c(["nc-iconfont -mb-[4rpx] !text-[32rpx]",{"nc-icon-duihaoV6mm":2==L.value.status,"nc-icon-tanhaoV6mm":2!=L.value.status}])},null,8,["class"]),u(d,{class:"text-[36rpx] ml-[16rpx] font-500"},{default:r(()=>[i(p(2==L.value.status?"支付成功":"支付失败"),1)]),_:1})]),_:1},8,["class"]),u(x,{class:"text-[56rpx] font-500 mt-[60rpx] price-font"},{default:r(()=>[u(d,{class:"text-[36rpx] mr-[6rpx]"},{default:r(()=>[i(p(n(g)("currency")),1)]),_:1}),u(d,null,{default:r(()=>[i(p(n(T)(L.value.money)),1)]),_:1})]),_:1})]),_:1}),u(x,{class:"pb-[260rpx]"},{default:r(()=>[u(k,{class:"w-[380rpx] !border-0 h-[80rpx] text-[28rpx] text-[#333] !bg-[#f2f2f2] flex-center font-500 rounded-[20rpx]",plain:!0,onClick:E},{default:r(()=>[i(p(2==L.value.status?n(g)("complete"):n(g)("close")),1)]),_:1})]),_:1})]),_:1})):m("v-if",!0),u(R,{show:P.value,showCancelButton:!0,confirmText:n(g)("pay.completePay"),cancelText:n(g)("pay.incompletePay"),onCancel:E,confirmColor:"var(--primary-color)"},{default:r(()=>[u(x,{class:"py-[20rpx]"},{default:r(()=>[u(B,{text:n(g)("pay.getting"),textSize:"16",mode:"circle",vertical:!0},null,8,["text"])]),_:1})]),_:1},8,["show","confirmText","cancelText"])]),_:1},8,["style"])]),_:1})}}});export{L as default};
