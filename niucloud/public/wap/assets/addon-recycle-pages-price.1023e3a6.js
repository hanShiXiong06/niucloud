import{a4 as e,a5 as t,a6 as a,av as s,ab as l,at as i,ax as n,ay as r,o as c,c as o,w as d,aw as u,D as h,j as m,i as p,m as g,d as f,q as y,s as _,r as v,ad as b,y as k,H as C,O as w,e as x,Y as D,a9 as I,Z as S,B as $,f as j,n as P,az as z,aA as F,aB as A,k as B,l as N,J as W,au as G,p as H,S as T,b as q,g as R,C as J,v as L,aC as M,R as O,aD as U}from"./index-5dd3a833.js";import{_ as V}from"./u-icon.2d8c39b5.js";import{_ as Y}from"./_plugin-vue_export-helper.1b428a4d.js";import{g as Z}from"./recycle.cd28f6bd.js";import{g as E}from"./payment.f4d35c81.js";const K=Y({name:"u-grid-item",mixins:[t,a,{props:{name:{type:[String,Number,null],default:()=>e.gridItem.name},bgColor:{type:String,default:()=>e.gridItem.bgColor}}}],data:()=>({parentData:{col:0,border:!0},classes:[]}),mounted(){this.init()},emits:["click"],computed:{width(){return this.parentData.col>0?100/Number(this.parentData.col)+"%":0},itemStyle(){const e={background:this.bgColor,width:this.width};return s(e,l(this.customStyle))}},methods:{init(){i("$uGridItem",()=>{this.gridItemClasses()}),this.updateParentData(),n("$uGridItem"),this.gridItemClasses()},updateParentData(){this.getParentData("u-grid")},clickHandler(){var e;let t=this.name;const a=null==(e=this.parent)?void 0:e.children;a&&null===this.name&&(t=a.findIndex(e=>e===this)),this.parent&&this.parent.childClick(t),this.$emit("click",t)},async getItemWidth(){let e=0;if(this.parent){e=await this.getParentWidth()/Number(this.parentData.col)+"px"}this.width=e},getParentWidth(){},gridItemClasses(){if(this.parentData.border){let e=[];this.parent.children.map((t,a)=>{if(this===t){const t=this.parent.children.length;(a+1)%this.parentData.col!==0&&a+1!==t&&e.push("u-border-right");a<t-(t%this.parentData.col===0?this.parentData.col:t%this.parentData.col)&&e.push("u-border-bottom")}}),this.classes=e}}},beforeUnmount(){r("$uGridItem")}},[["render",function(e,t,a,s,l,i){const n=g;return l.parentData.col>0?(c(),o(n,{key:0,class:h(["u-grid-item",l.classes]),"hover-class":"u-grid-item--hover-class","hover-stay-time":200,onClick:i.clickHandler,style:m([i.itemStyle])},{default:d(()=>[u(e.$slots,"default",{},void 0,!0)]),_:3},8,["onClick","class","style"])):p("v-if",!0)}],["__scopeId","data-v-061660c7"]]);const Q=Y({name:"u-grid",mixins:[t,a,{props:{col:{type:[String,Number],default:()=>e.grid.col},border:{type:Boolean,default:()=>e.grid.border},align:{type:String,default:()=>e.grid.align}}}],data:()=>({index:0,width:0}),watch:{parentData(){this.children.length&&this.children.map(e=>{"function"==typeof e.updateParentData&&e.updateParentData()})}},created(){this.children=[]},computed:{parentData(){return[this.hoverClass,this.col,this.size,this.border]},gridStyle(){let e={};switch(this.align){case"left":default:e.justifyContent="flex-start";break;case"center":e.justifyContent="center";break;case"right":e.justifyContent="flex-end"}return s(e,l(this.customStyle))}},emits:["click"],methods:{childClick(e){this.$emit("click",e)}}},[["render",function(e,t,a,s,l,i){const n=g;return c(),o(n,{class:"u-grid",ref:"u-grid",style:m([i.gridStyle])},{default:d(()=>[u(e.$slots,"default",{},void 0,!0)]),_:3},8,["style"])}],["__scopeId","data-v-1edb832b"]]),X=Y(f({__name:"price",setup(e){const t=y(),a=_(()=>t.info),s=v([]),l=v(0),i=e=>{l.value=e.detail.current};let n=v([]),r=v([]);const u=v(0),f=v(0),Y=()=>{P(()=>{setTimeout(()=>{z().select(`#swiper-content-${u.value}`).boundingClientRect(e=>{e&&e.height&&(f.value=Math.max(e.height,100))}).exec()},100)})},X=e=>{u.value=e.detail.current,Y()};b(()=>n.value,()=>{Y()},{deep:!0}),b(()=>n.value.length,e=>{e>0&&Y()}),v([]);const ee=async()=>{const e=await E();1===e.code&&0===e.data.length&&F({url:"/addon/recycle/pages/payment/index"})};k(async()=>{await ee(),a.value||C().setLoginBack({url:"/addon/recycle/pages/index"}),Promise.all([Z()]).then(async([e])=>{1===e.code&&e.data&&(n.value=e.data,r.value=le(e.data),setTimeout(()=>{Y()},300))}).catch(e=>{console.error("数据获取失败:",e)})}),w(async()=>{await ee(),n.value.length>0&&setTimeout(()=>{Y()},300)});const te=e=>{e.startsWith("http")||(e=ae()+e),M({indicator:"number",loop:!0,urls:Array.isArray(e)?e:[e]})},ae=()=>"",se=()=>{F({url:"/addon/recycle/pages/order/order"})};function le(e){return e.reduce((e,t)=>(t.images&&e.push(t),t.child_list&&t.child_list.length&&(e=e.concat(le(t.child_list))),e),[])}return(e,t)=>{const a=O,y=U,_=A,v=g,b=B(N("up-icon"),V),k=W,C=G,w=B(N("up-grid-item"),K),P=B(N("up-grid"),Q),z=H("layout-default-uni");return c(),o(z,null,{default:d(()=>[x(v,{class:"page"},{default:d(()=>[p(" Banner区域 "),s.value.length>0?(c(),o(v,{key:0,class:"banner-section"},{default:d(()=>[x(_,{class:"banner-swiper",circular:"",autoplay:"",interval:"3000",duration:"500",onChange:i},{default:d(()=>[(c(!0),D(S,null,I(s.value,(e,t)=>(c(),o(y,{key:t},{default:d(()=>[x(a,{src:j(T)(e.image),mode:"aspectFill",class:"banner-image"},null,8,["src"])]),_:2},1024))),128))]),_:1}),x(v,{class:"banner-indicator"},{default:d(()=>[(c(!0),D(S,null,I(s.value,(e,t)=>(c(),o(v,{key:t,class:h(["indicator-dot",l.value===t?"active":""])},null,8,["class"]))),128))]),_:1})]),_:1})):p("v-if",!0),p(" 快捷操作区 "),x(v,{class:"quick-actions"},{default:d(()=>[x(v,{class:"action-item floating-btn",onClick:se},{default:d(()=>[x(b,{name:"file-text",size:"24",color:"#ffffff"}),x(k,null,{default:d(()=>[$("立即下单")]),_:1})]),_:1}),x(v,{class:"action-item",onClick:t[0]||(t[0]=e=>j(q)({url:"/addon/recycle/pages/order/list"}))},{default:d(()=>[x(b,{name:"order",size:"24",color:"#007AFF"}),x(k,null,{default:d(()=>[$("我的订单")]),_:1})]),_:1}),x(v,{class:"action-item",onClick:t[1]||(t[1]=e=>j(q)({url:"/addon/recycle/pages/payment/index"}))},{default:d(()=>[x(b,{name:"rmb-circle",size:"24",color:"#007AFF"}),x(k,null,{default:d(()=>[$("收款方式")]),_:1})]),_:1})]),_:1}),p(" 分类列表区 "),x(v,{class:"category-section"},{default:d(()=>[p(" 分类导航 "),x(C,{class:"category-nav","scroll-x":"","scroll-into-view":`nav-${u.value}`,"scroll-with-animation":""},{default:d(()=>[x(v,{class:"nav-items"},{default:d(()=>[(c(!0),D(S,null,I(j(n),(e,t)=>R((c(),o(v,{key:t,id:`nav-${t}`,class:h(["nav-item",{active:u.value===t}]),onClick:e=>(e=>{u.value=e,Y()})(t)},{default:d(()=>[$(J(e.category_name),1)]),_:2},1032,["id","class","onClick"])),[[L,e.is_show]])),128))]),_:1})]),_:1},8,["scroll-into-view"]),p(" 分类内容 "),x(_,{class:"swiper-box",current:u.value,onChange:X,style:m({height:f.value+"px"})},{default:d(()=>[(c(!0),D(S,null,I(j(n),(e,t)=>(c(),o(y,{key:t},{default:d(()=>[x(C,{"scroll-y":"",class:"swiper-item-scroll"},{default:d(()=>[x(v,{class:"swiper-item-content",id:"swiper-content-"+t},{default:d(()=>[e.child_list&&e.child_list.length?(c(),o(v,{key:0,class:"category-content"},{default:d(()=>[x(P,{border:!1,col:"4"},{default:d(()=>{return[(c(!0),D(S,null,I((t=e,t.child_list.filter(e=>e.is_show)),(e,t)=>(c(),o(w,{key:t,onClick:t=>(e=>{const t=r.value.find(t=>t.category_id===e);t&&t.images&&te(t.images)})(e.category_id),class:"grid-item"},{default:d(()=>[x(v,{class:"grid-item-content"},{default:d(()=>[x(v,{class:"brand-icon"},{default:d(()=>[x(b,{customStyle:{padding:"10rpx"},name:j(T)(e.image),size:40},null,8,["name"])]),_:2},1024),x(k,{class:"brand-name"},{default:d(()=>[$(J(e.category_name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))];var t}),_:2},1024)]),_:2},1024)):(c(),o(v,{key:1,class:"empty-category"},{default:d(()=>[x(b,{name:"info",size:"24",color:"#999"}),x(k,null,{default:d(()=>[$("无报价信息")]),_:1})]),_:1}))]),_:2},1032,["id"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["current","style"])]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-2a98ecb9"]]);export{X as default};
