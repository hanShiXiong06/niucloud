import{d as e,r as a,O as t,N as l,o as r,c as s,w as x,e as p,f as c,B as n,g as o,v as u,D as i,i as f,j as d,M as m,ak as v,b as g,E as _,J as h,m as y,R as b,I as w,k as j,l as C,p as k,S as V}from"./index-c3bd19d7.js";import{_ as I}from"./loading-page.vue_vue_type_script_setup_true_lang.b745a0f5.js";import{g as z,a as F}from"./verify.59dac3cc.js";import{_ as S}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.e306857f.js";import"./u-transition.35c8ef6d.js";const E=S(e({__name:"index",setup(e){const S=a("manualInput");S.value="manualInput";const E=a(!1),O=a(""),R=a(!0),Z=a(!1);t(()=>{l()&&B()});const B=()=>{z().then(e=>{e.data?(Z.value=!0,R.value=!1):(Z.value=!1,R.value=!1)})},D=()=>{m()&&(v.init(),v.scanQRCode(e=>{if(e.resultStr){let a=e.resultStr;g({url:"/app/pages/verify/verify",param:{code:a}})}}))};let H=!1;const J=()=>/[\S]+/.test(O.value)?!H&&(H=!0,void F({code:O.value}).then(e=>{H=!1,g({url:"/app/pages/verify/verify",param:{code:O.value}})}).catch(()=>{H=!1})):(_({title:"请输入核销码",icon:"none"}),!1),M=()=>{E.value=!E.value},N=e=>{"sweepCode"!=e||m()?S.value=e:_({title:"H5端不支持扫码核销",icon:"none"})};return(e,a)=>{const t=h,l=y,m=b,v=w,_=j(C("loading-page"),I),z=k("layout-default-uni");return r(),s(z,null,{default:x(()=>[p(l,{style:d(e.themeColor())},{default:x(()=>[!R.value&&Z.value?(r(),s(l,{key:0,class:"w-[100vw] min-h-[100vh] bg-[#f8f8f8]"},{default:x(()=>[p(l,{class:"w-full bg-[#fff] verify-box h-[760rpx]"},{default:x(()=>[p(l,{class:"text-[var(--primary-color)] fixed top-[40rpx] right-[30rpx] flex items-center",onClick:a[0]||(a[0]=e=>c(g)({url:"/app/pages/verify/record"}))},{default:x(()=>[p(t,{class:"nc-iconfont nc-icon-lishijiluV6xx !text-[28rpx] -mb-[2rpx]"}),p(t,{class:"text-[26rpx] ml-[8rpx]"},{default:x(()=>[n("核销记录")]),_:1})]),_:1}),o(p(l,{class:"flex flex-col items-center justify-center"},{default:x(()=>[p(l,{class:"sweep-code flex items-center justify-center",onClick:D},{default:x(()=>[p(m,{class:"w-[354rpx] h-[354rpx]",src:c(V)("static/resource/images/verify/saoma.png")},null,8,["src"])]),_:1}),p(l,{class:"mt-[40rpx] text-[30rpx]"},{default:x(()=>[n("点击扫描二维码")]),_:1}),p(l,{class:"mt-[20rpx] text-[var(--text-color-light9)] text-[26rpx] font-400 pb-[142rpx]"},{default:x(()=>[n("扫描二维码进行核销")]),_:1})]),_:1},512),[[u,"sweepCode"==S.value]]),o(p(l,null,{default:x(()=>[p(l,{class:"flex pt-[126rpx] items-center justify-center"},{default:x(()=>[p(l,{class:"flex justify-center items-center flex-col pr-[30rpx] min-w-[130rpx]"},{default:x(()=>[p(m,{class:"w-[100rpx] h-[100rpx]",src:c(V)("static/resource/images/verify/shuruhexiaoma.png")},null,8,["src"]),p(l,{class:"text-[26rpx] h-[36rpx] leading-[36rpx] mt-[14rpx]"},{default:x(()=>[n("验证核销码")]),_:1})]),_:1}),p(m,{class:"w-[74rpx] h-[12rpx] mb-[50rpx]",src:c(V)("static/resource/images/verify/youjiantou.png")},null,8,["src"]),p(l,{class:"flex justify-center items-center flex-col pl-[30rpx] min-w-[130rpx]"},{default:x(()=>[p(m,{class:"w-[100rpx] h-[100rpx]",src:c(V)("static/resource/images/verify/hexiao1.png")},null,8,["src"]),p(l,{class:"text-[26rpx] h-[36rpx] leading-[36rpx] mt-[14rpx]"},{default:x(()=>[n("核销")]),_:1})]),_:1})]),_:1}),p(l,{class:"mt-[50rpx]"},{default:x(()=>[p(l,{class:"h-[90rpx] border-[2rpx] border-solid border-[#eee] rounded-[16rpx] box-border p-[20rpx] mx-[60rpx] flex items-center"},{default:x(()=>[p(t,{class:"nc-iconfont nc-icon-saotiaoxingmaV6xx text-[44rpx] text-[#EF000C]"}),p(v,{type:"text",placeholder:"请输入核销码",class:"h-[90rpx] border-none text-start ml-[30rpx] text-[28rpx] flex-1","placeholder-class":"_placeholder",modelValue:O.value,"onUpdate:modelValue":a[1]||(a[1]=e=>O.value=e),focus:E.value,ref:"input"},null,8,["modelValue","focus"])]),_:1}),p(l,{class:"h-[80rpx] primary-btn-bg min-w-[630rpx] text-[#fff] flex-center !text-[26rpx] save-btn rounded-[100rpx] h-[80rpx] font-500 mx-[60rpx] mt-[146rpx] relative z-1",onClick:J},{default:x(()=>[n("核销")]),_:1})]),_:1})]),_:1},512),[[u,"manualInput"==S.value]])]),_:1}),p(l,{class:"w-[630rpx] h-[100rpx] bg-[#fff] mx-[auto] mt-[220rpx] rounded-[90rpx] flex relative action-type-wrap"},{default:x(()=>[p(l,{class:i(["relative w-[51%] pr-[50rpx] box-border rounded-[50rpx] z-0 flex flex-col items-center justify-center",{xuanZhong1:"sweepCode"==S.value}]),onClick:a[2]||(a[2]=e=>N("sweepCode"))},{default:x(()=>[p(t,{class:"nc-iconfont nc-icon-saoyisaoV6xx !text-[40rpx]"}),p(l,{class:"text-[24rpx] leading-[1] mt-[10rpx]"},{default:x(()=>[n("扫码核销")]),_:1})]),_:1},8,["class"]),p(l,{class:"flex flex-col items-center flex-col w-[120rpx] h-[120rpx] bg-[#FF7354] rounded-[50%] absolute top-[-10rpx] left-[255rpx] heXiao text-white z-10 shrink-0"},{default:x(()=>[p(l,{class:"nc-iconfont nc-icon-saotiaoxingmaV6xx ns-gradient-otherpages-member-balance-balance-rechange !text-[44rpx] mt-[19rpx]"}),p(l,{class:"text-[24rpx] mt-[8rpx] leading-[34rpx] h-[34rpx]"},{default:x(()=>[n("核销台")]),_:1})]),_:1}),p(l,{class:i(["relative w-[51%] pl-[50rpx] box-border rounded-[50rpx] z-0 flex flex-col items-center justify-center",{xuanZhong:"manualInput"==S.value}]),onClick:a[3]||(a[3]=e=>N("manualInput"))},{default:x(()=>[p(t,{class:"iconfont iconVector-77 !text-[40rpx]"}),p(l,{class:"ml-[20rpx] text-[24rpx] leading-[1] mt-[10rpx]",onClick:M},{default:x(()=>[n("手动输入")]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})):f("v-if",!0),R.value||Z.value?f("v-if",!0):(r(),s(l,{key:1,class:"w-[100vw] min-h-[100vh] bg-[#f8f8f8] overflow-hidden"},{default:x(()=>[p(l,{class:"empty-page"},{default:x(()=>[p(m,{class:"img",src:c(V)("static/resource/images/system/empty.png"),mode:"aspectFit"},null,8,["src"]),p(l,{class:"desc"},{default:x(()=>[n("非核销员无此权限")]),_:1})]),_:1})]),_:1})),p(_,{loading:R.value},null,8,["loading"])]),_:1},8,["style"])]),_:1})}}}),[["__scopeId","data-v-d1f55d8d"]]);export{E as default};
