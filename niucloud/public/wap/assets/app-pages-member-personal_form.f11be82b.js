import{_ as e}from"./loading-page.vue_vue_type_script_setup_true_lang.b745a0f5.js";import{d as t,u as a,L as r,as as s,r as o,s as l,o as i,c as n,w as u,e as p,f as d,g as c,v as f,i as m,j as _,Y as x,a9 as j,Z as g,B as h,C as y,b as v,k as b,l as w,m as S,K as k,p as L,z as F,J as C}from"./index-c3bd19d7.js";import{u as I}from"./useDiyForm.52251fd0.js";import{d as N}from"./index.5249df87.js";import{a as D}from"./diy_form.8f05982e.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.e306857f.js";import"./u-transition.35c8ef6d.js";import"./u-icon.fed07783.js";import"./u-popup.3041e24a.js";import"./u-safe-bottom.d8b3ca1a.js";import"./top-tabbar.69347ce8.js";import"./manifest.bb26aff2.js";import"./area-select.vue_vue_type_script_setup_true_lang.57d01e4b.js";import"./u-checkbox.629328c6.js";import"./u-checkbox-group.20dda01a.js";import"./u-button.4f0c93a5.js";import"./u-input.20a1a434.js";import"./u-upload.679b838d.js";import"./u-action-sheet.e4f87e9c.js";import"./u-line.5f9fdeba.js";import"./u-avatar.3cbc3643.js";import"./u-text.cec1c8ef.js";import"./u-parse.6a681d04.js";import"./tabbar.2ac3b53f.js";import"./recycle.43992927.js";const R=E(t({__name:"personal_form",setup(t){const{setShare:E}=a(),R=I({needLogin:!0});r(e=>{e.form_record_id&&uni.setStorageSync("personalFormRecordId",e.form_record_id)}),s(()=>{uni.removeStorageSync("personalFormRecordId")});const q=o(null);o(null);const z=l(()=>R.requestData),B=()=>{v({url:"/app/pages/index/index",mode:"reLaunch"})};return R.onLoad(e=>{var t;let a=e.share?e.share:null;E(a),null==(t=q.value)||t.refresh(),D({record_id:e.form_record_id}).then(e=>{let t={};e.data&&e.data.recordsFieldList&&e.data.recordsFieldList.forEach(e=>{t[e.field_key]=e.field_value}),R.data.value.forEach(e=>{if(t[e.id])try{e.field.value=JSON.parse(t[e.id]),"FormNumber"!=e.componentName&&"FormIdentity"!=e.componentName||(e.field.value=String(t[e.id]))}catch(a){e.field.value=t[e.id]}})}).catch(()=>{})}),R.onShow(e=>{var t;let a=e.share?e.share:null;a&&E(a),null==(t=q.value)||t.refresh()}),R.onHide(),R.onUnload(),R.onPageScroll(),(t,a)=>{const r=b(w("loading-page"),e),s=S,o=C,l=k,v=L("layout-default-uni");return i(),n(v,null,{default:u(()=>[p(s,{style:_(t.themeColor())},{default:u(()=>[p(r,{loading:d(R).getLoading()},null,8,["loading"]),c(p(s,null,{default:u(()=>[m(" 自定义模板渲染 "),p(s,{class:"diy-template-wrap bg-index",style:_(d(R).pageStyle())},{default:u(()=>[p(N,{ref_key:"diyGroupRef",ref:q,data:d(R).data},null,8,["data"])]),_:1},8,["style"])]),_:1},512),[[f,1==d(z).status&&d(z).error&&0===d(z).error.length&&!d(R).getLoading()]]),d(z).error&&d(z).error.length>0?(i(),n(s,{key:0,class:"w-screen h-screen flex flex-col"},{default:u(()=>[(i(!0),x(g,null,j(d(z).error.slice(0,1),(e,t)=>(i(),n(s,{class:"flex-1 flex flex-col items-center pt-[180rpx] px-[60rpx]",key:t},{default:u(()=>[p(o,{class:"nc-iconfont nc-icon-tanhaoV6mm text-[#ccc] mb-[30rpx] !text-[100rpx]"}),p(s,{class:"text-[38rpx] font-bold mt-3"},{default:u(()=>[h(y(e.title),1)]),_:2},1024),p(s,{class:"p-[30rpx] mt-10 w-full"},{default:u(()=>[p(s,{class:"flex w-full"},{default:u(()=>[p(s,{class:"w-[30%] text-[#999] text-left"},{default:u(()=>[h(y(e.type),1)]),_:2},1024),p(s,{class:"w-[70%] text-left"},{default:u(()=>[h(y(e.desc),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),p(s,{class:"pb-[260rpx]"},{default:u(()=>[p(l,{class:"w-[380rpx] !border-0 h-[80rpx] text-[28rpx] text-[#333] !bg-[#f2f2f2] flex-center font-500 rounded-[20rpx]",plain:!0,onClick:B},{default:u(()=>[h(y(d(F)("close")),1)]),_:1})]),_:1})]),_:1})):m("v-if",!0)]),_:1},8,["style"])]),_:1})}}}),[["__scopeId","data-v-e12df50f"]]);export{R as default};
