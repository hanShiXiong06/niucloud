import{d as e,r as a,x as l,aO as t,ad as i,s,o as c,c as d,w as n,e as o,B as r,C as u,f as m,i as _,Y as f,a9 as p,Z as v,J as y,k,l as b,m as h,au as g,D as C,aP as w,y as x,P as z,Q as V,E as j,A as I,aQ as P,aR as q,aS as F,aC as U,S as $,aT as M,I as T,R as A,K as B,aU as O,aV as R,p as E,aJ as J}from"./index-5dd3a833.js";import{_ as Q}from"./u-icon.2d8c39b5.js";import{_ as S}from"./uni-popup.15132c6d.js";import{g as Z,u as D,a as G,s as K,d as L}from"./payment.f4d35c81.js";import{g as N,e as X,a as Y}from"./return_order.52a39582.js";import{_ as H}from"./u-popup.b109731e.js";import{_ as W}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-transition.22a584d7.js";import"./u-safe-bottom.94dec507.js";const ee=W(e({__name:"area-select",props:{areaId:{type:Number,default:0}},emits:["complete"],setup(e,{expose:x,emit:z}){const V=e,j=a(!1),I=l({province:[],city:[],district:[]}),P=l({province:null,city:null,district:null});t(0).then(e=>{I.province=e.data}).catch(),i(()=>V.areaId,(e,a)=>{e&&!a&&w(e).then(e=>{const{data:a}=e;a.province&&(P.province=a.province),a.city&&(P.city=a.city),a.district&&(P.district=a.district),null==a.city&&a.province&&a.district&&(P.city=a.district,P.district=null)})},{immediate:!0}),i(()=>P.province,e=>{P.city=null,P.district=null,I.district=[],e?t(e.id).then(e=>{I.city=e.data}).catch():I.city=[]},{deep:!0}),i(()=>P.city,e=>{P.district=null,e?t(e.id).then(e=>{const{data:a}=e;I.district=a,a.length||(z("complete",P),j.value=!1)}).catch():I.district=[]},{deep:!0}),i(()=>P.district,e=>{e&&(z("complete",P),j.value=!1)},{deep:!0});const q=()=>{j.value=!1},F=s(()=>{const e=[];return P.province&&e.push(P.province.name),P.city&&e.push(P.city.name),P.district&&e.push(P.district.name),0===e.length?"请选择您所在的地区":e.join(" / ")});return x({open:()=>{j.value=!0}}),(e,a)=>{const l=y,t=k(b("u-icon"),Q),i=h,s=g,w=k(b("u-popup"),H);return c(),d(w,{show:j.value,onClose:a[0]||(a[0]=e=>j.value=!1),mode:"bottom",round:10,"safe-area-inset-bottom":!0},{default:n(()=>[o(i,{class:"area-picker-container"},{default:n(()=>[o(i,{class:"header"},{default:n(()=>[o(l,{class:"title"},{default:n(()=>[r("请选择地区")]),_:1}),o(l,{class:"close-icon",onClick:q},{default:n(()=>[o(t,{name:"close",size:"18",color:"#999"})]),_:1})]),_:1}),o(i,{class:"selected-path"},{default:n(()=>[o(l,null,{default:n(()=>[r(u(m(F)),1)]),_:1})]),_:1}),o(i,{class:"columns"},{default:n(()=>{var e,a,m;return[_(" 省份列 "),o(s,{"scroll-into-view":"province-"+((null==(e=P.province)?void 0:e.id)||""),"scroll-y":"true",class:"column"},{default:n(()=>[(c(!0),f(v,null,p(I.province,e=>(c(),d(i,{key:e.id,id:"province-"+e.id,class:C(["item",{active:P.province&&P.province.id===e.id}]),onClick:a=>P.province=e},{default:n(()=>[o(l,{class:"item-text"},{default:n(()=>[r(u(e.name),1)]),_:2},1024),P.province&&P.province.id===e.id?(c(),d(t,{key:0,name:"checkbox-mark",color:"var(--primary-color)",size:"18"})):_("v-if",!0)]),_:2},1032,["id","class","onClick"]))),128))]),_:1},8,["scroll-into-view"]),_(" 城市列 "),I.city.length?(c(),d(s,{key:0,"scroll-into-view":"city-"+((null==(a=P.city)?void 0:a.id)||""),"scroll-y":"true",class:"column"},{default:n(()=>[(c(!0),f(v,null,p(I.city,e=>(c(),d(i,{key:e.id,id:"city-"+e.id,class:C(["item",{active:P.city&&P.city.id===e.id}]),onClick:a=>P.city=e},{default:n(()=>[o(l,{class:"item-text"},{default:n(()=>[r(u(e.name),1)]),_:2},1024),P.city&&P.city.id===e.id?(c(),d(t,{key:0,name:"checkbox-mark",color:"var(--primary-color)",size:"18"})):_("v-if",!0)]),_:2},1032,["id","class","onClick"]))),128))]),_:1},8,["scroll-into-view"])):_("v-if",!0),_(" 区县列 "),I.district.length?(c(),d(s,{key:1,"scroll-into-view":"district-"+((null==(m=P.district)?void 0:m.id)||""),"scroll-y":"true",class:"column"},{default:n(()=>[(c(!0),f(v,null,p(I.district,e=>(c(),d(i,{key:e.id,id:"district-"+e.id,class:C(["item",{active:P.district&&P.district.id===e.id}]),onClick:a=>P.district=e},{default:n(()=>[o(l,{class:"item-text"},{default:n(()=>[r(u(e.name),1)]),_:2},1024),P.district&&P.district.id===e.id?(c(),d(t,{key:0,name:"checkbox-mark",color:"var(--primary-color)",size:"18"})):_("v-if",!0)]),_:2},1032,["id","class","onClick"]))),128))]),_:1},8,["scroll-into-view"])):_("v-if",!0)]}),_:1})]),_:1})]),_:1},8,["show"])}}}),[["__scopeId","data-v-234c927f"]]),ae=W(e({__name:"index",setup(e){const t=a(null),g=a([]),w=a(!1),H=a(null),W=["微信","支付宝","银行卡"],ae=a(0),le=a({pay_type:"微信",account:"",qrcode_image:"",is_default:0}),te=a(!1),ie=a(!1),se=l({name:"",mobile:"",id_card:"",address:"",card_pic:"",province_id:0,city_id:0,district_id:0,province_name:"",city_name:"",district_name:"",detail_address:""}),ce=l({name:"",mobile:"",id_card:"",card_pic:"",area:"",detail_address:""}),de=a(!1),ne=a(!1),oe=a(0);a(!1);const re=a(null);x(()=>{Ve(),_e(),ie.value=!oe.value});const ue=()=>{oe.value&&(ie.value=!ie.value)},me=()=>{ie.value=!0},_e=async()=>{z({title:"加载认证信息...",mask:!0});try{const e=await N();V(),e&&1===e.code&&e.data&&(se.name=e.data.name||"",se.mobile=e.data.mobile||"",se.id_card=e.data.id_card||"",se.card_pic=e.data.card_pic||"",se.address=e.data.address||"",se.province_id=e.data.province_id||0,se.city_id=e.data.city_id||0,se.district_id=e.data.district_id||0,se.province_name=e.data.province_name||"",se.city_name=e.data.city_name||"",se.district_name=e.data.district_name||"",se.detail_address=e.data.address||"",oe.value=e.data.id||0,he(!1),ie.value=!oe.value)}catch(e){V(),console.error("获取认证信息失败",e),j({title:"认证信息加载失败",icon:"none"})}},fe=(e=!0)=>se.name||oe.value?se.name&&(se.name.length<2||se.name.length>20)&&!oe.value?(e&&(ce.name="姓名长度在2-20个字符之间"),!1):(ce.name="",!0):(e&&(ce.name="请输入姓名"),!1),pe=(e=!0)=>se.mobile||oe.value?!se.mobile||/^1[3-9]\d{9}$/.test(se.mobile)||oe.value?(ce.mobile="",!0):(e&&(ce.mobile="手机号码格式不正确"),!1):(e&&(ce.mobile="请输入手机号码"),!1),ve=(e=!0)=>se.id_card||oe.value?!se.id_card||/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(se.id_card)||oe.value?(ce.id_card="",!0):(e&&(ce.id_card="身份证号码格式不正确"),!1):(e&&(ce.id_card="请输入身份证号码"),!1),ye=(e=!0)=>se.card_pic||oe.value?(ce.card_pic="",!0):(e&&(ce.card_pic="请上传身份证照片"),!1),ke=(e=!0)=>se.province_id?(ce.area="",!0):(e&&(ce.area="请选择所在地区"),!1),be=(e=!0)=>se.detail_address||oe.value?(ce.detail_address="",!0):(e&&(ce.detail_address="请输入详细地址"),!1),he=(e=!0)=>{const a=fe(e),l=pe(e),t=ve(e),i=ye(e),s=ke(e),c=be(e);return a&&l&&t&&i&&s&&c};s(()=>se.name&&se.mobile&&se.id_card&&se.card_pic&&se.province_id&&se.detail_address&&!ce.name&&!ce.mobile&&!ce.id_card&&!ce.card_pic&&!ce.area&&!ce.detail_address);const ge=()=>{ne.value||P({itemList:["从相册选择","拍照"],success:e=>{const a=0===e.tapIndex?["album"]:["camera"];q({count:1,sizeType:["compressed"],sourceType:a,success:e=>{e.tempFilePaths&&e.tempFilePaths.length>0&&Ce(e.tempFilePaths[0])},fail:e=>{e.errMsg&&-1===e.errMsg.indexOf("cancel")&&j({title:"选择图片失败",icon:"none"})}})}})},Ce=async e=>{ne.value=!0;try{const a=await F({filePath:e,name:"file",cate_id:0});1===a.code&&a.data&&a.data.url?(se.card_pic=a.data.url,j({title:"身份证上传成功",icon:"success"}),ye()):j({title:a.msg||"身份证上传失败",icon:"none"})}catch(a){j({title:"身份证上传失败",icon:"none"})}finally{ne.value=!1}},we=()=>{J({title:"确认删除",content:"确定要删除已上传的身份证照片吗？",confirmText:"删除",confirmColor:"#EF4444",cancelText:"取消",success:e=>{e.confirm&&(se.card_pic="",j({title:"身份证照片已删除",icon:"success"}),ye())}})},xe=()=>{se.card_pic&&U({urls:[$(se.card_pic)],current:0,indicator:"number",loop:!1})},ze=async()=>{if(!de.value)if(oe.value){if(!be())return void j({title:"请检查地址信息",icon:"none"});de.value=!0,z({title:"更新地址信息...",mask:!0});const a=se.province_name+se.city_name+se.district_name+se.detail_address;try{let e=await X(oe.value,{...se,address:a});V(),e&&1===e.code?(j({title:"地址更新成功!",icon:"success"}),_e(),ie.value=!1):j({title:e&&e.msg||"地址更新失败",icon:"none"})}catch(e){V(),j({title:"地址更新失败",icon:"none"})}finally{de.value=!1}}else{if(!he(!0))return void j({title:"请完善认证信息",icon:"none"});de.value=!0,z({title:"提交认证信息...",mask:!0});const a=se.province_name+se.city_name+se.district_name+se.detail_address;try{const e=await Y({name:se.name,mobile:se.mobile,id_card:se.id_card,card_pic:se.card_pic,address:a});V(),e&&1===e.code?(j({title:"认证成功!",icon:"success"}),e.data&&e.data.id&&(oe.value=e.data.id),_e()):j({title:e&&e.msg||"认证失败",icon:"none"})}catch(e){V(),j({title:"认证失败",icon:"none"})}finally{de.value=!1}}},Ve=async()=>{try{const e=await Z();1===e.code&&e.data?g.value=Array.isArray(e.data)?e.data:[]:j({title:e&&e.msg||"获取列表失败",icon:"none"})}catch(e){j({title:"获取列表失败",icon:"none"})}},je=e=>{ae.value=e.detail.value,le.value.pay_type=W[ae.value]},Ie=()=>{q({count:1,success:e=>{Pe(e.tempFilePaths[0])},fail:()=>{j({title:"选择图片失败",icon:"none"})}})},Pe=async e=>{te.value=!0;try{const a=await F({filePath:e,name:"file"});1===a.code?a.data&&a.data.url?le.value.qrcode_image=a.data.url:(j({title:"上传响应数据格式错误",icon:"none"}),console.error("Upload response data format error:",a)):j({title:a&&a.msg||"上传失败",icon:"none"})}catch(a){j({title:"上传失败",icon:"none"})}finally{te.value=!1}},qe=async()=>{if("微信"===le.value.pay_type||le.value.account)if("银行卡"===le.value.pay_type||le.value.qrcode_image){z({title:"保存中...",mask:!0});try{if(w.value&&H.value){const e=await D(H.value,le.value);1===e.code?(V(),j({title:"更新成功",icon:"success"}),Ve(),Fe(),Ue()):(V(),j({title:e&&e.msg||"更新失败",icon:"none"}))}else{const e=await G(le.value);1===e.code?(V(),j({title:"添加成功",icon:"success"}),Ve(),Fe(),Ue()):(V(),j({title:e&&e.msg||"添加失败",icon:"none"}))}}catch(e){V(),j({title:"操作失败",icon:"none"})}}else j({title:"请上传收款码",icon:"none"});else j({title:"请输入收款账号",icon:"none"})},Fe=()=>{var e;null==(e=t.value)||e.close(),Ue()},Ue=()=>{w.value=!1,H.value=null,le.value={pay_type:"微信",account:"",qrcode_image:"",is_default:0},ae.value=0},$e=e=>{switch(e){case"微信":return"weixin-fill";case"支付宝":return"zhifubao";case"银行卡":return"rmb";default:return"rmb-circle"}},Me=e=>{se.province_id=e.province.id||0,se.city_id=e.city.id||0,se.district_id=e.district.id||0,se.province_name=e.province.name||"",se.city_name=e.city.name||"",se.district_name=e.district.name||"",se.detail_address="",ke()};i(()=>[se.province_name,se.city_name,se.district_name,se.detail_address],e=>{const[a,l,t,i]=e;let s="";a&&(s+=a),l&&(s+=` ${l}`),t&&(s+=` ${t}`),i&&(s+=` ${i}`),se.address=s.trim()},{deep:!0});const Te=()=>{var e;Ue(),null==(e=t.value)||e.open()},Ae=()=>{re.value&&re.value.open()};return(e,a)=>{const l=k(b("up-icon"),Q),i=y,s=h,x=M,z=T,V=A,P=B,q=O,F=R,U=k(b("uni-popup"),S),Z=E("layout-default-uni");return c(),d(Z,null,{default:n(()=>[o(s,{class:"payment-page"},{default:n(()=>[_(" 实名认证信息卡片 (已认证状态可折叠) "),o(s,{class:C(["auth-card",{"auth-card-certified":!!oe.value}])},{default:n(()=>[o(s,{class:"auth-header",onClick:ue},{default:n(()=>[o(s,{class:"auth-left"},{default:n(()=>[oe.value?(c(),d(s,{key:0,class:"auth-status"},{default:n(()=>[o(l,{name:"checkmark-circle-fill",color:"#10b981",size:"20"}),o(i,{class:"status-text"},{default:n(()=>[r("已完成实名认证")]),_:1})]),_:1})):(c(),d(s,{key:1,class:"auth-title"},{default:n(()=>[r("实名认证")]),_:1})),oe.value?_("v-if",!0):(c(),d(s,{key:2,class:"auth-subtitle"},{default:n(()=>[r("完成实名认证后可添加收款方式")]),_:1}))]),_:1}),oe.value?(c(),d(s,{key:0,class:"auth-toggle"},{default:n(()=>[o(l,{name:ie.value?"arrow-up":"arrow-down",size:"20",color:"#64748b"},null,8,["name"])]),_:1})):_("v-if",!0)]),_:1}),_(" 已认证时的简要信息 "),oe.value&&!ie.value?(c(),d(s,{key:0,class:"auth-brief"},{default:n(()=>[o(s,{class:"brief-item"},{default:n(()=>[o(i,{class:"brief-label"},{default:n(()=>[r("姓名")]),_:1}),o(i,{class:"brief-value"},{default:n(()=>[r(u(se.name),1)]),_:1})]),_:1}),o(s,{class:"brief-item"},{default:n(()=>[o(i,{class:"brief-label"},{default:n(()=>[r("手机")]),_:1}),o(i,{class:"brief-value"},{default:n(()=>{return[r(u((e=se.mobile,e?e.substring(0,3)+"****"+e.substring(7):"")),1)];var e}),_:1})]),_:1}),o(s,{class:"brief-item address-item"},{default:n(()=>[o(i,{class:"brief-label"},{default:n(()=>[r("地址")]),_:1}),o(i,{class:"brief-value address-value"},{default:n(()=>[r(u(se.detail_address),1)]),_:1}),o(s,{class:"edit-address",onClick:I(me,["stop"])},{default:n(()=>[o(l,{name:"edit-pen",size:"16",color:"#3b82f6"})]),_:1},8,["onClick"])]),_:1})]),_:1})):_("v-if",!0),_(" 详细表单 "),!oe.value||ie.value?(c(),d(s,{key:1,class:"auth-form"},{default:n(()=>[_(" 姓名 "),o(s,{class:"auth-form-item"},{default:n(()=>[o(x,{class:"label"},{default:n(()=>[r("姓名")]),_:1}),o(z,{class:C(["input",{"disabled-input":!!oe.value}]),modelValue:se.name,"onUpdate:modelValue":a[0]||(a[0]=e=>se.name=e),modelModifiers:{trim:!0},placeholder:"请输入您的真实姓名",onInput:a[1]||(a[1]=e=>fe()),onBlur:a[2]||(a[2]=e=>fe()),disabled:!!oe.value},null,8,["class","modelValue","disabled"]),ce.name?(c(),d(i,{key:0,class:"error-text"},{default:n(()=>[r(u(ce.name),1)]),_:1})):_("v-if",!0)]),_:1}),_(" 手机号 "),o(s,{class:"auth-form-item"},{default:n(()=>[o(x,{class:"label"},{default:n(()=>[r("手机号")]),_:1}),o(z,{class:C(["input",{"disabled-input":!!oe.value}]),type:"number",modelValue:se.mobile,"onUpdate:modelValue":a[3]||(a[3]=e=>se.mobile=e),modelModifiers:{trim:!0},placeholder:"请输入手机号码",maxlength:"11",onInput:a[4]||(a[4]=e=>pe()),onBlur:a[5]||(a[5]=e=>pe()),disabled:!!oe.value},null,8,["class","modelValue","disabled"]),ce.mobile?(c(),d(i,{key:0,class:"error-text"},{default:n(()=>[r(u(ce.mobile),1)]),_:1})):_("v-if",!0)]),_:1}),_(" 身份证号 "),o(s,{class:"auth-form-item"},{default:n(()=>[o(x,{class:"label"},{default:n(()=>[r("身份证号")]),_:1}),o(z,{class:C(["input",{"disabled-input":!!oe.value}]),modelValue:se.id_card,"onUpdate:modelValue":a[6]||(a[6]=e=>se.id_card=e),modelModifiers:{trim:!0},placeholder:"请输入身份证号码",idcard:"",maxlength:"18",onInput:a[7]||(a[7]=e=>ve()),onBlur:a[8]||(a[8]=e=>ve()),disabled:!!oe.value},null,8,["class","modelValue","disabled"]),ce.id_card?(c(),d(i,{key:0,class:"error-text"},{default:n(()=>[r(u(ce.id_card),1)]),_:1})):_("v-if",!0)]),_:1}),_(" 地区选择 "),o(s,{class:"auth-form-item"},{default:n(()=>[o(x,{class:"label"},{default:n(()=>[r("退货地址")]),_:1}),o(s,{class:"input-like area-picker-display",onClick:Ae},{default:n(()=>[se.province_name?(c(),d(i,{key:0},{default:n(()=>[r(u(se.province_name)+" "+u(se.city_name)+" "+u(se.district_name),1)]),_:1})):(c(),d(i,{key:1,class:"placeholder-text"},{default:n(()=>[r("请选择省/市/区")]),_:1}))]),_:1}),ce.area?(c(),d(i,{key:0,class:"error-text"},{default:n(()=>[r(u(ce.area),1)]),_:1})):_("v-if",!0)]),_:1}),_(" 详细地址 "),o(s,{class:"auth-form-item"},{default:n(()=>[o(x,{class:"label"},{default:n(()=>[r("详细地址")]),_:1}),o(z,{class:C(["input",{"highlight-input":!!oe.value}]),modelValue:se.detail_address,"onUpdate:modelValue":a[9]||(a[9]=e=>se.detail_address=e),modelModifiers:{trim:!0},placeholder:"请输入街道、楼牌号等"},null,8,["class","modelValue"]),ce.detail_address?(c(),d(i,{key:0,class:"error-text"},{default:n(()=>[r(u(ce.detail_address),1)]),_:1})):_("v-if",!0)]),_:1}),_(" 身份证照片 (仅在未认证时显示) "),oe.value?_("v-if",!0):(c(),d(s,{key:0,class:"auth-form-item"},{default:n(()=>[o(x,{class:"label"},{default:n(()=>[r("身份证照片")]),_:1}),o(s,{class:"id-card-upload"},{default:n(()=>[_(" 已上传图片 "),se.card_pic?(c(),d(s,{key:0,class:"id-card-preview-wrapper"},{default:n(()=>[o(V,{class:"id-card-preview",src:m($)(se.card_pic),mode:"aspectFill",onClick:xe},null,8,["src"]),o(s,{class:"id-card-delete-btn",onClick:I(we,["stop"])},{default:n(()=>[o(l,{name:"close",size:"12",color:"#fff"})]),_:1},8,["onClick"]),o(s,{class:"id-card-overlay"},{default:n(()=>[o(l,{name:"eye",size:"20",color:"#fff"})]),_:1})]),_:1})):_("v-if",!0),_(" 上传按钮 "),se.card_pic?_("v-if",!0):(c(),d(s,{key:1,class:C(["id-card-upload-trigger",{"is-loading":ne.value}]),onClick:ge},{default:n(()=>[ne.value?(c(),d(s,{key:1,class:"loading-indicator"},{default:n(()=>[o(s,{class:"loading-spinner"}),o(i,null,{default:n(()=>[r("上传中...")]),_:1})]),_:1})):(c(),d(s,{key:0,class:"upload-placeholder"},{default:n(()=>[o(l,{name:"camera-fill",size:"32",color:"#94a3b8"}),o(i,null,{default:n(()=>[r("上传照片")]),_:1})]),_:1}))]),_:1},8,["class"]))]),_:1}),ce.card_pic?(c(),d(i,{key:0,class:"error-text"},{default:n(()=>[r(u(ce.card_pic),1)]),_:1})):_("v-if",!0)]),_:1})),_(" 提交按钮 "),o(s,{class:"auth-submit-area"},{default:n(()=>[o(P,{class:"btn-submit-auth",loading:de.value,onClick:ze},{default:n(()=>[r(u(de.value?"提交中...":oe.value?"更新退货地址":"提交认证信息"),1)]),_:1},8,["loading"])]),_:1})]),_:1})):_("v-if",!0)]),_:1},8,["class"]),_(" 收款方式区域 (仅在认证后显示) "),oe.value?(c(),d(s,{key:0,class:"payment-section"},{default:n(()=>[o(s,{class:"section-header"},{default:n(()=>[o(s,{class:"section-title"},{default:n(()=>[r("收款方式")]),_:1}),o(s,{class:"section-action",onClick:Te},{default:n(()=>[o(l,{name:"plus-circle",size:"18",color:"#3b82f6"}),o(i,null,{default:n(()=>[r("添加")]),_:1})]),_:1})]),_:1}),_(" 添加提示信息 "),g.value.length<2?(c(),d(s,{key:0,class:"payment-tips"},{default:n(()=>[o(l,{name:"info-circle",size:"16",color:"#f59e0b"}),o(i,null,{default:n(()=>[r("收款方式建议添加2种以上，防止出现封卡问题,导致不能收款")]),_:1})]),_:1})):_("v-if",!0),_(" 收款方式列表 "),g.value.length?(c(),d(s,{key:1,class:"payment-list"},{default:n(()=>[(c(!0),f(v,null,p(g.value,e=>(c(),d(s,{class:"payment-item",key:e.id},{default:n(()=>[o(s,{class:"payment-info"},{default:n(()=>[o(s,{class:"payment-type-icon"},{default:n(()=>[o(l,{name:$e(e.pay_type),size:"28",color:"#3b82f6"},null,8,["name"])]),_:2},1024),o(s,{class:"payment-details"},{default:n(()=>[o(s,{class:"payment-type-name"},{default:n(()=>[o(i,null,{default:n(()=>[r(u(e.pay_type),1)]),_:2},1024),e.is_default?(c(),d(i,{key:0,class:"default-tag"},{default:n(()=>[r("默认")]),_:1})):_("v-if",!0)]),_:2},1024),o(s,{class:"account-info"},{default:n(()=>[r(u(e.account),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),o(s,{class:"payment-actions"},{default:n(()=>[e.is_default?_("v-if",!0):(c(),d(s,{key:0,class:"action-item",onClick:a=>(async e=>{try{const a=await K(e);1===a.code?(j({title:"设置成功",icon:"success"}),Ve()):j({title:a&&a.msg||"设置失败",icon:"none"})}catch(a){j({title:"设置失败",icon:"none"})}})(e.id)},{default:n(()=>[o(l,{name:"checkmark-circle",size:"18",color:"#3b82f6"})]),_:2},1032,["onClick"])),o(s,{class:"action-item",onClick:a=>(e=>{var a;w.value=!0,H.value=e.id,le.value={...e},ae.value=W.indexOf(e.pay_type),null==(a=t.value)||a.open()})(e)},{default:n(()=>[o(l,{name:"edit-pen",size:"18",color:"#3b82f6"})]),_:2},1032,["onClick"]),o(s,{class:"action-item",onClick:a=>{return l=e.id,void J({title:"提示",content:"确定要删除该收款方式吗？",success:async e=>{if(e.confirm)try{const e=await L(l);1===e.code?(j({title:"删除成功",icon:"success"}),Ve()):j({title:e&&e.msg||"删除失败",icon:"none"})}catch(a){j({title:"删除失败",icon:"none"})}}});var l}},{default:n(()=>[o(l,{name:"trash",size:"18",color:"#ef4444"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(c(),f(v,{key:2},[_(" 空状态 "),o(s,{class:"empty-payment"},{default:n(()=>[o(l,{name:"wallet",size:"48",color:"#94a3b8"}),o(i,null,{default:n(()=>[r("请添加收款方式")]),_:1}),o(P,{class:"btn-add-empty",onClick:Te},{default:n(()=>[r("添加收款方式")]),_:1})]),_:1})],2112))]),_:1})):_("v-if",!0),_(" 简单版添加/编辑弹窗 "),o(U,{ref_key:"popup",ref:t,type:"center","mask-click":!1},{default:n(()=>[o(s,{class:"popup-content"},{default:n(()=>[o(s,{class:"popup-header"},{default:n(()=>[o(s,{class:"popup-title"},{default:n(()=>[r(u(w.value?"编辑收款方式":"添加收款方式"),1)]),_:1}),o(s,{class:"popup-close",onClick:Fe},{default:n(()=>[o(l,{name:"close",size:"20",color:"#94a3b8"})]),_:1})]),_:1}),o(s,{class:"popup-body"},{default:n(()=>[o(s,{class:"form-item"},{default:n(()=>[o(s,{class:"label"},{default:n(()=>[r("收款方式")]),_:1}),o(q,{onChange:je,value:ae.value,range:W},{default:n(()=>[o(s,{class:"picker"},{default:n(()=>[o(l,{name:$e(W[ae.value]),size:"20",color:"#3b82f6"},null,8,["name"]),o(i,null,{default:n(()=>[r(u(W[ae.value]),1)]),_:1}),o(l,{name:"arrow-down",size:"16",color:"#94a3b8",class:"picker-arrow"})]),_:1})]),_:1},8,["value"])]),_:1}),_(" 收款账号，仅在支付宝和银行卡时显示 "),"微信"!==le.value.pay_type?(c(),d(s,{key:0,class:"form-item"},{default:n(()=>[o(s,{class:"label"},{default:n(()=>[r("收款账号")]),_:1}),o(z,{type:"text",modelValue:le.value.account,"onUpdate:modelValue":a[10]||(a[10]=e=>le.value.account=e),placeholder:"请输入收款账号"},null,8,["modelValue"])]),_:1})):_("v-if",!0),_(" 收款码，仅在微信和支付宝时显示 "),"银行卡"!==le.value.pay_type?(c(),d(s,{key:1,class:"form-item"},{default:n(()=>[o(s,{class:"label"},{default:n(()=>[r("收款码")]),_:1}),o(s,{class:"upload-qrcode",onClick:Ie},{default:n(()=>[o(s,{class:C(["upload-content",{"is-loading":te.value}])},{default:n(()=>[le.value.qrcode_image?(c(),d(V,{key:0,src:m($)(le.value.qrcode_image),mode:"aspectFit"},null,8,["src"])):(c(),d(s,{key:1,class:"upload-placeholder"},{default:n(()=>[o(l,{name:"camera",size:"32",color:"#94a3b8"}),o(i,null,{default:n(()=>[r("上传收款码")]),_:1})]),_:1})),te.value?(c(),d(s,{key:2,class:"loading-overlay"},{default:n(()=>[o(s,{class:"loading-spinner"}),o(i,{class:"loading-text"},{default:n(()=>[r("上传中...")]),_:1})]),_:1})):_("v-if",!0)]),_:1},8,["class"])]),_:1})]),_:1})):_("v-if",!0),o(s,{class:"form-item switch-item"},{default:n(()=>[o(s,{class:"label"},{default:n(()=>[r("设为默认")]),_:1}),o(F,{checked:!!le.value.is_default,size:"mini",onChange:a[11]||(a[11]=e=>le.value.is_default=e.detail.value?1:0),color:"#3b82f6"},null,8,["checked"])]),_:1})]),_:1}),o(s,{class:"popup-footer"},{default:n(()=>[o(P,{class:"btn-cancel",onClick:Fe},{default:n(()=>[r("取消")]),_:1}),o(P,{class:"btn-confirm",onClick:qe},{default:n(()=>[r("确定")]),_:1})]),_:1})]),_:1})]),_:1},512),_(" 地区选择器 "),o(ee,{ref_key:"areaRefAuth",ref:re,onComplete:Me},null,512)]),_:1})]),_:1})}}}),[["__scopeId","data-v-14320a49"]]);export{ae as default};
