import{d as e,a as l,s as r,x as o,r as a,y as t,z as s,o as d,c as p,w as u,e as i,B as n,C as m,f as c,i as f,j as b,a3 as x,b as g,m as _,k as h,l as w,K as v,p as y,T as j}from"./index-c3bd19d7.js";import{_ as P}from"./u-input.20a1a434.js";import{_ as V,a as k}from"./u-form.aa4ab398.js";import{_ as F}from"./sms-code.vue_vue_type_script_setup_true_lang.396ab113.js";import{_ as C}from"./u-icon.fed07783.js";import{t as T}from"./topTabbar.9a3c8195.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.5f9fdeba.js";import"./u-modal.383b850c.js";import"./u-loading-icon.e306857f.js";import"./u-popup.3041e24a.js";import"./u-transition.35c8ef6d.js";import"./u-safe-bottom.d8b3ca1a.js";const B=z(e({__name:"resetpwd",setup(e){const z=l();T().setTopTabbarParam({title:"",topStatusBar:{bgColor:"#fff",textColor:"#333"}}),r(()=>Object.keys(z.menuButtonInfo).length?j(Number(z.menuButtonInfo.height))+j(z.menuButtonInfo.top)+j(8)+"rpx":"auto");const B=o({mobile:"",mobile_code:"",mobile_key:"",password:"",confirm_password:""}),I=a(!0);t(()=>{setTimeout(()=>{I.value=!1},800)});const S=a(!1),U=a(null),q=a(!0),E=a(!0),K=()=>{q.value=!q.value},A=()=>{E.value=!E.value},H={password:{type:"string",required:!0,message:s("passwordPlaceholder"),trigger:["blur","change"]},confirm_password:[{type:"string",required:!0,message:s("confirmPasswordPlaceholder"),trigger:["blur","change"]},{validator:(e,l)=>l==B.password,message:s("confirmPasswordError"),trigger:["change","blur"]}],mobile:[{type:"string",required:!0,message:s("mobilePlaceholder"),trigger:["blur","change"]},{validator:(e,l)=>uni.$u.test.mobile(l),message:s("mobileError"),trigger:["change","blur"]}],mobile_code:{type:"string",required:!0,message:s("codePlaceholder"),trigger:["blur","change"]}},J=()=>{U.value.validate().then(()=>{S.value||(S.value=!0,x(B).then(e=>{g({url:"/app/pages/auth/login",mode:"redirectTo"})}).catch(()=>{S.value=!1}))})};return(e,l)=>{const r=_,o=h(w("u-input"),P),a=h(w("u-form-item"),V),t=h(w("sms-code"),F),x=h(w("u-icon"),C),g=h(w("u-form"),k),j=v,T=y("layout-default-uni");return d(),p(T,null,{default:u(()=>[i(r,{class:"w-screen h-screen flex flex-col",style:b(e.themeColor())},{default:u(()=>[i(r,{class:"mx-[60rpx]"},{default:u(()=>[i(r,{class:"pt-[140rpx] text-[44rpx] font-500 text-[#333]"},{default:u(()=>[n(m(c(s)("findPassword")),1)]),_:1}),i(r,{class:"text-[26rpx] leading-[39rpx] text-[var(--text-color-light6)] mt-[24rpx] mb-[90rpx]"},{default:u(()=>[n(m(c(s)("findPasswordTip")),1)]),_:1}),i(g,{labelPosition:"left",model:B,errorType:"toast",rules:H,ref_key:"formRef",ref:U},{default:u(()=>[i(r,{class:"h-[88rpx] flex w-full items-center px-[30rpx] rounded-[40rpx] box-border bg-[#F6F6F6]"},{default:u(()=>[i(a,{label:"",prop:"mobile","border-bottom":!1},{default:u(()=>[i(o,{modelValue:B.mobile,"onUpdate:modelValue":l[0]||(l[0]=e=>B.mobile=e),type:"number",maxlength:"11",border:"none",placeholder:c(s)("mobilePlaceholder"),class:"!bg-transparent",disabled:I.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]"},null,8,["modelValue","placeholder","disabled"])]),_:1})]),_:1}),i(r,{class:"h-[88rpx] flex w-full items-center px-[30rpx] rounded-[40rpx] box-border bg-[#F6F6F6] mt-[40rpx]"},{default:u(()=>[i(a,{label:"",prop:"code","border-bottom":!1},{default:u(()=>[i(o,{modelValue:B.mobile_code,"onUpdate:modelValue":l[2]||(l[2]=e=>B.mobile_code=e),type:"number",maxlength:"4",border:"none",placeholder:c(s)("codePlaceholder"),class:"!bg-transparent",disabled:I.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]"},{suffix:u(()=>[i(t,{mobile:B.mobile,type:"find_pass",modelValue:B.mobile_key,"onUpdate:modelValue":l[1]||(l[1]=e=>B.mobile_key=e)},null,8,["mobile","modelValue"])]),_:1},8,["modelValue","placeholder","disabled"])]),_:1})]),_:1}),i(r,{class:"h-[88rpx] flex w-full items-center px-[30rpx] rounded-[40rpx] box-border bg-[#F6F6F6] mt-[40rpx]"},{default:u(()=>[i(a,{label:"",prop:"password","border-bottom":!1},{default:u(()=>[i(o,{modelValue:B.password,"onUpdate:modelValue":l[3]||(l[3]=e=>B.password=e),border:"none",password:q.value,maxlength:"40",placeholder:c(s)("passwordPlaceholder"),class:"!bg-transparent",disabled:I.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]"},{suffix:u(()=>[B.password?(d(),p(r,{key:0,onClick:K},{default:u(()=>[i(x,{name:q.value?"eye-off":"eye-fill",color:"#b9b9b9",size:"20"},null,8,["name"])]),_:1})):f("v-if",!0)]),_:1},8,["modelValue","password","placeholder","disabled"])]),_:1})]),_:1}),i(r,{class:"h-[88rpx] flex w-full items-center px-[30rpx] rounded-[40rpx] box-border bg-[#F6F6F6] mt-[40rpx]"},{default:u(()=>[i(a,{label:"",prop:"confirm_password","border-bottom":!1},{default:u(()=>[i(o,{modelValue:B.confirm_password,"onUpdate:modelValue":l[4]||(l[4]=e=>B.confirm_password=e),border:"none",password:E.value,maxlength:"40",placeholder:c(s)("confirmPasswordPlaceholder"),class:"!bg-transparent",disabled:I.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]"},{suffix:u(()=>[B.confirm_password?(d(),p(r,{key:0,onClick:A},{default:u(()=>[i(x,{name:E.value?"eye-off":"eye-fill",color:"#b9b9b9",size:"20"},null,8,["name"])]),_:1})):f("v-if",!0)]),_:1},8,["modelValue","password","placeholder","disabled"])]),_:1})]),_:1})]),_:1},8,["model"]),i(r,{class:"mt-[160rpx]"},{default:u(()=>[i(j,{class:"w-full h-[80rpx] !bg-[var(--primary-color)] text-[26rpx] rounded-[40rpx] leading-[80rpx] font-500 !text-[#fff]",onClick:J},{default:u(()=>[n(m(c(s)("confirm")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})}}}),[["__scopeId","data-v-5f1908b7"]]);export{B as default};
