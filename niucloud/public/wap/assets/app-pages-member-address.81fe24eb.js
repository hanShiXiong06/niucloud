import{d as e,r as a,L as t,O as l,o as s,c as r,w as o,j as u,e as c,Y as d,a9 as n,Z as p,i as f,B as i,C as x,f as m,ce as v,b as _,cf as h,m as b,K as g,au as k,k as y,l as C,p as w,cg as j,A,D as S,z,ch as I,J as B}from"./index-c3bd19d7.js";import{_ as E}from"./u-popup.3041e24a.js";import{M as R}from"./mescroll-empty.9ef6a82f.js";import{_ as T}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-transition.35c8ef6d.js";import"./u-icon.fed07783.js";import"./u-safe-bottom.d8b3ca1a.js";import"./mescroll-i18n.197cf8f2.js";const V=T(e({__name:"address",setup(e){const T=a(!0),V=a(0),D=a([]),J=a(""),K=a("");t(e=>{J.value=e.type||"",K.value=e.source||"",e.type&&(V.value="address"==e.type?0:1),uni.getStorageSync("selectAddressCallback")&&uni.removeStorage({key:"selectAddressCallback"})});l(()=>{v({}).then(({data:e})=>{const a=[],t=[];e.forEach(e=>{"address"==e.type?a.push(e):t.push(e)}),K.value?D.value=0==V.value?a:t:D.value=e,T.value=!1}).catch(()=>{T.value=!1})});const L=()=>{_({url:"/app/pages/member/address_edit",param:{source:K.value}})},M=a(!1),O=a(0),Y=()=>{const e=D.value[O.value];h(e.id).then(()=>{D.value.splice(O.value,1),M.value=!1}).catch()};return(e,a)=>{const t=b,l=B,v=g,h=k,V=y(C("u-popup"),E),J=w("layout-default-uni");return s(),r(J,null,{default:o(()=>[T.value?f("v-if",!0):(s(),r(t,{key:0,class:"address bg-[var(--page-bg-color)] min-h-[100vh]",style:u(e.themeColor())},{default:o(()=>[c(h,{"scroll-y":"true"},{default:o(()=>[D.value.length?(s(),r(t,{key:0,class:"sidebar-margin pt-[var(--top-m)]"},{default:o(()=>[(s(!0),d(p,null,n(D.value,(e,a)=>(s(),r(t,{class:"mb-[var(--top-m)] rounded-[var(--rounded-big)] overflow-hidden"},{default:o(()=>[c(t,{class:"flex flex-col card-template"},{default:o(()=>[c(t,{class:"flex-1 line-feed mr-[20rpx]",onClick:a=>(e=>{const a=uni.getStorageSync("selectAddressCallback");a&&(a.address_id=e.id,uni.setStorage({key:"selectAddressCallback",data:a,success(){_({url:a.back,mode:"redirectTo"})}}))})(e)},{default:o(()=>[c(t,{class:"flex items-center"},{default:o(()=>[c(t,{class:"text-[#333] text-[30rpx] leading-[34rpx] font-500"},{default:o(()=>[i(x(e.name),1)]),_:2},1024),c(l,{class:"text-[#333] text-[30rpx] ml-[10rpx]"},{default:o(()=>[i(x(m(j)(e.mobile)),1)]),_:2},1024)]),_:2},1024),c(t,{class:"mt-[16rpx] text-[26rpx] line-feed text-[var(--text-color-light9)] leading-[1.4]"},{default:o(()=>[i(x(e.full_address),1)]),_:2},1024)]),_:2},1032,["onClick"]),c(t,{class:"flex justify-between pt-[26rpx]"},{default:o(()=>[c(t,{class:"flex items-center text-[26rpx] leading-none",onClick:A(e=>(e=>{const a=D.value[e];a.is_default||(a.is_default=1,I(a).then(()=>{D.value.forEach((a,t)=>{a.is_default&&(a.is_default=0),t==e&&(a.is_default=1)})}).catch())})(a),["stop"])},{default:o(()=>[c(l,{class:S(["iconfont !text-[26rpx] mr-[10rpx]",{"iconduigou text-primary":e.is_default,iconcheckbox_nol:!e.is_default}])},null,8,["class"]),i(" 设为默认 ")]),_:2},1032,["onClick"]),c(t,{class:"flex"},{default:o(()=>[c(t,{class:"text-[26rpx]",onClick:A(a=>{return t=e.id,void _({url:"/app/pages/member/address_edit",param:{id:t,source:K.value}});var t},["stop"])},{default:o(()=>[c(l,{class:"nc-iconfont nc-icon-xiugaiV6xx shrink-0 text-[26rpx] mr-[4rpx]"}),i(" 编辑 ")]),_:2},1032,["onClick"]),c(t,{onClick:A(e=>(e=>{O.value=e,M.value=!0})(a),["stop"]),class:"ml-[40rpx] text-[26rpx]"},{default:o(()=>[c(l,{class:"nc-iconfont nc-icon-shanchu-yuangaizhiV6xx shrink-0 text-[26rpx] mr-[4rpx]"}),i(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1})):f("v-if",!0),D.value.length?f("v-if",!0):(s(),r(R,{key:1,option:{tip:"暂无收货地址"}})),c(t,{class:"w-full footer"},{default:o(()=>[c(t,{class:"py-[var(--top-m)] px-[var(--sidebar-m)] footer w-full fixed bottom-0 left-0 right-0 box-border"},{default:o(()=>[c(v,{"hover-class":"none",class:"primary-btn-bg text-[#fff] h-[80rpx] leading-[80rpx] rounded-[100rpx] text-[26rpx] font-500",onClick:L},{default:o(()=>[i(x(m(z)("createAddress")),1)]),_:1})]),_:1})]),_:1})]),_:1}),c(V,{ref:"popupRef",show:M.value,mode:"center",onClose:a[1]||(a[1]=e=>M.value=!1),round:30,zIndex:"99999",safeAreaInsetBottom:!1},{default:o(()=>[c(t,{class:"bg-[#fff] flex flex-col justify-between w-[610rpx] h-[306rpx] rounded-[30rpx] box-border px-[40rpx] pt-[70rpx] pb-[40rpx] relative overflow-hidden"},{default:o(()=>[c(t,{class:"flex-center mb-[80rpx] text-[#333]"},{default:o(()=>[i("确定要删除该地址吗？")]),_:1}),c(t,{class:"flex-between-center"},{default:o(()=>[c(t,{class:"w-[250rpx] h-[66rpx] rounded-full bg-[#eee] flex-center text-[26rpx] font-500 text-[#333]",onClick:a[0]||(a[0]=e=>M.value=!1)},{default:o(()=>[i("取消")]),_:1}),c(t,{class:"w-[250rpx] h-[66rpx] rounded-full primary-btn-bg flex-center text-[26rpx] font-500 text-[#fff]",onClick:Y},{default:o(()=>[i("确定")]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])]),_:1},8,["style"]))]),_:1})}}}),[["__scopeId","data-v-e4569262"]]);export{V as default};
