import{d as T,r as t,n as q,b8 as F,b2 as W,R as A,$ as R,q as o,h as n,s as U,w as i,e as p,c as v,a as l,t as c,u as s,i as K,C as y,B as $,aH as M,aI as z,K as G,E as J,L as O,V as X,c1 as Y}from"./index-6a69b8ba.js";/* empty css                  *//* empty css                   *//* empty css                 *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                    */import{b as Z}from"./browser-a1ac24ac.js";const ee={key:0,class:"promote-flex flex"},ae={class:"promote-img flex justify-center items-center bg-[#f8f8f8] w-[150px] h-[150px]"},te={class:"px-[20px] flex-1"},oe={class:"mb-[10px]"},se=["href"],le={key:1,class:"promote-flex flex"},ne={class:"promote-img flex justify-center items-center bg-[#f8f8f8] w-[150px] h-[150px]"},pe={class:"w-[150px] h-[150px] text-[14px] text-center leading-[150px]"},ce={key:1,class:"w-[150px] h-[150px] text-[14px] text-center leading-[150px]"},re={key:0,class:"px-[20px] flex-1"},ie=["href"],ye=T({__name:"index",setup(de,{expose:B}){const x=t(!1),d=t("h5"),b=t("");t("");const f=t(""),u=t(""),r=q({path:""});F().then(a=>{b.value=a.data.wap_url});const I=()=>{const a=g.value.map(e=>`${encodeURIComponent(e.name)}=${encodeURIComponent(e.value)}`).join("&");u.value=`${b.value}${h.value}${a?"?"+a:""}`,Z.toDataURL(u.value,{errorCorrectionLevel:"L",margin:0,width:120}).then(e=>{f.value=e})},L=()=>{let a=h.value;a.startsWith("/")&&(a=a.slice(1)),Y({page:a,folder:V.value,params:g.value.map(e=>({column_name:e.name,column_value:e.value}))}).then(e=>{e.data&&(r.path=e.data.weapp_path)})},h=t(""),g=t([]),C=t(""),V=t(""),D=(a,e,m,w)=>{h.value=a,g.value=e,C.value=m,V.value=w,I(),L(),x.value=!0},{copy:N,isSupported:Q,copied:k}=W(),S=a=>{Q.value||R({message:o("notSupportCopy"),type:"warning"}),N(a)};return A(k,()=>{k.value&&R({message:o("copySuccess"),type:"success"})}),B({show:D}),(a,e)=>{const m=M,w=z,E=G,j=J,H=O,P=X;return n(),U(P,{modelValue:x.value,"onUpdate:modelValue":e[2]||(e[2]=_=>x.value=_),title:C.value,width:"500px","destroy-on-close":!0},{default:i(()=>[p(w,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=_=>d.value=_),class:"mb-[10px]"},{default:i(()=>[p(m,{label:"H5",name:"h5"}),p(m,{label:"微信小程序",name:"weapp"})]),_:1},8,["modelValue"]),d.value==="h5"?(n(),v("div",ee,[l("div",ae,[p(E,{src:f.value},null,8,["src"])]),l("div",te,[l("div",oe,c(s(o)("promoteUrl")),1),p(H,{class:"mb-[10px]",readonly:"",value:u.value},{append:i(()=>[p(j,{onClick:e[1]||(e[1]=_=>S(u.value))},{default:i(()=>[K(c(s(o)("copy")),1)]),_:1})]),_:1},8,["value"]),l("a",{class:"text-primary",href:f.value,download:""},c(s(o)("downLoadQRCode")),9,se)])])):y("",!0),d.value==="weapp"?(n(),v("div",le,[l("div",ne,[r.path?(n(),U(E,{key:0,src:s($)(r.path),class:"w-[150px] h-[150px]"},{error:i(()=>[l("div",pe,c(s(o)("configureFailed")),1)]),_:1},8,["src"])):(n(),v("div",ce,c(s(o)("configureFailed")),1))]),r.path?(n(),v("div",re,[l("a",{class:"text-primary",href:s($)(r.path),target:"_blank",download:""},c(s(o)("downLoadQRCode")),9,ie)])):y("",!0)])):y("",!0)]),_:1},8,["modelValue","title"])}}});export{ye as _};
