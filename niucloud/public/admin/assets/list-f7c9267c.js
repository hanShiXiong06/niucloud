import{d as H,y as W,f as Z,r as k,n as A,bS as g,h,c as G,e as a,w as l,a as f,t as p,u as n,i as c,q as e,Z as J,s as y,bT as K,ah as P,E as Q,aH as X,aI as Y,L as ee,M as te,N as ae,a9 as ne,aj as re,as as le,ak as oe,a2 as ie,a3 as se}from"./index-28ce54e5.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                    *//* empty css                  */import{f as pe,m as ce,h as me,t as ue,r as de}from"./printer-89592459.js";const _e={class:"main-container"},fe={class:"flex justify-between items-center mb-[5px]"},ge={class:"text-lg"},he={class:"mt-[10px]"},ve={class:"mt-[16px] flex justify-end"},Me=H({__name:"list",setup(be){const $=W(),v=Z(),N=$.meta.title,s=k(!1),S=o=>{v.push({path:o})},t=A({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{printer_name:""}}),T=k(),m=(o=1)=>{t.loading=!0,t.page=o,pe({page:t.page,limit:t.limit,...t.searchParam}).then(r=>{t.loading=!1,t.data=r.data.data,t.total=r.data.total,K(t.page,t.limit,t.searchParam)}).catch(()=>{t.loading=!1})};m(g(t.searchParam).page);const b=k(!1),C=(o,r)=>{b.value||(b.value=!0,ce({printer_id:o,status:r}).then(u=>{m(g(t.searchParam).page),b.value=!1}))},z=()=>{v.push("/printer/add")},F=o=>{v.push("/printer/edit?printer_id="+o.printer_id)},V=o=>{P.confirm(e("printerDeleteTips"),e("warning"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel"),type:"warning"}).then(()=>{s.value||(s.value=!0,me(o).then(()=>{m(g(t.searchParam).page),s.value=!1}).catch(()=>{s.value=!1}))})},R=o=>{o&&(o.resetFields(),m())},j=o=>{P.confirm(e("testPrintTips"),e("warning"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel"),type:"warning"}).then(()=>{s.value||(s.value=!0,ue(o).then(r=>{s.value=!1}).catch(()=>{s.value=!1}))})},D=o=>{P.confirm(e("refreshTokenTips"),e("warning"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel"),type:"warning"}).then(()=>{s.value||(s.value=!0,de(o).then(r=>{m(g(t.searchParam).page),s.value=!1}).catch(()=>{s.value=!1}))})};return(o,r)=>{const u=Q,x=X,L=Y,M=ee,w=te,I=ae,E=ne,d=re,B=le,U=oe,O=ie,q=se;return h(),G("div",_e,[a(E,{class:"box-card !border-none",shadow:"never"},{default:l(()=>[f("div",fe,[f("span",ge,p(n(N)),1),a(u,{type:"primary",onClick:z},{default:l(()=>[c(p(n(e)("addPrinter")),1)]),_:1})]),a(L,{class:"demo-tabs","model-value":"/printer/list",onTabChange:S},{default:l(()=>[a(x,{label:n(e)("tabPrinterManager"),name:"/printer/list"},null,8,["label"]),a(x,{label:n(e)("tabPrinterTemplate"),name:"/printer/template/list"},null,8,["label"])]),_:1}),a(E,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:l(()=>[a(I,{inline:!0,model:t.searchParam,ref_key:"searchFormRef",ref:T},{default:l(()=>[a(w,{label:n(e)("printerName"),prop:"printer_name"},{default:l(()=>[a(M,{modelValue:t.searchParam.printer_name,"onUpdate:modelValue":r[0]||(r[0]=i=>t.searchParam.printer_name=i),modelModifiers:{trim:!0},placeholder:n(e)("printerNamePlaceholder"),maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(w,null,{default:l(()=>[a(u,{type:"primary",onClick:r[1]||(r[1]=i=>m())},{default:l(()=>[c(p(n(e)("search")),1)]),_:1}),a(u,{onClick:r[2]||(r[2]=i=>R(T.value))},{default:l(()=>[c(p(n(e)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),f("div",he,[J((h(),y(U,{data:t.data,size:"large"},{empty:l(()=>[f("span",null,p(t.loading?"":n(e)("emptyData")),1)]),default:l(()=>[a(d,{prop:"printer_name",label:n(e)("printerName"),"min-width":"220","show-overflow-tooltip":!0},null,8,["label"]),a(d,{prop:"brand_name",label:n(e)("brand"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),a(d,{prop:"print_width",label:n(e)("printWidth"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),a(d,{prop:"status",label:n(e)("status"),"min-width":"80","show-overflow-tooltip":!0},{default:l(({row:i})=>[i.status==1?(h(),y(B,{key:0,type:"success",onClick:_=>C(i.printer_id,0),class:"cursor-pointer"},{default:l(()=>[c(p(n(e)("statusOn")),1)]),_:2},1032,["onClick"])):(h(),y(B,{key:1,type:"info",onClick:_=>C(i.printer_id,1),class:"cursor-pointer"},{default:l(()=>[c(p(n(e)("statusOff")),1)]),_:2},1032,["onClick"]))]),_:1},8,["label"]),a(d,{label:n(e)("operation"),fixed:"right","min-width":"120"},{default:l(({row:i})=>[a(u,{type:"primary",link:"",onClick:_=>j(i.printer_id)},{default:l(()=>[c(p(n(e)("testPrint")),1)]),_:2},1032,["onClick"]),a(u,{type:"primary",link:"",onClick:_=>D(i.printer_id)},{default:l(()=>[c(p(n(e)("refreshToken")),1)]),_:2},1032,["onClick"]),a(u,{type:"primary",link:"",onClick:_=>F(i)},{default:l(()=>[c(p(n(e)("edit")),1)]),_:2},1032,["onClick"]),a(u,{type:"primary",link:"",onClick:_=>V(i.printer_id)},{default:l(()=>[c(p(n(e)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[q,t.loading]]),f("div",ve,[a(O,{"current-page":t.page,"onUpdate:current-page":r[3]||(r[3]=i=>t.page=i),"page-size":t.limit,"onUpdate:page-size":r[4]||(r[4]=i=>t.limit=i),layout:"total, sizes, prev, pager, next, jumper",total:t.total,onSizeChange:r[5]||(r[5]=i=>m()),onCurrentChange:m},null,8,["current-page","page-size","total"])])])]),_:1})])}}});export{Me as default};
