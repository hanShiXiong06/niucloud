import{d as S,r as u,aZ as V,h,c as I,e as a,w as o,a as l,i as d,Z as N,s as T,t as g,u as L,B as $,ah as M,$ as v,E as j,K as F,aj as R,aN as U,ak as Z,a9 as A,a3 as K,p as q,g as z}from"./index-0b74b7aa.js";/* empty css                   *//* empty css                *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                        *//* empty css               *//* empty css                 *//* empty css                        *//* empty css                  */import{g as G,d as H,c as J}from"./recycle_category-b61129a5.js";import{_ as O}from"./banner-edit.vue_vue_type_style_index_0_lang-6e9a22c8.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                */import"./el-form-item-4ed993c7.js";import"./index-50c1a6c1.js";import"./index.vue_vue_type_style_index_0_lang-d61b6ebc.js";import"./attachment-c8c37cd4.js";import"./index.vue_vue_type_script_setup_true_lang-832af570.js";/* empty css                  *//* empty css                  *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                    *//* empty css                        *//* empty css                         */import"./index.vue_vue_type_script_setup_true_lang-00957a82.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-cb8d7a65.js";import"./sortable.esm-be94e56d.js";const Q=c=>(q("data-v-cefaf15b"),c=c(),z(),c),W={class:"banner-manage"},X={class:"flex justify-between items-center mb-[5px]"},Y=Q(()=>l("span",{class:"text-page-title"},"轮播图管理",-1)),ee={class:"flex items-center"},te={class:"mt-[10px]"},ae=S({__name:"banner",setup(c){const p=u(!1),f=u([]),r=u(!1),m=async()=>{p.value=!0;try{const e=await G();f.value=e.data}catch(e){console.error(e)}p.value=!1},b=()=>{var e;(e=r.value)==null||e.setFormData(),r.value.showDialog=!0},y=e=>{var n;(n=r.value)==null||n.setFormData(e),r.value.showDialog=!0},x=e=>{M.confirm("确定要删除该轮播图吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await H(e.id),v.success("删除成功"),m()}catch(n){console.error(n)}})},w=async(e,n)=>{try{await J(e,n),v.success("排序修改成功"),m()}catch(s){console.error(s)}};return V(()=>{m()}),(e,n)=>{const s=j,C=F,_=R,E=U,k=Z,B=A,D=K;return h(),I("div",W,[a(B,{shadow:"never"},{default:o(()=>[l("div",X,[Y,l("div",ee,[a(s,{type:"primary",onClick:b},{default:o(()=>[d(" 添加轮播图 ")]),_:1})])]),l("div",te,[N((h(),T(k,{data:f.value},{empty:o(()=>[l("span",null,g(p.value?"":"暂无数据"),1)]),default:o(()=>[a(_,{label:"轮播图","min-width":"200"},{default:o(({row:t})=>[a(C,{style:{width:"200px",height:"100px"},src:L($)(t.image[0]),fit:"cover","preview-src-list":t.image},null,8,["src","preview-src-list"])]),_:1}),a(_,{prop:"sort",label:"排序",width:"150"},{default:o(({row:t})=>[a(E,{modelValue:t.sort,"onUpdate:modelValue":i=>t.sort=i,min:0,onChange:i=>w(t.id,i)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(_,{prop:"create_at",label:"创建时间","min-width":"160"},{default:o(({row:t})=>[d(g(new Date(t.create_at*1e3).toLocaleString()),1)]),_:1}),a(_,{label:"操作",fixed:"right",align:"right",width:"150"},{default:o(({row:t})=>[a(s,{type:"primary",link:"",onClick:i=>y(t)},{default:o(()=>[d("编辑")]),_:2},1032,["onClick"]),a(s,{type:"danger",link:"",onClick:i=>x(t)},{default:o(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[D,p.value]])])]),_:1}),a(O,{ref_key:"bannerEditRef",ref:r,onComplete:m},null,512)])}}});const Ae=P(ae,[["__scopeId","data-v-cefaf15b"]]);export{Ae as default};
