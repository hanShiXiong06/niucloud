import{d as k,r as d,n as C,l as I,q as n,h as b,s as V,w as s,a as R,e as i,i as y,t as w,u as m,Z as U,M as j,aN as q,N as O,E as $,V as L,a3 as M}from"./index-0b74b7aa.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                 *//* empty css                        */import"./el-form-item-4ed993c7.js";import S from"./index-50c1a6c1.js";import{e as T,a as Z,b as z}from"./recycle_category-b61129a5.js";const A={class:"dialog-footer"},le=k({__name:"banner-edit",emits:["complete"],setup(G,{expose:D,emit:p}){const o=d(!1),t=d(!1),c=d(""),f={id:"",image:"",sort:0},a=C({...f}),_=d(),B=I(()=>({image:[{required:!0,message:n("请输入图片地址"),trigger:"blur"}]})),E=async r=>{t.value||!r||await r.validate(async e=>{e&&(t.value=!0,a.id?T(a.id,a).then(()=>{t.value=!1,o.value=!1,p("complete")}).catch(()=>{t.value=!1}):Z(a).then(()=>{t.value=!1,o.value=!1,p("complete")}).catch(()=>{t.value=!1}))})};return D({showDialog:o,setFormData:async(r=null)=>{if(Object.assign(a,f),o.value=!0,t.value=!0,r){c.value=n("编辑轮播图");try{const{data:e}=await z(r.id);e&&Object.keys(a).forEach(u=>{e[u]!==void 0&&(a[u]=e[u])})}catch(e){console.error(e),t.value=!1;return}}else c.value=n("添加轮播图");t.value=!1}}),(r,e)=>{const u=S,v=j,x=q,N=O,g=$,h=L,F=M;return b(),V(h,{modelValue:o.value,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value=l),title:c.value,width:"480",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:s(()=>[R("span",A,[i(g,{onClick:e[2]||(e[2]=l=>o.value=!1)},{default:s(()=>[y(w(m(n)("cancel")),1)]),_:1}),i(g,{type:"primary",loading:t.value,onClick:e[3]||(e[3]=l=>E(_.value))},{default:s(()=>[y(w(m(n)("confirm")),1)]),_:1},8,["loading"])])]),default:s(()=>[U((b(),V(N,{model:a,"label-width":"120px",ref_key:"formRef",ref:_,rules:m(B),class:"page-form"},{default:s(()=>[i(v,{label:m(n)("轮播图"),prop:"image"},{default:s(()=>[i(u,{modelValue:a.image,"onUpdate:modelValue":e[0]||(e[0]=l=>a.image=l)},null,8,["modelValue"])]),_:1},8,["label"]),i(v,{label:m(n)("排序"),prop:"sort"},{default:s(()=>[i(x,{modelValue:a.sort,"onUpdate:modelValue":e[1]||(e[1]=l=>a.sort=l),min:0,class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[F,t.value]])]),_:1},8,["modelValue","title"])}}});export{le as _};
