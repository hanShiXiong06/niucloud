import{P as U,d as nt,f as st,n as z,r as _,l as re,aZ as ut,h as f,c as N,e as a,w as o,u as B,Y as dt,i as d,dp as it,a as s,F as ne,W as se,s as I,Z as ct,t as m,C as k,dA as mt,$ as b,ah as _e,L as pt,M as _t,bV as ft,a0 as vt,E as bt,N as yt,aH as gt,aI as Et,aj as Ct,b9 as wt,as as ht,a8 as kt,ak as xt,a2 as Vt,a9 as Dt,V as It,a4 as Nt,a1 as Lt,b6 as Tt,al as Pt,am as $t,ae as Ot,af as At,a3 as Ft,p as Mt,g as Rt}from"./index-0b74b7aa.js";/* empty css                   *//* empty css                         *//* empty css                             *//* empty css                 *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                      *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                   *//* empty css                        *//* empty css                    *//* empty css                *//* empty css                  *//* empty css                       */import"./el-form-item-4ed993c7.js";import{_ as Ut}from"./_plugin-vue_export-helper-c27b6911.js";function St(i){return U.get("/recycle/recycle_return_order/lists",{params:i})}function Gt(i,v){return U.put(`/recycle/recycle_return_order/${i}/confirm`,v)}function zt(i,v=""){return U.put(`/recycle/recycle_return_order/${i}/cancel`,{comment:v})}function Bt(i,v){return U.put(`/recycle/recycle_return_order/${i}/status`,v)}function qt(i){return U.delete(`/recycle/recycle_return_order/${i}`)}function jt(){return U.get("/recycle/recycle_return_order/status")}function Yt(i){return U.get(`/recycle/recycle_return_order/${i}/device_info`)}var c=(i=>(i[i.PENDING=0]="PENDING",i[i.RETURNING=1]="RETURNING",i[i.COMPLETED=2]="COMPLETED",i[i.CANCELLED=3]="CANCELLED",i))(c||{});const T={[0]:"待处理",[1]:"退货中",[2]:"已完成",[3]:"已取消"},Zt={[0]:"warning",[1]:"primary",[2]:"success",[3]:"danger"},fe={DELETE:[3,2],CANCEL:[0,1],CONFIRM:[0],COMPLETE:[1]},K=i=>(Mt("data-v-280ab268"),i=i(),Rt(),i),Ht={class:"return-order-list"},Wt=K(()=>s("div",{class:"card-header"},[s("span",null,"退回订单列表"),s("div",{class:"header-actions"})],-1)),Xt={class:"status-cards"},Jt={key:0},Kt={key:1},Qt=["onClick"],ea={key:0,class:"batch-actions"},ta={class:"selected-info"},aa={class:"pagination-container"},la={class:"dialog-footer"},oa={class:"dialog-footer"},ra={class:"scan-tip"},na=K(()=>s("div",{class:"scan-instruction"},"点击输入框后，可直接使用扫码枪扫描快递单号",-1)),sa={class:"dialog-footer"},ua={class:"dialog-footer"},da={key:0},ia={class:"device-list-section"},ca=K(()=>s("h3",null,"退回设备列表",-1)),ma={class:"amount"},pa={key:0,class:"timeline-section"},_a=K(()=>s("h3",null,"订单状态记录",-1)),fa={key:0,class:"timeline-operator"},va={class:"dialog-footer"},ba=nt({__name:"list",setup(i){st();const v=z({order_id:"",express_no:"",status:void 0,create_at:[]});_([{label:T[c.PENDING],value:c.PENDING},{label:T[c.RETURNING],value:c.RETURNING},{label:T[c.COMPLETED],value:c.COMPLETED},{label:T[c.CANCELLED],value:c.CANCELLED}]);const W=_([]),O=_(!1),g=z({page:1,limit:10,total:0});_(!1);const S=_([]),ve=re(()=>S.value.every(t=>fe.DELETE.includes(t.status))),C=_(!1),A=_(null),L=_({all:0,0:0,1:0,2:0,3:0}),be=re(()=>[{status:"all",label:"全部",count:L.value.all},{status:String(c.PENDING),label:T[c.PENDING],count:L.value[c.PENDING]},{status:String(c.RETURNING),label:T[c.RETURNING],count:L.value[c.RETURNING]},{status:String(c.COMPLETED),label:T[c.COMPLETED],count:L.value[c.COMPLETED]},{status:String(c.CANCELLED),label:T[c.CANCELLED],count:L.value[c.CANCELLED]}]),ye=re(()=>W.value.map(t=>{var e;return{...t,deviceCount:((e=t.returnDevices)==null?void 0:e.length)||0,memberInfo:t.member?{name:t.member.nickname||t.member.username,mobile:t.member.mobile||""}:null,statusType:ie(t.status)}})),X=_(!1),p=_({}),J=_(!1),q=z({id:0,comment:""}),Q=_(),j=_(!1),F=z({id:0,comment:""}),ge=_(),G=_(!1),u=z({id:0,order_id:0,express_no:"",express_company:"",remark:"",is_append:!1,return_order_id:0}),ee=_(),ue=_(),Ee=_([{label:"顺丰速运",value:"sf"},{label:"京东速递",value:"jd"},{label:"物流车/自取",value:"物流车/自取"}]),de=()=>{setTimeout(()=>{var t;(t=ue.value)==null||t.focus()},100)},P=(t,e,n="操作失败")=>{var r;if(t&&(t.code===1||t.data&&t.data.code===1))return e&&b.success(e),!0;{const E=((r=t==null?void 0:t.data)==null?void 0:r.msg)||(t==null?void 0:t.msg)||n;return b.error(E),!1}},Ce=async(t,e,n,r)=>{A.value=t,C.value=!0;try{const E=await e();if(P(E,n,r))return x(),M(),!0}catch(E){console.error(`${r}:`,E),b.error(r)}finally{C.value=!1,A.value=null}return!1},we=t=>t==null?"¥0.00":`¥${(typeof t=="string"?parseFloat(t):t).toFixed(2)}`,he=t=>!t.returnDevices||t.returnDevices.length===0?"暂无设备信息":(console.log(t),t.returnDevices.map((e,n)=>{var r,E;return`${n+1}. ${((r=e.device)==null?void 0:r.model)||"未知设备"} (${((E=e.device)==null?void 0:E.imei)||"IMEI未知"})`}).join(`
`)),ke=t=>({[c.PENDING]:"primary",[c.RETURNING]:"warning",[c.COMPLETED]:"success",[c.CANCELLED]:"danger"})[t]||"info",xe=t=>T[t]||"未知状态",Ve=t=>{navigator.clipboard.writeText(t).then(()=>{b.success("已复制到剪贴板")}).catch(()=>{b.error("复制失败")})},x=async()=>{O.value=!0;try{const t={...v,page:g.page,limit:g.limit};if(t.create_at&&t.create_at.length===2){const[n,r]=t.create_at;t.create_at=[`${n} 00:00:00`,`${r} 23:59:59`]}const e=await St(t);if(P(e,"","获取列表失败")){const n=e.data;n.list?(W.value=Array.isArray(n.list)?n.list:[],g.total=n.count||0):n.data?(W.value=Array.isArray(n.data)?n.data:[],g.total=n.total||0,g.page=Number(n.current_page||1),g.limit=Number(n.per_page||10)):W.value=Array.isArray(n)?n:[]}}catch(t){console.error("获取列表失败:",t),b.error("获取列表失败")}finally{O.value=!1}},M=async()=>{var t;try{const e=await jt();P(e,"","获取状态统计失败")&&(L.value={all:0,0:0,1:0,2:0,3:0},(((t=e.data)==null?void 0:t.data)||[]).forEach(r=>{r.status==="all"?L.value.all=r.count:typeof r.status=="string"&&r.status in L.value&&(L.value[r.status]=r.count)}))}catch(e){console.error("获取状态统计失败:",e),b.error("获取状态统计失败")}},De=()=>{g.page=1,x()},Ie=()=>{v.order_id="",v.express_no="",v.status=void 0,v.create_at=[],g.page=1,x()},te=_("all"),Ne=t=>{t==="all"?v.status=void 0:v.status=te.value,g.page=1,x()},Le=t=>{g.limit=t,g.page=1,x()},Te=t=>{g.page=t,x()},ie=t=>Zt[t]||"",Pe=async t=>{try{O.value=!0,p.value=t,X.value=!0}catch(e){console.error("获取订单详情失败:",e),b.error("获取订单详情失败")}finally{O.value=!1}},V=_({}),Y=_(!1),w=z({name:"",mobile:"",address:""}),ae=_(),$e={name:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}]},Oe=()=>{w.name=V.value.name||"",w.mobile=V.value.mobile||"",w.address=V.value.address||"",Y.value=!0},Ae=async()=>{ae.value&&await ae.value.validate(async t=>{if(!t){b.warning("请填写完整的地址信息");return}V.value={...V.value,name:w.name,mobile:w.mobile,address:w.address},Y.value=!1,b.success("地址修改成功")})},Fe=async t=>{var e,n;try{O.value=!0;const r=await Yt(t);if(V.value=((e=r.data)==null?void 0:e.memberAddress)||{},P(r,"","获取设备信息失败")){const E=((n=r.data)==null?void 0:n.data)||r.data||{};if(u.id=t,u.order_id=E.order_id||0,u.express_no="",u.express_company="",u.remark="",u.is_append=!1,u.return_order_id=0,E.order_id){const $=await Me(E.order_id);$&&(u.is_append=!0,u.return_order_id=$.id,u.express_no=$.express_no||"",u.express_company=$.express_company||"",b({type:"info",message:`检测到订单 ${E.order_no||E.order_id} 已有退货单，设备将追加到现有退货单中`}))}G.value=!0,de()}}catch(r){console.error("获取设备信息失败:",r),b.error("获取设备信息失败")}finally{O.value=!1}},Me=async t=>{try{const e=await Ue(t);if(e.data&&e.data.code===1&&e.data.data)return e.data.data}catch(e){console.error("检查现有退货单失败:",e)}return null},Re=async()=>{ee.value&&await ee.value.validate(async t=>{if(!t){b.warning("请填写完整信息");return}C.value=!0,A.value=u.id;try{let e;u.is_append?(e=await Se({device_id:u.id,return_order_id:u.return_order_id,remark:u.remark}),P(e,"设备已成功添加到退货单","添加设备到退货单失败")&&(G.value=!1,x(),M())):(e=await Gt(u.id,{express_no:u.express_no,express_company:u.express_company,remark:u.remark,order_id:u.order_id,member_mobile:V.value.mobile,member_name:V.value.name,return_address:V.value.address}),P(e,"确认退货成功","确认退货失败")&&(G.value=!1,x(),M()))}catch(e){console.error("确认退货失败:",e),b.error("确认退货失败")}finally{C.value=!1,A.value=null}})},Ue=async t=>Promise.resolve({data:{code:1,data:null}}),Se=async t=>Promise.resolve({data:{code:1,msg:"设备已成功添加到退货单"}}),Ge=t=>{F.id=t,F.comment="",j.value=!0},ze=async()=>{C.value=!0;try{const t=await Bt(F.id,{status:c.COMPLETED,comment:F.comment});P(t,"完成退货成功","完成退货失败")&&(j.value=!1,x(),M())}catch(t){console.error("完成退货失败:",t),b.error("完成退货失败")}finally{C.value=!1}},Be=t=>{_e.confirm("确定要删除该退回订单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await Ce(t,()=>qt(t),"删除成功","删除失败")}).catch(()=>{})},qe=async()=>{Q.value&&await Q.value.validate(async t=>{if(!t){b.warning("请填写取消原因");return}C.value=!0;try{const e=await zt(q.id,q.comment);P(e,"取消成功","取消失败")&&(J.value=!1,x(),M())}catch(e){console.error("取消失败:",e),b.error("取消失败")}finally{C.value=!1}})},je=t=>{S.value=t},Ye=()=>{b.success(`已导出选中的 ${S.value.length} 条记录`)},Ze=()=>{const t=S.value.map(e=>e.id);_e.confirm(`确定要删除选中的 ${t.length} 条记录吗？`,"批量删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{b.success("批量删除成功"),x(),M()}).catch(()=>{})},He=()=>{b.success("订单打印功能已触发")},le=(t,e)=>fe[t].includes(e);return ut(()=>{x(),M()}),(t,e)=>{const n=pt,r=_t,E=ft,$=vt,y=bt,Z=yt,We=gt,Xe=Et,h=Ct,ce=wt,oe=ht,Je=kt,me=xt,Ke=Vt,Qe=Dt,H=It,et=Nt,tt=Lt,at=Tt,D=Pt,pe=$t,lt=Ot,ot=At,rt=Ft;return f(),N("div",Ht,[a(Qe,{class:"box-card",shadow:"never"},{header:o(()=>[Wt]),default:o(()=>[a(Z,{model:v,ref:"searchForm","label-width":"100px",inline:""},{default:o(()=>[a(r,{label:"订单号",prop:"order_id"},{default:o(()=>[a(n,{modelValue:v.order_no,"onUpdate:modelValue":e[0]||(e[0]=l=>v.order_no=l),placeholder:"请输入订单号",clearable:""},null,8,["modelValue"])]),_:1}),a(r,{label:"快递单号",prop:"express_no"},{default:o(()=>[a(n,{modelValue:v.express_no,"onUpdate:modelValue":e[1]||(e[1]=l=>v.express_no=l),placeholder:"请输入快递单号",clearable:""},null,8,["modelValue"])]),_:1}),a(r,{label:"创建时间",prop:"create_at"},{default:o(()=>[a(E,{modelValue:v.create_at,"onUpdate:modelValue":e[2]||(e[2]=l=>v.create_at=l),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},null,8,["modelValue"])]),_:1}),a(r,null,{default:o(()=>[a(y,{type:"primary",onClick:De},{default:o(()=>[a($,null,{default:o(()=>[a(B(dt))]),_:1}),d(" 搜索 ")]),_:1}),a(y,{onClick:Ie},{default:o(()=>[a($,null,{default:o(()=>[a(B(it))]),_:1}),d(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"]),s("div",Xt,[a(Xe,{modelValue:te.value,"onUpdate:modelValue":e[3]||(e[3]=l=>te.value=l),onTabClick:Ne},{default:o(()=>[(f(!0),N(ne,null,se(B(be),(l,R)=>(f(),I(We,{label:l.label,name:l.status},null,8,["label","name"]))),256))]),_:1},8,["modelValue"])]),ct((f(),I(me,{data:B(ye),style:{width:"100%","margin-top":"20px"},border:"",onSelectionChange:je},{default:o(()=>[a(h,{type:"selection",width:"55"}),a(h,{prop:"id",label:"ID",width:"80",sortable:""}),a(h,{prop:"order_id",label:"退回订单编号","min-width":"150",sortable:"","show-overflow-tooltip":""}),a(h,{prop:"express_no",label:"快递单号","min-width":"150","show-overflow-tooltip":""}),a(h,{label:"会员信息","min-width":"150"},{default:o(l=>[l.row.memberInfo?(f(),N("div",Jt,[a(ce,{content:l.row.memberInfo.name},{default:o(()=>[s("span",null,m(l.row.memberInfo.name),1)]),_:2},1032,["content"])])):k("",!0),l.row.memberInfo&&l.row.memberInfo.mobile?(f(),N("div",Kt,[a(ce,{content:"点击复制手机号"},{default:o(()=>[s("span",{onClick:R=>Ve(l.row.memberInfo.mobile),class:"clickable-text"},m(l.row.memberInfo.mobile),9,Qt)]),_:2},1024)])):k("",!0)]),_:1}),a(h,{label:"退回设备","min-width":"140"},{default:o(l=>[a(Je,{placement:"top",width:"300",trigger:"hover",content:he(l.row)},{reference:o(()=>[a(oe,{type:"info",effect:"plain"},{default:o(()=>[d(m(l.row.deviceCount)+" 台设备",1)]),_:2},1024)]),_:2},1032,["content"])]),_:1}),a(h,{label:"状态",width:"100"},{default:o(l=>[a(oe,{type:l.row.statusType},{default:o(()=>[d(m(l.row.status_name),1)]),_:2},1032,["type"])]),_:1}),a(h,{prop:"create_at",label:"创建时间","min-width":"180",sortable:""}),a(h,{label:"操作",width:"200",fixed:"right"},{default:o(l=>[a(y,{type:"primary",size:"small",onClick:R=>Pe(l.row)},{default:o(()=>[a($,null,{default:o(()=>[a(B(mt))]),_:1}),d(" 详情 ")]),_:2},1032,["onClick"]),le("CONFIRM",l.row.status)?(f(),I(y,{key:0,type:"success",size:"small",loading:C.value&&A.value===l.row.id,onClick:R=>Fe(l.row.id)},{default:o(()=>[d("确认退货")]),_:2},1032,["loading","onClick"])):k("",!0),le("COMPLETE",l.row.status)?(f(),I(y,{key:1,type:"success",size:"small",loading:C.value&&A.value===l.row.id,onClick:R=>Ge(l.row.id)},{default:o(()=>[d("完成退货")]),_:2},1032,["loading","onClick"])):k("",!0),le("DELETE",l.row.status)?(f(),I(y,{key:2,type:"danger",size:"small",loading:C.value&&A.value===l.row.id,onClick:R=>Be(l.row.id)},{default:o(()=>[d("删除")]),_:2},1032,["loading","onClick"])):k("",!0)]),_:1})]),_:1},8,["data"])),[[rt,O.value]]),S.value.length>0?(f(),N("div",ea,[a(y,{type:"primary",size:"small",onClick:Ye},{default:o(()=>[d("批量导出")]),_:1}),B(ve)?(f(),I(y,{key:0,type:"danger",size:"small",onClick:Ze},{default:o(()=>[d("批量删除")]),_:1})):k("",!0),s("span",ta,"已选择 "+m(S.value.length)+" 项",1)])):k("",!0),s("div",aa,[a(Ke,{"current-page":g.page,"onUpdate:current-page":e[4]||(e[4]=l=>g.page=l),"page-size":g.limit,"onUpdate:page-size":e[5]||(e[5]=l=>g.limit=l),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:g.total,onSizeChange:Le,onCurrentChange:Te},null,8,["current-page","page-size","total"])])]),_:1}),a(H,{modelValue:J.value,"onUpdate:modelValue":e[8]||(e[8]=l=>J.value=l),title:"取消退回订单",width:"500px","close-on-click-modal":!1},{footer:o(()=>[s("span",la,[a(y,{onClick:e[7]||(e[7]=l=>J.value=!1)},{default:o(()=>[d("取消")]),_:1}),a(y,{type:"primary",loading:C.value,onClick:qe},{default:o(()=>[d("确认")]),_:1},8,["loading"])])]),default:o(()=>[a(Z,{model:q,"label-width":"100px",ref_key:"cancelFormRef",ref:Q},{default:o(()=>[a(r,{label:"取消原因",prop:"comment",rules:[{required:!0,message:"请输入取消原因",trigger:"blur"}]},{default:o(()=>[a(n,{modelValue:q.comment,"onUpdate:modelValue":e[6]||(e[6]=l=>q.comment=l),type:"textarea",rows:3,placeholder:"请输入取消原因"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(H,{modelValue:j.value,"onUpdate:modelValue":e[11]||(e[11]=l=>j.value=l),title:"完成退回订单",width:"500px","close-on-click-modal":!1},{footer:o(()=>[s("span",oa,[a(y,{onClick:e[10]||(e[10]=l=>j.value=!1)},{default:o(()=>[d("取消")]),_:1}),a(y,{type:"primary",loading:C.value,onClick:ze},{default:o(()=>[d("确认")]),_:1},8,["loading"])])]),default:o(()=>[a(Z,{model:F,"label-width":"100px",ref_key:"completeFormRef",ref:ge},{default:o(()=>[a(r,{label:"备注"},{default:o(()=>[a(n,{modelValue:F.comment,"onUpdate:modelValue":e[9]||(e[9]=l=>F.comment=l),type:"textarea",rows:3,placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(H,{modelValue:G.value,"onUpdate:modelValue":e[16]||(e[16]=l=>G.value=l),title:"确认退货",width:"500px","close-on-click-modal":!1},{footer:o(()=>[s("span",sa,[a(y,{onClick:Oe},{default:o(()=>[d("修改本次退货地址")]),_:1}),a(y,{onClick:e[15]||(e[15]=l=>G.value=!1)},{default:o(()=>[d("取消")]),_:1}),a(y,{type:"primary",loading:C.value,onClick:Re},{default:o(()=>[d("确认退货")]),_:1},8,["loading"])])]),default:o(()=>[a(Z,{model:u,"label-width":"120px",ref_key:"confirmFormRef",ref:ee},{default:o(()=>[a(r,{label:"快递公司",prop:"express_company"},{default:o(()=>[a(tt,{modelValue:u.express_company,"onUpdate:modelValue":e[12]||(e[12]=l=>u.express_company=l),placeholder:"请选择快递公司",clearable:""},{default:o(()=>[(f(!0),N(ne,null,se(Ee.value,l=>(f(),I(et,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u.express_company!=="物流车/自取"?(f(),I(r,{key:0,label:"快递单号",prop:"express_no",rules:[{required:u.express_company!=="物流车/自取",message:"请输入快递单号",trigger:"blur"}]},{default:o(()=>[a(n,{modelValue:u.express_no,"onUpdate:modelValue":e[13]||(e[13]=l=>u.express_no=l),placeholder:"请输入或扫描快递单号",clearable:"",ref_key:"expressNoInput",ref:ue,onFocus:de},null,8,["modelValue"])]),_:1},8,["rules"])):k("",!0),a(r,{label:"备注",prop:"remark"},{default:o(()=>[a(n,{modelValue:u.remark,"onUpdate:modelValue":e[14]||(e[14]=l=>u.remark=l),type:"textarea",rows:2,placeholder:"请输入备注信息(选填)"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),s("div",ra,[a(at,{title:"支持扫码枪录入快递单号",type:"info",closable:!1,"show-icon":""},{default:o(()=>[na]),_:1})]),s("div",null,[a(pe,{column:2,border:""},{default:o(()=>[a(D,{label:"退货地址"},{default:o(()=>[s("div",null,[s("p",null,"联系人:"+m(V.value.name),1),s("p",null,"手机号:"+m(V.value.mobile),1),s("p",null,"地址: "+m(V.value.address),1)])]),_:1})]),_:1})])]),_:1},8,["modelValue"]),a(H,{modelValue:Y.value,"onUpdate:modelValue":e[21]||(e[21]=l=>Y.value=l),title:"修改本次退货地址",width:"500px","close-on-click-modal":!1},{footer:o(()=>[s("span",ua,[a(y,{onClick:e[20]||(e[20]=l=>Y.value=!1)},{default:o(()=>[d("取消")]),_:1}),a(y,{type:"primary",onClick:Ae},{default:o(()=>[d("确认修改")]),_:1})])]),default:o(()=>[a(Z,{ref_key:"editAddressFormRef",ref:ae,model:w,rules:$e,"label-width":"80px"},{default:o(()=>[a(r,{label:"联系人",prop:"name"},{default:o(()=>[a(n,{modelValue:w.name,"onUpdate:modelValue":e[17]||(e[17]=l=>w.name=l),placeholder:"请输入联系人姓名"},null,8,["modelValue"])]),_:1}),a(r,{label:"手机号",prop:"mobile"},{default:o(()=>[a(n,{modelValue:w.mobile,"onUpdate:modelValue":e[18]||(e[18]=l=>w.mobile=l),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),a(r,{label:"详细地址",prop:"address"},{default:o(()=>[a(n,{modelValue:w.address,"onUpdate:modelValue":e[19]||(e[19]=l=>w.address=l),type:"textarea",rows:3,placeholder:"请输入详细地址"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(H,{modelValue:X.value,"onUpdate:modelValue":e[23]||(e[23]=l=>X.value=l),title:"退回订单详情",width:"800px","close-on-click-modal":!1,"destroy-on-close":""},{footer:o(()=>[s("span",va,[a(y,{onClick:e[22]||(e[22]=l=>X.value=!1)},{default:o(()=>[d("关闭")]),_:1}),a(y,{type:"primary",onClick:He},{default:o(()=>[d("打印订单")]),_:1})])]),default:o(()=>[a(pe,{column:2,border:""},{default:o(()=>[a(D,{label:"订单编号"},{default:o(()=>[d(m(p.value.order_id),1)]),_:1}),a(D,{label:"创建时间"},{default:o(()=>[d(m(p.value.create_at),1)]),_:1}),a(D,{label:"订单状态"},{default:o(()=>[a(oe,{type:ie(p.value.status)},{default:o(()=>[d(m(p.value.status_name),1)]),_:1},8,["type"])]),_:1}),a(D,{label:"操作人"},{default:o(()=>[d(m(p.value.operator_name),1)]),_:1}),a(D,{label:"快递公司"},{default:o(()=>[d(m(p.value.express_company),1)]),_:1}),a(D,{label:"快递单号"},{default:o(()=>[d(m(p.value.express_no||"无"),1)]),_:1}),a(D,{label:"备注"},{default:o(()=>[d(m(p.value.comment),1)]),_:1}),a(D,{label:"会员信息",span:2},{default:o(()=>[p.value.member?(f(),N("div",da,[s("p",null,"姓名："+m(p.value.member.nickname||p.value.member.username),1),s("p",null,"手机："+m(p.value.member.mobile),1)])):k("",!0)]),_:1}),p.value.return_address?(f(),I(D,{key:0,label:"退货地址",span:2},{default:o(()=>[s("div",null,[s("p",null,"联系人:"+m(p.value.member_name),1),s("p",null,"手机号:"+m(p.value.member_mobile),1),s("p",null,"地址:"+m(p.value.return_address),1)])]),_:1})):k("",!0),p.value.remark?(f(),I(D,{key:1,label:"备注"},{default:o(()=>[d(m(p.value.remark||"无"),1)]),_:1})):k("",!0)]),_:1}),s("div",ia,[ca,a(me,{data:p.value.returnDevices||[],stripe:"",border:"",style:{width:"100%","margin-top":"10px"}},{default:o(()=>[a(h,{prop:"device.model",label:"设备名称","min-width":"150"}),a(h,{prop:"device.imei",label:"IMEI","min-width":"150"}),a(h,{prop:"remark",label:"退回原因","min-width":"150"}),a(h,{prop:"price",label:"设备最终定价",width:"200"},{default:o(l=>[s("span",ma,m(we(l.row.final_price)),1)]),_:1})]),_:1},8,["data"])]),p.value.logs&&p.value.logs.length?(f(),N("div",pa,[_a,a(ot,null,{default:o(()=>[(f(!0),N(ne,null,se(p.value.logs,(l,R)=>(f(),I(lt,{key:R,timestamp:l.create_at,type:ke(l.status)},{default:o(()=>[s("div",null,m(l.comment||xe(l.status)),1),l.operator?(f(),N("div",fa,"操作人："+m(l.operator),1)):k("",!0)]),_:2},1032,["timestamp","type"]))),128))]),_:1})])):k("",!0)]),_:1},8,["modelValue"])])}}});const qa=Ut(ba,[["__scopeId","data-v-280ab268"]]);export{qa as default};
