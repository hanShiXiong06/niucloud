import{d as F,r as u,n as T,e3 as $,R as A,h as s,c as n,e as f,w as p,a as l,u as v,dY as D,F as O,W as R,s as V,B as W,t as _,i as C,C as x,as as Y,a4 as G,a0 as H,a1 as J,a2 as K,p as Q,g as X}from"./index-0b74b7aa.js";/* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  */import{p as Z}from"./member-cf62c19b.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";const S=c=>(Q("data-v-05d034c2"),c=c(),X(),c),ee={class:"w-full"},te={class:"flex items-center py-1 px-1.5 hover:bg-gray-50 rounded transition-colors"},ae={class:"relative flex-shrink-0 mr-2"},le={class:"w-7 h-7 rounded-full overflow-hidden ring-1 ring-gray-200"},se=["src","alt"],oe={key:1,class:"w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white font-medium text-xs"},ne=S(()=>l("div",{class:"absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-400 rounded-full border border-white"},null,-1)),re={class:"flex-1 min-w-0"},ce={class:"flex items-center gap-1 leading-tight"},ie={class:"text-sm font-medium text-gray-900 truncate"},de={class:"text-xs text-gray-500 font-mono bg-gray-100 px-1 py-0.5 rounded mr-1"},ue={key:0,class:"text-xs text-blue-600 font-medium -mt-0.5"},pe={class:"flex flex-col items-center justify-center py-8 px-4"},_e={class:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4"},me={key:0,class:"text-sm text-gray-500 mb-2"},ge={key:1,class:"text-sm text-gray-500 mb-2"},he=S(()=>l("p",{class:"text-xs text-gray-400"}," 支持昵称、手机号、用户编号搜索 ",-1)),fe={key:0,class:"flex justify-center mt-3"},ve=F({__name:"index",props:{modelValue:{type:[Number,String],default:null},placeholder:{type:String,default:"请输入用户昵称、手机号或用户编号搜索"},showPagination:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(c,{emit:m}){const y=c,i=u(y.modelValue),o=u([]),d=u(!1),g=u(!1),h=u(0),r=T({page:1,limit:10,keyword:"",register_type:"",member_label:"",register_channel:"",member_level:""}),j=e=>{const a=[];return e.nickname&&a.push(e.nickname),e.mobile&&a.push(`(${e.mobile})`),e.member_no&&a.push(`[${e.member_no}]`),a.join(" ")},B=$(async e=>{if(!e||e.length<2){o.value=[],g.value=!1;return}d.value=!0,g.value=!0,r.keyword=e,r.page=1;try{await b()}finally{d.value=!1}},300),b=async()=>{try{const{data:e,code:a}=await Z({...r,status:1});a===1?(o.value=(e==null?void 0:e.data)||[],h.value=(e==null?void 0:e.total)||0):(o.value=[],h.value=0)}catch(e){console.error("加载用户列表失败:",e),o.value=[],h.value=0}},E=async e=>{r.page=e,d.value=!0;try{await b()}finally{d.value=!1}},I=e=>{i.value=e,m("update:modelValue",e||null),m("change",e||null,o.value.find(a=>a.member_id===e))},M=()=>{i.value=null,o.value=[],g.value=!1,m("update:modelValue",null),m("change",null,null)};return A(()=>y.modelValue,e=>{i.value=e}),(e,a)=>{const N=Y,P=G,z=H,L=J,U=K;return s(),n("div",ee,[f(L,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=t=>i.value=t),filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入用户信息","remote-method":v(B),loading:d.value,clearable:"",class:"w-full !min-h-[40px]",onChange:I,onClear:M},{empty:p(()=>[l("div",pe,[l("div",_e,[f(z,{size:"24",class:"text-gray-400"},{default:p(()=>[f(v(D))]),_:1})]),g.value?(s(),n("p",ge," 未找到相关用户 ")):(s(),n("p",me," 请输入关键词搜索用户 ")),he])]),default:p(()=>[(s(!0),n(O,null,R(o.value,t=>(s(),V(P,{key:t.member_id,label:j(t),value:t.member_id,class:"!h-auto !p-0"},{default:p(()=>{var w,k;return[l("div",te,[l("div",ae,[l("div",le,[t.headimg?(s(),n("img",{key:0,src:v(W)(t.headimg),alt:t.nickname,class:"w-full h-full object-cover"},null,8,se)):(s(),n("div",oe,_(((k=(w=t.nickname)==null?void 0:w.charAt(0))==null?void 0:k.toUpperCase())||"用"),1))]),ne]),l("div",re,[l("div",ce,[l("span",ie,[l("span",de,_(t.member_no),1),C(" "+_(t.nickname||"未设置昵称"),1)]),t.member_level_name?(s(),V(N,{key:0,type:"info",size:"small",class:"!text-xs !px-1 !py-0 !bg-blue-50 !text-blue-600 !border-blue-200"},{default:p(()=>[C(_(t.member_level_name),1)]),_:2},1024)):x("",!0)]),t.mobile?(s(),n("div",ue,_(t.mobile),1)):x("",!0)])])]}),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","remote-method","loading"]),c.showPagination&&o.value.length>0?(s(),n("div",fe,[f(U,{"current-page":r.page,"onUpdate:current-page":a[1]||(a[1]=t=>r.page=t),"page-size":r.limit,layout:"prev, pager, next",total:h.value,small:!0,onCurrentChange:E,class:"!bg-transparent"},null,8,["current-page","page-size","total"])])):x("",!0)])}}});const Ee=q(ve,[["__scopeId","data-v-05d034c2"]]);export{Ee as default};
