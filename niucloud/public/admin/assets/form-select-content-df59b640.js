import{d as L,n as g,r as k,h as _,c as S,e as l,w as i,u as m,q as r,F as M,W as O,s as T,i as x,t as y,Z as R,a as F,ax as q,$ as A,L as G,M as W,a4 as Y,a1 as Z,E as H,N as J,aF as K,aj as Q,ak as X,a2 as ee,a3 as te}from"./index-6a69b8ba.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";import{g as ae,a as oe}from"./diy_form-bdf8463b.js";import{_ as le}from"./_plugin-vue_export-helper-c27b6911.js";const ne={class:"mt-[16px] flex justify-end"},re=L({__name:"form-select-content",props:{formId:{type:[Number,String],default:0}},setup(E,{expose:P}){const V=E,c=g({}),h=k(),D=k(),e=g({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{title:"",type:"",verify_form_ids:[]}}),n=g({form_id:V.formId}),p=(o=1)=>{e.loading=!0,e.page=o,n.form_id&&(e.searchParam.verify_form_ids=[n.form_id]),ae({page:e.page,limit:e.limit,...e.searchParam}).then(t=>{e.loading=!1,e.data=t.data.data,e.data.forEach(s=>{s.checked=s.form_id==n.form_id}),e.total=t.data.total,b()}).catch(()=>{e.loading=!1})};((o="")=>{oe().then(t=>{for(const s in c)delete c[s];for(const s in t.data)c[s]=t.data[s]})})(),p();const w=(o,t)=>{o?n.form_id=t.form_id:n.form_id=0,b()},b=()=>{q(()=>{for(let o=0;o<e.data.length;o++)e.data[o].checked=!1,n.form_id==e.data[o].form_id&&(e.data[o].checked=!0,Object.assign(n,e.data[o]))})},N=o=>{o&&(o.resetFields(),p())};return P({getData:()=>{if(n.form_id==0){A({type:"warning",message:`${r("formSelectContentTips")}`});return}return{name:"DIY_FORM",title:n.page_title,url:`/app/pages/index/diy_form?form_id=${n.form_id}`,action:"",formId:n.form_id}}}),(o,t)=>{const s=G,f=W,C=Y,z=Z,v=H,I=J,j=K,u=Q,U=X,$=ee,B=te;return _(),S("div",null,[l(I,{inline:!0,model:e.searchParam,ref_key:"searchFormRef",ref:h},{default:i(()=>[l(f,{label:m(r)("formSelectContentTitle"),prop:"title",class:"form-item-wrap"},{default:i(()=>[l(s,{modelValue:e.searchParam.title,"onUpdate:modelValue":t[0]||(t[0]=a=>e.searchParam.title=a),modelModifiers:{trim:!0},placeholder:m(r)("formSelectContentTitlePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(f,{label:m(r)("formSelectContentTypeName"),prop:"type",class:"form-item-wrap"},{default:i(()=>[l(z,{modelValue:e.searchParam.type,"onUpdate:modelValue":t[1]||(t[1]=a=>e.searchParam.type=a),placeholder:m(r)("formSelectContentTypeNamePlaceholder")},{default:i(()=>[l(C,{label:m(r)("formSelectContentTypeAll"),value:""},null,8,["label"]),(_(!0),S(M,null,O(c,(a,d)=>(_(),T(C,{label:a.title,value:d,key:d},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(f,{class:"form-item-wrap"},{default:i(()=>[l(v,{type:"primary",onClick:t[2]||(t[2]=a=>p())},{default:i(()=>[x(y(m(r)("search")),1)]),_:1}),l(v,{onClick:t[3]||(t[3]=a=>N(h.value))},{default:i(()=>[x(y(m(r)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"]),R((_(),T(U,{data:e.data,size:"large",ref_key:"tableRef",ref:D},{empty:i(()=>[F("span",null,y(e.loading?"":m(r)("emptyData")),1)]),default:i(()=>[l(u,{"min-width":"7%"},{default:i(({row:a})=>[l(j,{modelValue:a.checked,"onUpdate:modelValue":d=>a.checked=d,onChange:d=>w(d,a)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(u,{prop:"page_title",label:m(r)("formSelectContentTitle"),"min-width":"65%"},null,8,["label"]),l(u,{prop:"type_name",label:m(r)("formSelectContentTypeName"),"min-width":"25%"},null,8,["label"])]),_:1},8,["data"])),[[B,e.loading]]),F("div",ne,[l($,{"current-page":e.page,"onUpdate:current-page":t[4]||(t[4]=a=>e.page=a),"page-size":e.limit,"onUpdate:page-size":t[5]||(t[5]=a=>e.limit=a),layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:t[6]||(t[6]=a=>p()),onCurrentChange:p},null,8,["current-page","page-size","total"])])])}}});const ie=le(re,[["__scopeId","data-v-9962e1c4"]]),Pe=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"}));export{Pe as _};
