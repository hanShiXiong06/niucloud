import{d as $,r as g,l as b,R as E,h as d,s as w,w as t,a as r,e as a,i as _,u as s,c as i,t as m,C as T,F as j,W as A,dR as G,$ as H,as as K,aj as L,ak as W,ac as J,ad as O,a9 as Q,bH as X,aE as Y,dV as Z,K as ee,a0 as te,ab as ae,E as oe,V as se,p as le,g as ne}from"./index-0b74b7aa.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                        *//* empty css                       *//* empty css                        *//* empty css                *//* empty css                         *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                        *//* empty css               */import{_ as re}from"./_plugin-vue_export-helper-c27b6911.js";const B=p=>(le("data-v-8232e7d1"),p=p(),ne(),p),de={key:0},ce={class:"card-header"},ue={class:"price"},_e=B(()=>r("template",null,[r("div",{class:"card-header"},[r("span",null,"选择收款方式")])],-1)),ie={key:0,class:"payment-info"},me={class:"account-info"},pe={class:"qrcode-container"},ye={key:0},fe={key:1,class:"no-qrcode"},ve=B(()=>r("span",null,"暂无收款码",-1)),he={key:1,class:"empty-state"},ge={class:"dialog-footer"},be=$({__name:"PaymentMethodDialog",props:{visible:{type:Boolean,default:!1},paymentInfo:{type:Array,default:()=>[]}},emits:["update:visible","payment-confirmed"],setup(p,{emit:I}){const h=p,y=g(h.visible),c=g(h.paymentInfo),f=g(0),e=b(()=>!c.value||c.value.length===0||f.value<0?null:c.value[f.value]);b(()=>{if(!e.value||!e.value.order_summary)return 0;const{device_count:o=0,success_count:n=0,returned_count:v=0}=e.value.order_summary;return o===0?0:Math.round((n+v)/o*100)}),b(()=>{if(!e.value||!e.value.order_summary)return"#409eff";const{device_count:o=0,success_count:n=0,returned_count:v=0}=e.value.order_summary,u=o>0?n/o:0;return u>.8?"#67c23a":u>.5?"#e6a23c":"#f56c6c"}),E(()=>h.visible,o=>{y.value=o}),E(y,o=>{I("update:visible",o)}),E(()=>h.paymentInfo,o=>{c.value=o,f.value=o.length>0?0:-1});const D=()=>{if(!e.value||!e.value.order_summary){H.error("无法获取订单信息");return}I("payment-confirmed",{orderId:e.value.order_summary.order_id,payType:e.value.pay_type})};return(o,n)=>{const v=K,u=L,M=W,P=J,q=O,k=Q,R=X,N=Y,V=Z,S=ee,z=te,F=ae,C=oe,U=se;return d(),w(U,{modelValue:y.value,"onUpdate:modelValue":n[2]||(n[2]=l=>y.value=l),title:"收款方式",width:"650px","destroy-on-close":!0},{footer:t(()=>[r("div",ge,[a(C,{onClick:n[1]||(n[1]=l=>y.value=!1)},{default:t(()=>[_("取消")]),_:1}),a(C,{type:"primary",onClick:D,disabled:!s(e)||!s(e).order_summary},{default:t(()=>[_(" 确认已打款 ")]),_:1},8,["disabled"])])]),default:t(()=>[c.value&&c.value.length>0?(d(),i("div",de,[s(e)&&s(e).order_summary?(d(),w(k,{key:0,shadow:"never",class:"mb-4"},{header:t(()=>[r("div",ce,[r("span",null,"订单 #"+m(s(e).order_summary.order_id),1),a(v,{type:s(e).order_summary.status===7?"success":"warning",size:"small"},{default:t(()=>[_(" ¥"+m(s(e).order_summary.total_amount),1)]),_:1},8,["type"])])]),default:t(()=>[a(q,null,{default:t(()=>[a(P,{title:"设备详情列表",name:"devices"},{default:t(()=>[a(M,{data:s(e).order_summary.devices,size:"small",border:""},{default:t(()=>[a(u,{prop:"model",label:"型号","min-width":"120"}),a(u,{prop:"imei",label:"IMEI","min-width":"120","show-overflow-tooltip":""}),a(u,{prop:"final_price",label:"价格",width:"80"},{default:t(l=>[r("span",ue,"¥"+m(l.row.final_price),1)]),_:1}),a(u,{prop:"status_name",label:"状态",width:"80"},{default:t(l=>[a(v,{size:"small",type:l.row.status===6?"danger":"success"},{default:t(()=>[_(m(l.row.status_name),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})):T("",!0),a(k,{shadow:"never",class:"payment-method-card"},{default:t(()=>[_e,a(N,{modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=l=>f.value=l),class:"payment-radio-group"},{default:t(()=>[(d(!0),i(j,null,A(c.value,(l,x)=>(d(),w(R,{key:x,label:x},{default:t(()=>[_(m(l.pay_type),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),s(e)?(d(),i("div",ie,[r("div",me,[a(V,{type:"info"},{default:t(()=>[_("收款账号：")]),_:1}),a(V,{type:"primary"},{default:t(()=>[_(m(s(e).account),1)]),_:1})]),r("div",pe,[s(e).qrcode_image?(d(),i("div",ye,[a(S,{class:"qrcode",src:s(e).qrcode_image,fit:"contain"},null,8,["src"])])):(d(),i("div",fe,[a(z,null,{default:t(()=>[a(s(G))]),_:1}),ve]))])])):T("",!0)]),_:1})])):(d(),i("div",he,[a(F,{description:"该商户暂无收款方式信息"})]))]),_:1},8,["modelValue"])}}});const $e=re(be,[["__scopeId","data-v-8232e7d1"]]);export{$e as default};
