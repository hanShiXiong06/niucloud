import{P as i,d as k,r as w,n as q,aZ as M,h as Y,c as j,a as e,e as t,w as r,u as p,dn as z,dp as B,i as h,dq as F,t as D,dr as Q,$ as R,a0 as $,E as P,bV as N,a4 as O,a1 as A,p as U,g as L}from"./index-28ce54e5.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                       *//* empty css                  */import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";function Ie(s){return i.get("recycle/device_query_result/lists",{params:s})}function ke(s){return i.get(`recycle/device_query_result/${s}`)}function Me(s){return i.delete(`recycle/device_query_result/${s}`)}function Ye(s){return i.post("recycle/device_query_result/batch_del",{ids:s})}function je(s){return i.post(`recycle/device_query_result/requery/${s}`)}function G(s={}){return i.get("recycle/device_query_result/total_consumption",{params:s})}const u=s=>(U("data-v-7c4c1ec7"),s=s(),L(),s),H={class:"data-statistics mb-4"},J={class:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden"},K={class:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-100"},W={class:"flex items-center space-x-2"},X={class:"w-6 h-6 bg-blue-500 rounded-md flex items-center justify-center"},ee=u(()=>e("h3",{class:"text-sm font-semibold text-gray-800"},"数据概况",-1)),te={class:"px-4 py-4"},se={class:"grid grid-cols-4 gap-4"},ae={class:"flex items-center space-x-3 p-3 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-100"},oe={class:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center shadow-sm"},le={class:"flex-1 min-w-0"},re={class:"text-lg font-bold text-gray-900 truncate"},ne=u(()=>e("div",{class:"text-xs text-gray-600"},"总消费金额",-1)),ce={class:"flex items-center space-x-3 p-3 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-100"},ie={class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-sm"},de={class:"flex-1 min-w-0"},ue={class:"text-lg font-bold text-gray-900 truncate"},_e=u(()=>e("div",{class:"text-xs text-gray-600"},"查询总次数",-1)),pe={class:""},fe={class:"space-y-1"},me=u(()=>e("label",{class:"text-xs text-gray-600"},"时间范围",-1)),ge={class:"space-y-1"},ye=u(()=>e("label",{class:"text-xs text-gray-600"},"查询类型",-1)),he={class:"flex justify-end space-x-2 mt-3 pt-3 border-gray-200"},xe=k({__name:"DataStatistics",props:{autoRefresh:{type:Boolean,default:!1}},emits:["filterChange"],setup(s,{expose:C,emit:x}){const v=s,f=w(!1);w(!1);const _=q({total_consumption:0,total_count:0}),a=q({dateRange:[],queryType:"",status:""}),d=async n=>{f.value=!0;try{const o=n||{};a.dateRange&&a.dateRange.length===2&&(o.create_at=a.dateRange),a.queryType&&(o.query_type=a.queryType),a.status!==""&&(o.status=a.status);const l=await G(o);console.log("API响应:",l),l.code===1&&l.data?(_.total_consumption=l.data.total_consumption||0,_.total_count=l.data.total_count||0):R.error("获取统计数据失败")}catch(o){console.error("获取统计数据失败:",o),R.error("获取统计数据失败")}finally{f.value=!1}},S=n=>n.toFixed(2),T=()=>{v.autoRefresh&&m()},V=()=>{v.autoRefresh&&m()},m=()=>{const n={dateRange:a.dateRange,queryType:a.queryType,status:a.status};d(n),x("filterChange",n)},b=()=>{a.dateRange=[],a.queryType="",a.status="",d(),x("filterChange",{})};return C({loadStatistics:d,resetFilter:b}),M(()=>{d()}),(n,o)=>{const l=$,g=P,E=N,c=O,I=A;return Y(),j("div",H,[e("div",J,[e("div",K,[e("div",W,[e("div",X,[t(l,{class:"text-white text-sm"},{default:r(()=>[t(p(z))]),_:1})]),ee]),t(g,{type:"primary",size:"small",onClick:d,loading:f.value,class:"!h-7 !px-3 !text-xs"},{default:r(()=>[t(l,{class:"mr-1"},{default:r(()=>[t(p(B))]),_:1}),h(" 刷新 ")]),_:1},8,["loading"])]),e("div",te,[e("div",se,[e("div",ae,[e("div",oe,[t(l,{class:"text-white text-lg"},{default:r(()=>[t(p(F))]),_:1})]),e("div",le,[e("div",re," ¥"+D(S(_.total_consumption)),1),ne])]),e("div",ce,[e("div",ie,[t(l,{class:"text-white text-lg"},{default:r(()=>[t(p(Q))]),_:1})]),e("div",de,[e("div",ue,D(_.total_count),1),_e])]),e("div",pe,[e("div",fe,[me,t(E,{modelValue:a.dateRange,"onUpdate:modelValue":o[0]||(o[0]=y=>a.dateRange=y),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:T,size:"small",class:"!w-full"},null,8,["modelValue"])]),e("div",ge,[ye,t(I,{modelValue:a.queryType,"onUpdate:modelValue":o[1]||(o[1]=y=>a.queryType=y),placeholder:"请选择查询类型",onChange:V,size:"small",class:"!w-full"},{default:r(()=>[t(c,{label:"全部",value:""}),t(c,{label:"IMEI查询",value:"imei"}),t(c,{label:"序列号查询",value:"serial"}),t(c,{label:"型号查询",value:"model"}),t(c,{label:"保修查询",value:"coverage"}),t(c,{label:"激活锁查询",value:"activationlock"})]),_:1},8,["modelValue"])])]),e("div",he,[t(g,{size:"small",onClick:b,class:"!h-7 !px-3 !text-xs"},{default:r(()=>[h(" 重置 ")]),_:1}),t(g,{type:"primary",size:"small",onClick:m,class:"!h-7 !px-3 !text-xs"},{default:r(()=>[h(" 应用筛选 ")]),_:1})])])])])])}}});const ve=Z(xe,[["__scopeId","data-v-7c4c1ec7"]]),ze=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"}));export{ve as D,ke as a,Ye as b,ze as c,Me as d,Ie as g,je as r};
