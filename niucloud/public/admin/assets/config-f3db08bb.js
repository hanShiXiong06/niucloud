import{P as w,d as q,r as C,n as x,aZ as L,h as p,c as v,e as s,w as d,Z as O,a as t,s as S,i as g,C as y,t as f,u as h,cl as k,$ as _,b7 as z,L as N,M as Q,N as H,E as R,dm as T,a9 as F,a3 as Z,p as G,g as J}from"./index-28ce54e5.js";/* empty css                   *//* empty css                *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css                  */import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";function W(r){return w.get("recycle/device_query_config/lists",{params:r})}function X(r){return w.post("recycle/device_query_config",r)}function Y(r,u){return w.put(`recycle/device_query_config/${r}`,u)}function ee(r,u){return w.put(`recycle/device_query_config/status/${r}`,{status:u})}const j=r=>(G("data-v-9174147d"),r=r(),J(),r),ae={class:"main-container"},te=j(()=>t("div",{class:"flex justify-between items-center mb-6"},[t("div",null,[t("span",{class:"text-page-title"},"设备查询配置"),t("p",{class:"text-sm text-gray-500 mt-1"},"配置第三方设备查询服务的API密钥和基础URL")])],-1)),se={class:"config-cards-container"},le={class:"flex justify-between items-center"},oe=j(()=>t("div",{class:"flex items-center"},[t("div",{class:"config-icon bg-orange-500"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})])]),t("div",{class:"ml-3"},[t("h3",{class:"text-lg font-semibold"},"阿里云配置"),t("p",{class:"text-xs text-gray-500"},"物流查询服务")])],-1)),ie={class:"flex justify-end gap-2 mt-4"},de={key:0,class:"config-meta"},ne={class:"text-xs text-gray-500 flex justify-between"},re={key:0},ue={class:"flex justify-between items-center"},ce=j(()=>t("div",{class:"flex items-center"},[t("div",{class:"config-icon bg-blue-500"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})])]),t("div",{class:"ml-3"},[t("h3",{class:"text-lg font-semibold"},"3023data 配置"),t("p",{class:"text-xs text-gray-500"},"苹果设备保修查询服务")])],-1)),pe={class:"flex justify-end gap-2 mt-4"},_e={key:0,class:"config-meta"},me={class:"text-xs text-gray-500 flex justify-between"},ve={key:0},ye={name:"DeviceQueryConfig"},fe=q({...ye,setup(r){const u=C(!1);C([]),C([]);const l=x({id:0,name:"3023",api_key:"",base_url:"http://api.3023data.com",enabled_apis:"/apple/coverage-capacity",timeout:30,max_retry:3,cache_time:3600,daily_limit:1e3,balance:0,status:1,remark:"",create_at:0,update_at:0}),I=x({...l}),o=x({id:0,name:"alicloudapi",api_key:"",base_url:"https://kzexpress.market.alicloudapi.com",enabled_apis:"/api-mall/api/express/query",timeout:30,max_retry:3,cache_time:3600,daily_limit:1e3,balance:0,status:1,remark:"",create_at:0,update_at:0}),E=x({...o}),U=async()=>{u.value=!0;try{((await W({page:1,limit:100})).data.data||[]).forEach(n=>{n.base_url&&n.base_url.includes("3023data.com")?(Object.assign(l,n),Object.assign(I,n)):n.base_url&&n.base_url.includes("alicloudapi.com")&&(Object.assign(o,n),Object.assign(E,n))})}catch(e){console.error("加载配置失败:",e),_.error("加载配置失败")}finally{u.value=!1}},A=async(e,a)=>{if(!e.name||!e.api_key||!e.base_url){_.warning("请填写完整的配置信息");return}try{u.value=!0;const n={name:e.name,api_key:e.api_key,base_url:e.base_url,enabled_apis:e.enabled_apis||"",timeout:e.timeout,max_retry:e.max_retry,cache_time:e.cache_time,daily_limit:e.daily_limit,balance:e.balance,status:e.status,remark:e.remark};if(e.id)await Y(e.id,n),_.success("配置更新成功");else{const c=await X(n);e.id=c.data.id,_.success("配置创建成功")}await U()}catch(n){console.error("保存配置失败:",n),_.error("保存配置失败")}finally{u.value=!1}},D=async e=>{if(e.id)try{await ee(e.id,e.status),_.success(e.status===1?"配置已启用":"配置已禁用")}catch(a){e.status=e.status===1?0:1,console.error("更新状态失败:",a),_.error("更新状态失败")}},M=e=>{e.base_url.includes("3023data.com")?Object.assign(e,I):Object.assign(e,E),_.info("已重置为原始配置")};return L(()=>{U()}),(e,a)=>{const n=z,c=N,m=Q,$=H,b=R,P=T,V=F,B=Z;return p(),v("div",ae,[s(V,{class:"box-card !border-none",shadow:"never"},{default:d(()=>[te,O((p(),v("div",se,[s(V,{class:"config-card",shadow:"hover"},{header:d(()=>[t("div",le,[oe,s(n,{modelValue:o.status,"onUpdate:modelValue":a[0]||(a[0]=i=>o.status=i),"active-value":1,"inactive-value":0,disabled:!o.id,onChange:a[1]||(a[1]=i=>D(o))},null,8,["modelValue","disabled"])])]),default:d(()=>[s($,{model:o,"label-width":"100px","label-position":"left"},{default:d(()=>[s(m,{label:"配置名称"},{default:d(()=>[s(c,{modelValue:o.name,"onUpdate:modelValue":a[2]||(a[2]=i=>o.name=i),placeholder:"请输入配置名称，如：阿里云物流解析",disabled:""},null,8,["modelValue"])]),_:1}),s(m,{label:"API密钥"},{default:d(()=>[s(c,{modelValue:o.api_key,"onUpdate:modelValue":a[3]||(a[3]=i=>o.api_key=i),placeholder:"请输入API密钥",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),s(m,{label:"API基础URL"},{default:d(()=>[s(c,{modelValue:o.base_url,"onUpdate:modelValue":a[4]||(a[4]=i=>o.base_url=i),placeholder:"https://kzexpress.market.alicloudapi.com",disabled:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),t("div",ie,[o.id?(p(),S(b,{key:0,onClick:a[5]||(a[5]=i=>M(o))},{default:d(()=>[g("重置")]),_:1})):y("",!0),s(b,{type:"primary",onClick:a[6]||(a[6]=i=>A(o,"alicloud"))},{default:d(()=>[g(f(o.id?"保存配置":"创建配置"),1)]),_:1})]),o.id?(p(),v("div",de,[s(P),t("div",ne,[t("span",null,"创建时间："+f(h(k)(o.create_at)),1),o.update_at?(p(),v("span",re,"更新时间："+f(h(k)(o.update_at)),1)):y("",!0)])])):y("",!0)]),_:1}),s(V,{class:"config-card",shadow:"hover"},{header:d(()=>[t("div",ue,[ce,s(n,{modelValue:l.status,"onUpdate:modelValue":a[7]||(a[7]=i=>l.status=i),"active-value":1,"inactive-value":0,disabled:!l.id,onChange:a[8]||(a[8]=i=>D(l))},null,8,["modelValue","disabled"])])]),default:d(()=>[s($,{model:l,"label-width":"100px","label-position":"left"},{default:d(()=>[s(m,{label:"配置名称"},{default:d(()=>[s(c,{modelValue:l.name,"onUpdate:modelValue":a[9]||(a[9]=i=>l.name=i),placeholder:"请输入配置名称，如：admin",disabled:""},null,8,["modelValue"])]),_:1}),s(m,{label:"API密钥"},{default:d(()=>[s(c,{modelValue:l.api_key,"onUpdate:modelValue":a[10]||(a[10]=i=>l.api_key=i),placeholder:"请输入API密钥",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),s(m,{label:"API基础URL"},{default:d(()=>[s(c,{modelValue:l.base_url,"onUpdate:modelValue":a[11]||(a[11]=i=>l.base_url=i),placeholder:"http://api.3023data.com",disabled:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),t("div",pe,[l.id?(p(),S(b,{key:0,onClick:a[12]||(a[12]=i=>M(l))},{default:d(()=>[g("重置")]),_:1})):y("",!0),s(b,{type:"primary",onClick:a[13]||(a[13]=i=>A(l,"3023"))},{default:d(()=>[g(f(l.id?"保存配置":"创建配置"),1)]),_:1})]),l.id?(p(),v("div",_e,[s(P),t("div",me,[t("span",null,"创建时间："+f(h(k)(l.create_at)),1),l.update_at?(p(),v("span",ve,"更新时间："+f(h(k)(l.update_at)),1)):y("",!0)])])):y("",!0)]),_:1})])),[[B,u.value]])]),_:1})])}}});const Ee=K(fe,[["__scopeId","data-v-9174147d"]]);export{Ee as default};
