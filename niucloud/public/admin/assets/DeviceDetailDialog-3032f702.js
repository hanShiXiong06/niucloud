import{d as P,r as z,l as W,R as k,n as K,h as a,s as C,w as v,a as e,c as i,t as l,C as c,e as M,i as V,v as F,u as y,F as E,W as S,B as A,as as O,K as R,bx as q,V as G,p as J,g as Q}from"./index-9cfed1fc.js";/* empty css                  *//* empty css                   *//* empty css                        *//* empty css                 *//* empty css               */import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";const s=h=>(J("data-v-7f567c83"),h=h(),Q(),h),Y={class:"flex justify-between items-center p-4 bg-gradient-to-r from-blue-600 to-purple-700 text-white rounded-t-lg"},Z={class:"flex items-center space-x-3"},ee=s(()=>e("div",{class:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})])],-1)),te=s(()=>e("h3",{class:"text-lg text-left font-bold"},"设备详情",-1)),se={key:0,class:"text-blue-100 text-xs"},ae={key:0,class:"text-right"},oe=s(()=>e("div",{class:"text-xs text-blue-100"},"IMEI",-1)),ie={class:"font-mono text-sm"},le={key:0,class:"p-4 bg-gray-50 space-y-4 max-h-[80vh] overflow-y-auto"},re={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},de={class:"flex items-center justify-between px-4 py-2 bg-gradient-to-r from-gray-50 to-blue-50 border-b"},ce=s(()=>e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6z"})]),e("span",{class:"font-medium text-gray-800 text-sm"},"设备概览")],-1)),ne={class:"p-4"},ue={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4"},_e={class:"space-y-3"},ve=s(()=>e("h4",{class:"font-medium text-gray-700 text-sm flex items-center space-x-1"},[e("svg",{class:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4z"})]),e("span",null,"基础信息")],-1)),he={class:"grid grid-cols-2 gap-3"},ge={class:"bg-gray-50 rounded-md p-2"},xe=s(()=>e("div",{class:"text-xs text-gray-500"},"设备型号",-1)),me={class:"text-sm font-medium text-gray-900 truncate"},pe={class:"bg-gray-50 rounded-md p-2"},fe=s(()=>e("div",{class:"text-xs text-gray-500"},"IMEI码",-1)),ye={class:"text-sm font-mono text-gray-900"},be={class:"bg-gray-50 rounded-md p-2"},we=s(()=>e("div",{class:"text-xs text-gray-500"},"创建时间",-1)),ze={class:"text-sm text-gray-900"},ke={key:0,class:"bg-gray-50 rounded-md p-2"},Ce=s(()=>e("div",{class:"text-xs text-gray-500"},"序列号",-1)),Me={class:"text-sm font-mono text-gray-900"},Ve={class:"space-y-3"},Be={key:0},He=s(()=>e("h4",{class:"font-medium text-gray-700 text-sm flex items-center space-x-1 mb-2"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})]),e("span",null,"保修信息")],-1)),De={class:"grid grid-cols-2 gap-2"},Ie={class:"bg-gray-50 rounded-md p-2"},je=s(()=>e("div",{class:"text-xs text-gray-500"},"保修状态",-1)),Ne={key:0,class:"bg-gray-50 rounded-md p-2"},Fe=s(()=>e("div",{class:"text-xs text-gray-500"},"购买日期",-1)),Ee={class:"text-sm text-gray-900"},Se=s(()=>e("h4",{class:"font-medium text-gray-700 text-sm flex items-center space-x-1 mb-2"},[e("svg",{class:"w-4 h-4 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z","clip-rule":"evenodd"})]),e("span",null,"价格信息")],-1)),Ae={class:"grid grid-cols-2 gap-2"},Le={key:0,class:"bg-blue-50 rounded-md p-2 border border-blue-200"},Te=s(()=>e("div",{class:"text-xs text-blue-600"},"最终价格",-1)),$e={class:"text-sm font-bold text-blue-700"},Ue={class:"bg-orange-50 rounded-md p-2 border border-orange-200"},Pe=s(()=>e("div",{class:"text-xs text-orange-600"},"最终价格",-1)),We={class:"text-sm font-bold text-orange-700"},Ke={key:0,class:"mt-2 text-center"},Oe={key:0,class:"bg-blue-50 border-l-3 border-blue-400 p-3 rounded-r"},Re={class:"flex items-start"},qe=s(()=>e("svg",{class:"w-4 h-4 text-blue-400 mt-0.5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),Ge=s(()=>e("p",{class:"text-xs font-medium text-blue-700"},"价格备注",-1)),Je={class:"text-xs text-blue-600 mt-0.5"},Qe={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Xe={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},Ye=s(()=>e("div",{class:"flex items-center justify-between px-4 py-2 bg-gradient-to-r from-gray-50 to-green-50 border-b"},[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("span",{class:"font-medium text-gray-800 text-sm"},"质检信息")])],-1)),Ze={class:"p-4"},et={key:0,class:"space-y-3"},tt={class:"flex items-center justify-between text-xs text-gray-600"},st={key:0,class:"flex items-center space-x-1"},at=s(()=>e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),ot={key:1,class:"flex items-center space-x-1"},it=s(()=>e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1)),lt={class:"bg-green-50 rounded-md p-3 border border-green-200"},rt=s(()=>e("h4",{class:"text-xs font-medium text-green-800 mb-1"},"质检结果",-1)),dt={class:"text-xs text-green-700 leading-relaxed"},ct={class:"bg-red-50 rounded-md p-3 border border-red-200"},nt=s(()=>e("h4",{class:"text-xs font-medium text-red-800 mb-1"},"扣费说明",-1)),ut={class:"text-xs text-red-700 leading-relaxed"},_t={key:0,class:"space-y-2"},vt=s(()=>e("h4",{class:"text-xs font-medium text-gray-800"},"质检图片",-1)),ht={class:"grid grid-cols-6 gap-2"},gt=["onClick"],xt=s(()=>e("div",{class:"w-full h-16 bg-gray-100 rounded flex flex-col items-center justify-center"},[e("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"})]),e("span",{class:"text-xs text-gray-400"},"错误")],-1)),mt=s(()=>e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),e("path",{"fill-rule":"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})])],-1)),pt={key:1,class:"text-center py-6"},ft=s(()=>e("svg",{class:"w-12 h-12 text-gray-300 mx-auto mb-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),yt=s(()=>e("h3",{class:"text-sm font-medium text-gray-400 mb-1"},"暂无质检结果",-1)),bt=s(()=>e("p",{class:"text-xs text-gray-400"},"设备尚未进行质检",-1)),wt=[ft,yt,bt],zt={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},kt={class:"flex items-center justify-between px-4 py-2 bg-gradient-to-r from-gray-50 to-purple-50 border-b"},Ct=s(()=>e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),e("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"})]),e("span",{class:"font-medium text-gray-800 text-sm"},"操作日志")],-1)),Mt={class:"p-4"},Vt={key:0,class:"space-y-3"},Bt={key:0,class:"absolute left-4 top-8 w-0.5 h-4 bg-gray-200"},Ht={class:"flex items-start space-x-3"},Dt=s(()=>e("div",{class:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0 relative z-10"},[e("div",{class:"w-2 h-2 bg-purple-600 rounded-full"})],-1)),It={class:"flex-1 min-w-0 bg-gray-50 rounded-md p-3"},jt={class:"flex items-start justify-between mb-1"},Nt={class:"flex items-center space-x-2"},Ft={class:"font-medium text-gray-900 text-sm"},Et={class:"text-xs text-gray-500"},St={key:0,class:"text-xs text-gray-700 leading-relaxed"},At={key:1,class:"text-center py-6"},Lt=s(()=>e("svg",{class:"w-12 h-12 text-gray-300 mx-auto mb-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"})],-1)),Tt=s(()=>e("h3",{class:"text-sm font-medium text-gray-400 mb-1"},"暂无操作日志",-1)),$t=s(()=>e("p",{class:"text-xs text-gray-400"},"该设备暂无操作记录",-1)),Ut=[Lt,Tt,$t],Pt={key:1,class:"text-center py-12"},Wt=s(()=>e("svg",{class:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})],-1)),Kt=s(()=>e("h3",{class:"text-lg font-medium text-gray-400 mb-2"},"暂无设备详情",-1)),Ot=s(()=>e("p",{class:"text-gray-400"},"设备信息加载失败或数据不存在",-1)),Rt=[Wt,Kt,Ot],qt=P({__name:"DeviceDetailDialog",props:{visible:{type:Boolean,default:!1},device:{type:Object,default:null}},emits:["update:visible","closed"],setup(h,{emit:B}){const x=h,m=z(x.visible),t=z(x.device),b=W(()=>{var o;return(o=t.value)!=null&&o.check_images?t.value.check_images.split(",").map(r=>r.trim()).filter(r=>r):[]}),L=()=>{var u,_;if(!((u=t.value)!=null&&u.final_price)||!((_=t.value)!=null&&_.before_price))return"";const o=parseFloat(t.value.before_price.toString()),d=parseFloat(t.value.final_price.toString())-o;return d>0?`+¥${d.toFixed(2)}`:d<0?`-¥${Math.abs(d).toFixed(2)}`:"无变化"},H=()=>{var u,_;if(!((u=t.value)!=null&&u.final_price)||!((_=t.value)!=null&&_.before_price))return"";const o=parseFloat(t.value.before_price.toString()),d=parseFloat(t.value.final_price.toString())-o;return d>0?"positive":d<0?"negative":"neutral"};k(()=>x.visible,o=>{m.value=o}),k(()=>x.device,o=>{t.value=o},{deep:!0}),k(m,o=>{B("update:visible",o),o||B("closed")});const g=K({show:!1,index:0}),D=z([]),T=(o,r)=>{D.value=o.map(d=>A(d)),g.index=r,g.show=!0},$=o=>{switch(parseInt(o.toString())){case 1:return"info";case 2:return"success";case 3:return"warning";case 4:return"danger";case 5:return"primary";default:return"info"}},w=o=>{if(!o)return"暂无";let r;if(typeof o=="number"){const d=o>9999999999?o:o*1e3;r=new Date(d)}else r=new Date(o);return isNaN(r.getTime())?"暂无":r.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})};return(o,r)=>{const d=O,u=R,_=q,U=G;return a(),C(U,{modelValue:m.value,"onUpdate:modelValue":r[1]||(r[1]=p=>m.value=p),title:"",width:"60%",top:"3vh",center:"","destroy-on-close":!0,class:"device-detail-dialog"},{header:v(()=>[e("div",Y,[e("div",Z,[ee,e("div",null,[te,t.value?(a(),i("p",se," ID: "+l(t.value.id)+" | "+l(t.value.model),1)):c("",!0)])]),t.value?(a(),i("div",ae,[oe,e("div",ie,l(t.value.imei),1)])):c("",!0)])]),default:v(()=>{var p,I,j,N;return[t.value?(a(),i("div",le,[e("div",re,[e("div",de,[ce,M(d,{type:$(t.value.status),effect:"light",size:"small",class:"font-medium"},{default:v(()=>[V(l(t.value.status_name),1)]),_:1},8,["type"])]),e("div",ne,[e("div",ue,[e("div",_e,[ve,e("div",he,[e("div",ge,[xe,e("div",me,l(t.value.model),1)]),e("div",pe,[fe,e("div",ye,l(t.value.imei),1)]),e("div",be,[we,e("div",ze,l(w(t.value.create_at)),1)]),(p=t.value.info)!=null&&p.sn?(a(),i("div",ke,[Ce,e("div",Me,l(t.value.info.sn),1)])):c("",!0)])]),e("div",Ve,[t.value.info?(a(),i("div",Be,[He,e("div",De,[e("div",Ie,[je,e("span",{class:F(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",((I=t.value.info.coverage)==null?void 0:I.status)==="In Warranty"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},l(((j=t.value.info.coverage)==null?void 0:j.status)||t.value.info.support||"未激活"),3)]),(N=t.value.info.purchase)!=null&&N.date?(a(),i("div",Ne,[Fe,e("div",Ee,l(t.value.info.purchase.date),1)])):c("",!0)])])):c("",!0),e("div",null,[Se,e("div",Ae,[t.value.before_price?(a(),i("div",Le,[Te,e("div",$e,"¥"+l(t.value.before_price),1)])):c("",!0),e("div",Ue,[Pe,e("div",We,l(t.value.final_price?`¥${t.value.final_price}`:"未定价"),1)])]),t.value.before_price&&t.value.final_price?(a(),i("div",Ke,[e("span",{class:F(["inline-flex items-center text-xs font-medium px-2 py-1 rounded",H()==="positive"?"bg-green-100 text-green-700":H()==="negative"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"])}," 变化: "+l(L()),3)])):c("",!0)])])]),t.value.price_remark?(a(),i("div",Oe,[e("div",Re,[qe,e("div",null,[Ge,e("p",Je,l(t.value.price_remark),1)])])])):c("",!0)])]),e("div",Qe,[e("div",Xe,[Ye,e("div",Ze,[t.value.check_result?(a(),i("div",et,[e("div",tt,[t.value.check_at?(a(),i("div",st,[at,e("span",null,l(w(t.value.check_at)),1)])):c("",!0),t.value.checkUser?(a(),i("div",ot,[it,e("span",null,l(t.value.checkUser.real_name||t.value.checkUser.username),1)])):c("",!0)]),e("div",lt,[rt,e("div",dt,l(t.value.check_result),1)]),e("div",ct,[nt,e("div",ut,l(t.value.remark),1)]),y(b).length>0?(a(),i("div",_t,[vt,e("div",ht,[(a(!0),i(E,null,S(y(b),(n,f)=>(a(),i("div",{key:f,class:"relative group cursor-pointer",onClick:Gt=>T(y(b),f)},[M(u,{src:y(A)(n),fit:"cover",class:"w-16 h-16 rounded border-2 border-gray-200 group-hover:border-blue-400 transition-colors duration-200",lazy:""},{error:v(()=>[xt]),_:2},1032,["src"]),mt],8,gt))),128))])])):c("",!0)])):(a(),i("div",pt,wt))])]),e("div",zt,[e("div",kt,[Ct,t.value.logs&&t.value.logs.length>0?(a(),C(d,{key:0,type:"info",size:"small",effect:"plain"},{default:v(()=>[V(l(t.value.logs.length)+" 条 ",1)]),_:1})):c("",!0)]),e("div",Mt,[t.value.logs&&t.value.logs.length>0?(a(),i("div",Vt,[(a(!0),i(E,null,S(t.value.logs,(n,f)=>(a(),i("div",{key:n.id,class:"relative"},[f<t.value.logs.length-1?(a(),i("div",Bt)):c("",!0),e("div",Ht,[Dt,e("div",It,[e("div",jt,[e("div",Nt,[e("span",Ft,l(n.operator_name),1),M(d,{size:"small",effect:"light",type:"primary"},{default:v(()=>[V(l(n.status_name),1)]),_:2},1024)]),e("time",Et,l(w(n.create_at)),1)]),n.remark?(a(),i("div",St,l(n.remark),1)):c("",!0)])])]))),128))])):(a(),i("div",At,Ut))])])])])):(a(),i("div",Pt,Rt)),g.show?(a(),C(_,{key:2,"url-list":D.value,"initial-index":g.index,"zoom-rate":1.2,onClose:r[0]||(r[0]=n=>g.show=!1)},null,8,["url-list","initial-index","zoom-rate"])):c("",!0)]}),_:1},8,["modelValue"])}}});const ss=X(qt,[["__scopeId","data-v-7f567c83"]]);export{ss as default};
