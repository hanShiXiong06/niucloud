import{d as B,r as f,l as F,q as o,R as q,h as d,s as v,w as a,a as x,e as s,i as g,t as p,u as r,Z as P,c as C,F as R,W as I,C as M,a4 as Z,a1 as O,M as T,L as $,N as j,E as W,V as z,a3 as A}from"./index-9cfed1fc.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                 */import"./el-form-item-4ed993c7.js";/* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  */import{e as H,a as J,b as K}from"./user-9d7f6a26.js";const Q={key:0,class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},X={class:"dialog-footer"},ce=B({__name:"create-site-limit",props:{siteGroup:{type:Object,default:()=>({})},uid:{type:Number,default:0}},emits:["complete"],setup(w,{expose:y,emit:L}){const c=w,u=f(!1),b=f(null),t=f({id:0,uid:c.uid,group_id:"",num:1,month:1}),m=f(!1),S=F(()=>({group_id:[{required:!0,message:o("siteGroupPlaceholder"),trigger:"blur"}],num:[{required:!0,message:o("numPlaceholder"),trigger:"blur"},{validator:(i,e,n)=>{e<=0&&n(o("numCannotLtZero")),n()}}],month:[{required:!0,message:o("monthPlaceholder"),trigger:"blur"},{validator:(i,e,n)=>{e<=0&&n(o("monthCannotLtZero")),n()}}]})),E=async i=>{m.value||!i||await i.validate(async e=>{e&&(m.value=!0,(t.value.id?H:J)(t.value).then(()=>{m.value=!1,u.value=!1,L("complete")}).catch(()=>{m.value=!1}))})},N=(i=0)=>{i?K(i).then(({data:e})=>{t.value=e,u.value=!0}):u.value=!0};return q(()=>u.value,()=>{u.value||(t.value={id:0,uid:c.uid,group_id:"",num:1,month:1})}),y({setFormData:N,loading:m}),(i,e)=>{const n=Z,U=O,_=T,V=$,D=j,h=W,G=z,k=A;return d(),v(G,{modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=l=>u.value=l),title:r(o)("userCreateSiteLimit"),width:"700px","destroy-on-close":!0},{footer:a(()=>[x("span",X,[s(h,{onClick:e[3]||(e[3]=l=>u.value=!1)},{default:a(()=>[g(p(r(o)("cancel")),1)]),_:1}),s(h,{type:"primary",loading:m.value,onClick:e[4]||(e[4]=l=>E(b.value))},{default:a(()=>[g(p(r(o)("confirm")),1)]),_:1},8,["loading"])])]),default:a(()=>[P((d(),v(D,{model:t.value,"label-width":"130px",ref_key:"formRef",ref:b,rules:r(S),class:"page-form",autocomplete:"off"},{default:a(()=>[s(_,{label:r(o)("siteGroup"),prop:"group_id"},{default:a(()=>[s(U,{modelValue:t.value.group_id,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.group_id=l),placeholder:r(o)("siteGroupPlaceholder"),disabled:t.value.id},{default:a(()=>[(d(!0),C(R,null,I(c.siteGroup,l=>(d(),v(n,{label:l.group_name,value:l.group_id},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(_,{label:r(o)("createSiteNum"),prop:"num"},{default:a(()=>[x("div",null,[s(V,{modelValue:t.value.num,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.num=l),modelModifiers:{number:!0,trim:!0},class:"!w-[150px]"},null,8,["modelValue"]),t.value.group_id?(d(),C("p",Q,p(r(o)("createdSiteNum"))+"ï¼š"+p(c.siteGroup[t.value.group_id].site_num),1)):M("",!0)])]),_:1},8,["label"]),s(_,{label:r(o)("createSiteTimeLimit"),prop:"month"},{default:a(()=>[s(V,{modelValue:t.value.month,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.month=l),modelModifiers:{number:!0,trim:!0},class:"!w-[150px]"},{append:a(()=>[g(p(r(o)("month")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[k,m.value]])]),_:1},8,["modelValue","title"])}}});export{ce as _};
