import{_ as b}from"./index.vue_vue_type_style_index_0_lang-fad85f8a.js";import{d as V,r as l,l as k,T as D,H as L,h as U,c as H,e as s,u as f,bC as w,bP as x,F as B,B as g}from"./index-9cfed1fc.js";const E=V({__name:"index",props:{modelValue:{type:String,default:""},mode:{type:String,default:"simple"},height:{type:Number,default:600}},emits:["update:modelValue","handleBlur"],setup(p,{emit:u}){const d=p,h=l(),c=l(null),m=l(null),r=k({get(){return d.modelValue},set(e){u("update:modelValue",e)}});let n=null;const i={};i.token=D(),i["site-id"]=L.get("siteId")||0;const _="/adminapi/".substr(-1)=="/"?"/adminapi/":"/adminapi//",C=l({debug:!1,UEDITOR_HOME_URL:"/admin/ueditor/",UEDITOR_CORS_URL:location.origin+"/admin/ueditor/",serverUrl:`${_}sys/ueditor`,serverHeaders:i,autoHeightEnabled:!1,initialFrameHeight:d.height,initialFrameWidth:"100%",wordCount:!0,toolbarCallback:function(e,t){switch(n=t,e){case"insertimage":return c.value.showDialog=!0,!0;case"insertvideo":return m.value.showDialog=!0,!0}}}),R=e=>{e.addListener("blur",()=>{u("handleBlur",e.getContent())}),e.addListener("fullscreenchanged",(t,o)=>{const a=e.ui.getDom();o?a.classList.add("edui-fullscreen"):a.classList.remove("edui-fullscreen"),console.log("全屏切换",o)}),e.getContentLength,e.getContentLength=function(){return e.getContent().replace(/[\s\u3000]+/g,"").length}},v=e=>{e.forEach(t=>{n==null||n.execCommand("insertHtml",`<img src="${g(t.url)}">`)})},y=e=>{n==null||n.execCommand("insertHtml",`<video src="${g(e.url)}">`)};return(e,t)=>{const o=b;return U(),H(B,null,[s(o,{type:"image",ref_key:"imageRef",ref:c,limit:"",onConfirm:v},null,512),s(o,{type:"video",ref_key:"videoRef",ref:m,onConfirm:y},null,512),s(f(x),{modelValue:f(r),"onUpdate:modelValue":t[0]||(t[0]=a=>w(r)?r.value=a:null),config:C.value,editorDependencies:["ueditor.config.js","ueditor.all.js"],ref_key:"editorRef",ref:h,onReady:R},null,8,["modelValue","config","editorDependencies"])],64)}}});export{E as _};
