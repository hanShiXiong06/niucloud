import{d as O,y as R,n as A,r as I,f as L,h as p,c as v,e as o,w as n,a as d,t as i,u as a,q as e,i as m,Z as M,s as h,B as q,C as x,ah as w,L as z,M as K,E as S,N as U,a9 as Z,K as G,aj as H,ak as J,a3 as Q}from"./index-9cfed1fc.js";/* empty css                   *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                        *//* empty css               *//* empty css                 *//* empty css                        *//* empty css                *//* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                 */import{_ as C}from"./category_default-6c62f083.js";import{g as W,i as X,j as Y,d as ee}from"./tools-b99974b2.js";const te={class:"main-container"},ae={class:"flex justify-between items-center"},le={class:"text-page-title"},oe={class:"mt-[20px]"},ne={class:"flex items-center justify-between"},se=d("img",{class:"w-[45px] h-[45px]",src:C,alt:""},null,-1),ie={key:1,class:"w-[45px] h-[45px]",src:C,alt:""},re={class:"flex-1 w-[236px] pl-[15px] truncate"},Fe=O({__name:"list",setup(ce){const E=R().meta.title,t=A({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{search:""}}),g=I(),B=s=>{s&&(s.resetFields(),u())},u=(s=1)=>{t.loading=!0,t.page=s,W({page:t.page,limit:t.limit,...t.searchParam}).then(r=>{t.loading=!1,t.data=r.data,t.total=r.data.total}).catch(()=>{t.loading=!1})};u();const D=L(),j=s=>{D.push({path:"/tools/addon_edit",query:{key:s}})},F=s=>{t.loading=!0,X(s.key).then(r=>{t.loading=!1,Y(s.key).then(f=>{w.alert(`插件打包成功，插件包所在位置：网站根目录${f.data}下请手动进行下载`,e("warning"))}).catch()}).catch(()=>{t.loading=!1})},T=s=>{w.confirm(e("codeDeleteTips"),e("warning"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel"),type:"warning"}).then(()=>{t.loading=!0,ee(s).then(()=>{u()}).catch(()=>{t.loading=!1})})};return(s,r)=>{const f=z,y=K,_=S,V=U,b=Z,N=G,c=H,P=J,$=Q;return p(),v("div",te,[o(b,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[d("div",ae,[d("span",le,i(a(E)),1)]),o(b,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:n(()=>[o(V,{inline:!0,model:t.searchParam,ref_key:"searchFormRef",ref:g,class:"search-form"},{default:n(()=>[o(y,{label:a(e)("title"),prop:"search"},{default:n(()=>[o(f,{modelValue:t.searchParam.search,"onUpdate:modelValue":r[0]||(r[0]=l=>t.searchParam.search=l),modelModifiers:{trim:!0},placeholder:a(e)("titlePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(y,null,{default:n(()=>[o(_,{type:"primary",onClick:u},{default:n(()=>[m(i(a(e)("search")),1)]),_:1}),o(_,{onClick:r[1]||(r[1]=l=>B(g.value))},{default:n(()=>[m(i(a(e)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),d("div",oe,[M((p(),h(P,{data:t.data,size:"large"},{empty:n(()=>[d("span",null,i(a(e)("emptyData")),1)]),default:n(()=>[o(c,{label:a(e)("title"),align:"left","min-width":"320"},{default:n(({row:l})=>[d("div",ne,[l.icon?(p(),h(N,{key:0,class:"w-[45px] h-[45px]",src:l.icon.indexOf("data:image")!=-1?l.icon:a(q)(l.icon),fit:"contain"},{error:n(()=>[se]),_:2},1032,["src"])):(p(),v("img",ie)),d("div",re,i(l.title),1)])]),_:1},8,["label"]),o(c,{prop:"key",label:a(e)("key"),"min-width":"200"},null,8,["label"]),o(c,{prop:"type_name",label:a(e)("type"),align:"center","min-width":"200"},null,8,["label"]),o(c,{prop:"author",label:a(e)("author"),"min-width":"200"},null,8,["label"]),o(c,{prop:"version",label:a(e)("version"),align:"center","min-width":"200"},null,8,["label"]),o(c,{label:a(e)("status"),align:"center","min-width":"200"},{default:n(({row:l})=>[m(i(Object.keys(l.install_info).length?"已安装":"未安装"),1)]),_:1},8,["label"]),o(c,{label:a(e)("operation"),fixed:"right",align:"right",width:"180","show-overflow-tooltip":!0},{default:n(({row:l})=>[Object.keys(l.install_info).length?(p(),h(_,{key:0,type:"primary",link:"",onClick:k=>F(l)},{default:n(()=>[m(i(a(e)("step4")),1)]),_:2},1032,["onClick"])):x("",!0),Object.keys(l.install_info).length?x("",!0):(p(),h(_,{key:1,type:"primary",link:"",onClick:k=>T(l.key)},{default:n(()=>[m(i(a(e)("delete")),1)]),_:2},1032,["onClick"])),o(_,{type:"primary",link:"",onClick:k=>j(l.key)},{default:n(()=>[m(i(a(e)("edit")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[$,t.loading]])])]),_:1})])}}});export{Fe as default};
