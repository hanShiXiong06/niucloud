import{d as N,r as b,n as P,l as H,R as y,h as i,s as L,w as p,a as e,c as n,t as d,C as _,e as u,i as x,u as w,v as z,$ as S,as as T,aN as U,L as $,N as A,E as O,V as R,p as q,g as G}from"./index-9cfed1fc.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                 *//* empty css                        *//* empty css               */import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";const o=v=>(q("data-v-075dde98"),v=v(),G(),v),K={class:"flex justify-between items-center p-4 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-t-lg"},Q={class:"flex items-center space-x-3"},W=o(()=>e("div",{class:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z","clip-rule":"evenodd"})])],-1)),X=o(()=>e("h3",{class:"text-lg font-bold"},"设备定价",-1)),Y={key:0,class:"text-orange-100 text-xs"},Z={key:0,class:"text-right"},ee=o(()=>e("div",{class:"text-xs text-orange-100"},"IMEI",-1)),te={class:"font-mono text-sm"},se={class:"p-4 bg-gray-50 space-y-4 max-h-[70vh] overflow-y-auto"},ae={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},oe={class:"flex items-center justify-between px-4 py-2 bg-gradient-to-r from-gray-50 to-orange-50 border-b"},le=o(()=>e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-4 h-4 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"font-medium text-gray-800 text-sm"},"价格对比")],-1)),re={class:"p-4"},ie={class:"grid grid-cols-2 gap-3 mb-4"},de={class:"bg-gray-50 rounded-md p-2"},ce=o(()=>e("div",{class:"text-xs text-gray-500"},"设备型号",-1)),ne={class:"text-sm font-medium text-gray-900 truncate"},pe={class:"bg-gray-50 rounded-md p-2"},_e=o(()=>e("div",{class:"text-xs text-gray-500"},"IMEI码",-1)),ue={class:"text-sm font-mono text-gray-900"},ve={class:"flex items-center justify-between bg-gradient-to-r from-blue-50 to-orange-50 rounded-lg p-4 border"},me={key:0,class:"text-center flex-1"},fe=o(()=>e("div",{class:"text-xs text-gray-500 mb-1"},"之前定价",-1)),xe={class:"text-lg font-bold text-blue-600"},ge={key:1,class:"flex items-center justify-center px-4"},he=o(()=>e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)),be=[he],ye={class:"text-center flex-1"},we=o(()=>e("div",{class:"text-xs text-gray-500 mb-1"},"最终定价",-1)),Ce={key:0,class:"mt-3 text-center"},ke={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},ze=o(()=>e("div",{class:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-gray-50 to-green-50 border-b"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("span",{class:"font-medium text-gray-800 text-sm"},"质检结果")],-1)),Ve={class:"p-4"},Me={class:"bg-green-50 rounded-md p-3 border border-green-200"},Be={class:"text-xs text-green-700 leading-relaxed"},Ie={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},Ee=o(()=>e("div",{class:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-gray-50 to-purple-50 border-b"},[e("svg",{class:"w-4 h-4 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),e("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"})]),e("span",{class:"font-medium text-gray-800 text-sm"},"定价信息")],-1)),Fe={class:"p-4"},je=o(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[e("svg",{class:"w-4 h-4 inline mr-1 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z","clip-rule":"evenodd"})]),x(" 最终价格 "),e("span",{class:"text-red-500"},"*")],-1)),De=o(()=>e("div",{class:"mt-1 text-xs text-gray-500"}," 输入设备的最终定价金额，将影响用户的实际收益 ",-1)),Ne=o(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[e("svg",{class:"w-4 h-4 inline mr-1 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),x(" 价格备注 ")],-1)),Pe=o(()=>e("div",{class:"mt-1 text-xs text-gray-500"}," 详细说明定价的依据和理由，便于后续审核和记录 ",-1)),He={key:0,class:"bg-red-50 border border-red-200 rounded-md p-3"},Le=o(()=>e("div",{class:"flex items-center"},[e("svg",{class:"w-4 h-4 text-red-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),e("span",{class:"text-sm text-red-700"},"请输入有效的价格（大于等于0）")],-1)),Se=[Le],Te={key:1,class:"bg-green-50 border border-green-200 rounded-md p-3"},Ue=o(()=>e("div",{class:"flex items-center"},[e("svg",{class:"w-4 h-4 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("span",{class:"text-sm text-green-700"},"表单填写完整，可以提交定价")],-1)),$e=[Ue],Ae={class:"flex justify-end space-x-3 px-4 pb-4"},Oe=o(()=>e("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),Re=N({__name:"PriceFormDialog",props:{visible:{type:Boolean,default:!1},device:{type:Object,default:()=>({})}},emits:["update:visible","confirm","cancel"],setup(v,{emit:h}){const r=v,m=b(r.visible),t=b({...r.device}),s=P({final_price:typeof r.device.final_price=="number"?r.device.final_price:typeof r.device.final_price=="string"&&parseFloat(r.device.final_price)||void 0,remark:r.device.remark||""}),g=H(()=>typeof s.final_price=="number"&&s.final_price>=0),c=b(""),C=()=>{const a=typeof t.value.before_price=="string"?parseFloat(t.value.before_price):t.value.before_price||0;if(!s.final_price||a===0){c.value="";return}s.final_price>a?c.value="price-increase":s.final_price<a?c.value="price-decrease":c.value=""},V=()=>{const a=typeof t.value.before_price=="string"?parseFloat(t.value.before_price):t.value.before_price||0;if(!s.final_price||a===0)return"";const l=s.final_price-a;return l>0?`上涨 ¥${l.toFixed(2)}`:l<0?`下降 ¥${Math.abs(l).toFixed(2)}`:"价格不变"};y(()=>r.visible,a=>{m.value=a}),y(()=>r.device,a=>{t.value={...a},s.final_price=typeof a.final_price=="number"?a.final_price:typeof a.final_price=="string"&&parseFloat(a.final_price)||void 0,s.remark=a.remark||"",t.value.status=4,C()},{deep:!0}),y(m,a=>{h("update:visible",a)});const M=()=>{m.value=!1,h("cancel")},B=()=>{if(!g.value){S.warning("请输入有效的价格");return}h("confirm",{id:t.value.id,final_price:s.final_price,status:t.value.status,remark:s.remark})};return(a,l)=>{const I=T,E=U,F=$,j=A,k=O,D=R;return i(),L(D,{modelValue:m.value,"onUpdate:modelValue":l[2]||(l[2]=f=>m.value=f),title:"",width:"600px","destroy-on-close":!0,class:"price-form-dialog"},{header:p(()=>[e("div",K,[e("div",Q,[W,e("div",null,[X,t.value.model?(i(),n("p",Y,d(t.value.model),1)):_("",!0)])]),t.value.imei?(i(),n("div",Z,[ee,e("div",te,d(t.value.imei),1)])):_("",!0)])]),footer:p(()=>[e("div",Ae,[u(k,{onClick:M,class:"px-4 py-2"},{default:p(()=>[x(" 取消 ")]),_:1}),u(k,{type:"primary",onClick:B,disabled:!w(g),class:"px-6 py-2"},{default:p(()=>[Oe,x(" 确认定价 ")]),_:1},8,["disabled"])])]),default:p(()=>[e("div",se,[e("div",ae,[e("div",oe,[le,u(I,{size:"small",type:"info",effect:"plain"},{default:p(()=>[x(" ID: "+d(t.value.id),1)]),_:1})]),e("div",re,[e("div",ie,[e("div",de,[ce,e("div",ne,d(t.value.model||"未知型号"),1)]),e("div",pe,[_e,e("div",ue,d(t.value.imei||"无IMEI"),1)])]),e("div",ve,[t.value.before_price?(i(),n("div",me,[fe,e("div",xe,"¥"+d(t.value.before_price||"0.00"),1)])):_("",!0),t.value.before_price?(i(),n("div",ge,be)):_("",!0),e("div",ye,[we,e("div",{class:z(["text-lg font-bold",c.value==="price-increase"?"text-green-600":c.value==="price-decrease"?"text-red-600":"text-orange-600"])}," ¥"+d(s.final_price||"0.00"),3)])]),t.value.before_price&&s.final_price?(i(),n("div",Ce,[e("span",{class:z(["inline-flex items-center text-xs font-medium px-2 py-1 rounded",c.value==="price-increase"?"bg-green-100 text-green-700":c.value==="price-decrease"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"])},d(V()),3)])):_("",!0)])]),t.value.check_result?(i(),n("div",ke,[ze,e("div",Ve,[e("div",Me,[e("div",Be,d(t.value.check_result),1)])])])):_("",!0),e("div",Ie,[Ee,e("div",Fe,[u(j,{model:s,"label-position":"top",class:"space-y-4"},{default:p(()=>[e("div",null,[je,u(E,{modelValue:s.final_price,"onUpdate:modelValue":l[0]||(l[0]=f=>s.final_price=f),placeholder:"请输入最终价格",step:10,min:0,style:{width:"100%"},onChange:C,class:"w-full"},null,8,["modelValue"]),De]),e("div",null,[Ne,u(F,{modelValue:s.remark,"onUpdate:modelValue":l[1]||(l[1]=f=>s.remark=f),type:"textarea",rows:"3",placeholder:"请输入定价理由或扣费说明",maxlength:"200","show-word-limit":"",class:"w-full"},null,8,["modelValue"]),Pe]),!w(g)&&s.final_price!==void 0?(i(),n("div",He,Se)):w(g)?(i(),n("div",Te,$e)):_("",!0)]),_:1},8,["model"])])])])]),_:1},8,["modelValue"])}}});const e0=J(Re,[["__scopeId","data-v-075dde98"]]);export{e0 as default};
