import{r as d,R as v,aZ as f}from"./index-0b74b7aa.js";function S(r){const o=d([]),n=d({page:1,limit:15,total:0}),s=`page_state_${r}`,l=()=>{const e={expandedRows:o.value.map(a=>typeof a=="object"&&a!==null&&a.id!==void 0?a.id:a),pagination:n.value};localStorage.setItem(s,JSON.stringify(e))},i=()=>{try{const t=localStorage.getItem(s);if(t){const e=JSON.parse(t);e.pagination&&(n.value={...n.value,...e.pagination}),e.expandedRows&&e.expandedRows.length>0&&(o.value=e.expandedRows)}}catch(t){console.error("恢复页面状态失败:",t),localStorage.removeItem(s)}},u=t=>{o.value=t.map(e=>typeof e=="object"&&e!==null&&e.id!==void 0?e.id:e),l()},p=t=>{n.value={...n.value,...t},l()},c=t=>{if(!o.value.length||!t.length)return[];const e=o.value.map(a=>typeof a=="object"&&a!==null?a.id:a);return t.filter(a=>e.includes(a.id))},g=()=>{localStorage.removeItem(s),o.value=[],n.value={page:1,limit:15,total:0}};return v(()=>n.value,()=>{l()},{deep:!0}),f(()=>{i()}),{expandedRows:o,pagination:n,setExpandedRows:u,setPagination:p,applyExpandedRows:c,clearState:g,saveState:l,restoreState:i}}export{S as u};
