import{d as S,y as $,f as j,n as R,r as U,bS as x,h as m,c as p,e as t,w as o,a as c,t as s,u as r,i as v,q as a,Z as q,s as I,F as f,W as k,C,bT as G,ah as O,E as W,L as Z,M as A,N as H,a9 as J,aj as K,ak as Q,a2 as X,a3 as Y}from"./index-0b74b7aa.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                  */import{N as ee,O as te}from"./member-cf62c19b.js";const ae={class:"main-container"},le={class:"flex justify-between items-center"},ne={class:"text-page-title"},oe={class:"mt-[10px]"},re={key:0},ie={key:0},se={class:"mt-[16px] flex justify-end"},Ne=S({__name:"level",setup(me){const E=$(),b=j(),P=E.meta.title,e=R({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{level_name:""}}),h=U(),L=i=>{i&&(i.resetFields(),u())},u=(i=1)=>{e.loading=!0,e.page=i,ee({page:e.page,limit:e.limit,...e.searchParam}).then(l=>{e.loading=!1,e.data=l.data.data,e.total=l.data.total,G(e.page,e.limit,e.searchParam)}).catch(()=>{e.loading=!1})};u(x(e.searchParam).page);const N=()=>{b.push({path:"/member/level_edit"})},T=i=>{b.push({path:"/member/level_edit",query:{id:i.level_id}})},B=i=>{O.confirm(a("memberLevelDeleteTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{te(i).then(()=>{u(x(e.searchParam).page)}).catch(()=>{})})};return(i,l)=>{const g=W,F=Z,y=A,M=H,w=J,_=K,V=Q,z=X,D=Y;return m(),p("div",ae,[t(w,{class:"box-card !border-none",shadow:"never"},{default:o(()=>[c("div",le,[c("span",ne,s(r(P)),1),t(g,{type:"primary",onClick:N},{default:o(()=>[v(s(r(a)("addMemberLevel")),1)]),_:1})]),t(w,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:o(()=>[t(M,{inline:!0,model:e.searchParam,ref_key:"searchFormRef",ref:h},{default:o(()=>[t(y,{label:r(a)("levelName"),prop:"level_name"},{default:o(()=>[t(F,{modelValue:e.searchParam.level_name,"onUpdate:modelValue":l[0]||(l[0]=n=>e.searchParam.level_name=n),modelModifiers:{trim:!0},placeholder:r(a)("levelNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(y,null,{default:o(()=>[t(g,{type:"primary",onClick:l[1]||(l[1]=n=>u())},{default:o(()=>[v(s(r(a)("search")),1)]),_:1}),t(g,{onClick:l[2]||(l[2]=n=>L(h.value))},{default:o(()=>[v(s(r(a)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),c("div",oe,[q((m(),I(V,{data:e.data,size:"large"},{empty:o(()=>[c("span",null,s(e.loading?"":r(a)("emptyData")),1)]),default:o(()=>[t(_,{prop:"level_name",label:r(a)("levelName"),"min-width":"120"},null,8,["label"]),t(_,{prop:"growth",label:r(a)("growth"),"min-width":"120"},null,8,["label"]),t(_,{label:r(a)("levelBenefits"),"min-width":"120","show-overflow-tooltip":!0},{default:o(({row:n})=>[c("div",null,[(m(!0),p(f,null,k(n.level_benefits,d=>(m(),p(f,null,[d.content?(m(),p("div",re,s(d.content),1)):C("",!0)],64))),256))])]),_:1},8,["label"]),t(_,{label:r(a)("levelGifts"),"min-width":"120"},{default:o(({row:n})=>[c("div",null,[(m(!0),p(f,null,k(n.level_gifts,d=>(m(),p(f,null,[d.content?(m(),p("div",ie,s(d.content),1)):C("",!0)],64))),256))])]),_:1},8,["label"]),t(_,{prop:"member_num",label:r(a)("memberNumber"),"min-width":"120"},null,8,["label"]),t(_,{label:r(a)("operation"),align:"right",fixed:"right",width:"130"},{default:o(({row:n})=>[t(g,{type:"primary",link:"",onClick:d=>T(n)},{default:o(()=>[v(s(r(a)("edit")),1)]),_:2},1032,["onClick"]),t(g,{type:"primary",link:"",onClick:d=>B(n.level_id)},{default:o(()=>[v(s(r(a)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[D,e.loading]]),c("div",se,[t(z,{"current-page":e.page,"onUpdate:current-page":l[3]||(l[3]=n=>e.page=n),"page-size":e.limit,"onUpdate:page-size":l[4]||(l[4]=n=>e.limit=n),layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:l[5]||(l[5]=n=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])])]),_:1})])}}});export{Ne as default};
